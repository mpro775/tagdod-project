{
  "openapi": "3.0.0",
  "paths": {
    "/api/v1/auth/send-otp": {
      "post": {
        "operationId": "sendOtp",
        "summary": "إرسال رمز OTP إلى رقم الهاتف",
        "description": "يرسل كلمة مرور لمرة واحدة (OTP) إلى رقم الهاتف المحدد للمصادقة",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendOtpDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إرسال رمز OTP بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "sent": {
                      "type": "boolean",
                      "example": true
                    },
                    "devCode": {
                      "type": "string",
                      "example": "123456",
                      "description": "Development code (only in dev environment)"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "رقم الهاتف أو السياق غير صحيح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "صيغة رقم الهاتف غير صحيحة"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/verify-otp": {
      "post": {
        "operationId": "verifyOtp",
        "summary": "التحقق من رمز OTP وإتمام التسجيل/الدخول",
        "description": "يتحقق من رمز OTP ويتم عملية تسجيل المستخدم أو دخوله",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyOtpDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم التحقق من رمز OTP بنجاح ومصادقة المستخدم",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tokens": {
                      "type": "object",
                      "properties": {
                        "access": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "refresh": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        }
                      }
                    },
                    "me": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "phone": {
                          "type": "string",
                          "example": "+966501234567"
                        },
                        "preferredCurrency": {
                          "type": "string",
                          "example": "USD"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "الحقول المطلوبة مفقودة لتسجيل المهندس",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "المسمى الوظيفي مطلوب للمهندسين"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "رمز OTP غير صحيح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "رمز التحقق غير صالح"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/set-password": {
      "post": {
        "operationId": "setPassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetPasswordDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "المصادقة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/auth/preferred-currency": {
      "patch": {
        "operationId": "updatePreferredCurrency",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePreferredCurrencyDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "المصادقة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/auth/forgot-password": {
      "post": {
        "operationId": "forgot",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/reset-password": {
      "post": {
        "operationId": "reset",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "operationId": "me",
        "summary": "الحصول على ملف المستخدم الحالي",
        "description": "يسترد ملف المستخدم المصادق عليه الحالي وقدراته",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد ملف المستخدم بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "phone": {
                          "type": "string",
                          "example": "+966501234567"
                        },
                        "firstName": {
                          "type": "string",
                          "example": "أحمد"
                        },
                        "lastName": {
                          "type": "string",
                          "example": "محمد"
                        },
                        "gender": {
                          "type": "string",
                          "example": "male",
                          "enum": [
                            "male",
                            "female"
                          ]
                        },
                        "jobTitle": {
                          "type": "string",
                          "example": "مهندس كهرباء"
                        },
                        "isAdmin": {
                          "type": "boolean",
                          "example": false
                        }
                      }
                    },
                    "capabilities": {
                      "type": "object",
                      "properties": {
                        "customer_capable": {
                          "type": "boolean",
                          "example": true
                        },
                        "engineer_capable": {
                          "type": "boolean",
                          "example": false
                        },
                        "merchant_capable": {
                          "type": "boolean",
                          "example": false
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing JWT token"
          }
        },
        "tags": [
          "المصادقة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateMe",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "المصادقة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteMe",
        "summary": "حذف الحساب",
        "description": "حذف حساب المستخدم (Soft Delete) مع إدخال السبب",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteAccountDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم حذف الحساب بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "deleted": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "تم حذف حسابك بنجاح"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة أو السبب مفقود"
          },
          "401": {
            "description": "غير مصرح لك"
          }
        },
        "tags": [
          "المصادقة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/auth/admin/pending": {
      "get": {
        "operationId": "pending",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "المصادقة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/auth/admin/approve": {
      "post": {
        "operationId": "approve",
        "parameters": [],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "المصادقة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/auth/create-super-admin": {
      "post": {
        "operationId": "createSuperAdmin",
        "parameters": [],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/admin-login": {
      "post": {
        "operationId": "adminLogin",
        "summary": "تسجيل دخول الأدمن/السوبر أدمن بكلمة المرور",
        "description": "تسجيل دخول المسؤولين باستخدام رقم الهاتف وكلمة المرور",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminLoginDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم تسجيل الدخول بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "tokens": {
                          "type": "object",
                          "properties": {
                            "access": {
                              "type": "string",
                              "description": "Access Token"
                            },
                            "refresh": {
                              "type": "string",
                              "description": "Refresh Token"
                            }
                          }
                        },
                        "me": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "phone": {
                              "type": "string"
                            },
                            "firstName": {
                              "type": "string"
                            },
                            "lastName": {
                              "type": "string"
                            },
                            "roles": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "permissions": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "isAdmin": {
                              "type": "boolean"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "401": {
            "description": "كلمة المرور غير صحيحة"
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/user-signup": {
      "post": {
        "operationId": "userSignup",
        "summary": "تسجيل حساب جديد للمستخدم العادي/المهندس/التاجر بكلمة مرور",
        "description": "إنشاء حساب جديد باستخدام رقم الهاتف وكلمة المرور مع البيانات الأساسية",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserSignupDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء الحساب بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "tokens": {
                          "type": "object",
                          "properties": {
                            "access": {
                              "type": "string",
                              "description": "Access Token"
                            },
                            "refresh": {
                              "type": "string",
                              "description": "Refresh Token"
                            }
                          }
                        },
                        "me": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "phone": {
                              "type": "string"
                            },
                            "firstName": {
                              "type": "string"
                            },
                            "lastName": {
                              "type": "string"
                            },
                            "gender": {
                              "type": "string"
                            },
                            "jobTitle": {
                              "type": "string"
                            },
                            "roles": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "permissions": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "isAdmin": {
                              "type": "boolean"
                            },
                            "preferredCurrency": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة أو رقم الهاتف موجود مسبقاً"
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/biometric/register-challenge": {
      "post": {
        "operationId": "createBiometricRegisterChallenge",
        "summary": "الحصول على تحدي WebAuthn لتسجيل بصمة اليد",
        "description": "ينشئ تحدياً لتسجيل جهاز جديد باستخدام WebAuthn للمستخدم المحدد",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BiometricRegisterChallengeDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إنشاء التحدي بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "options": {
                      "type": "object",
                      "properties": {
                        "challenge": {
                          "type": "string",
                          "example": "base64url-encoded-challenge"
                        },
                        "rp": {
                          "type": "object",
                          "properties": {
                            "name": {
                              "type": "string",
                              "example": "Tagdod Platform"
                            },
                            "id": {
                              "type": "string",
                              "example": "localhost"
                            }
                          }
                        },
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "example": "base64-encoded-user-id"
                            },
                            "name": {
                              "type": "string",
                              "example": "+966501234567"
                            },
                            "displayName": {
                              "type": "string",
                              "example": "+966501234567"
                            }
                          }
                        },
                        "pubKeyCredParams": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "string",
                                "example": "public-key"
                              },
                              "alg": {
                                "type": "number",
                                "example": -7
                              }
                            }
                          }
                        },
                        "timeout": {
                          "type": "number",
                          "example": 300000
                        },
                        "attestationType": {
                          "type": "string",
                          "example": "none"
                        },
                        "authenticatorSelection": {
                          "type": "object",
                          "properties": {
                            "residentKey": {
                              "type": "string",
                              "example": "preferred"
                            },
                            "userVerification": {
                              "type": "string",
                              "example": "required"
                            }
                          }
                        },
                        "excludeCredentials": {
                          "type": "array",
                          "items": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة أو رقم هاتف غير صالح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "صيغة رقم الهاتف غير صحيحة"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "المستخدم غير موجود أو الحساب غير نشط",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "المستخدم غير موجود"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/biometric/register-verify": {
      "post": {
        "operationId": "verifyBiometricRegister",
        "summary": "التحقق من استجابة WebAuthn لإتمام تسجيل بصمة اليد",
        "description": "يتحقق من استجابة WebAuthn ويخزن بيانات الجهاز المسجل",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BiometricRegisterVerifyDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تسجيل الجهاز بنجاح وإصدار التوكنات",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tokens": {
                      "type": "object",
                      "properties": {
                        "access": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "refresh": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        }
                      }
                    },
                    "me": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "phone": {
                          "type": "string",
                          "example": "+966501234567"
                        },
                        "firstName": {
                          "type": "string",
                          "example": "أحمد"
                        },
                        "lastName": {
                          "type": "string",
                          "example": "محمد"
                        },
                        "gender": {
                          "type": "string",
                          "example": "male"
                        },
                        "city": {
                          "type": "string",
                          "example": "صنعاء"
                        },
                        "jobTitle": {
                          "type": "string",
                          "example": "مهندس"
                        },
                        "roles": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": []
                        },
                        "permissions": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": []
                        },
                        "isAdmin": {
                          "type": "boolean",
                          "example": false
                        },
                        "preferredCurrency": {
                          "type": "string",
                          "example": "USD"
                        },
                        "engineerStatus": {
                          "type": "string",
                          "example": "none"
                        },
                        "merchantStatus": {
                          "type": "string",
                          "example": "none"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات الاستجابة غير صحيحة أو فشل التحقق",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "فشل التحقق من بيانات البصمة"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "فشل التحقق من الاستجابة أو انتهت صلاحية التحدي",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "انتهت صلاحية التحدي"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/biometric/login-challenge": {
      "post": {
        "operationId": "createBiometricLoginChallenge",
        "summary": "الحصول على تحدي WebAuthn لتسجيل الدخول بالبصمة",
        "description": "ينشئ تحدياً لتوثيق المستخدم بالبصمة على جهاز مسجل مسبقاً",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BiometricLoginChallengeDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إنشاء التحدي بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "options": {
                      "type": "object",
                      "properties": {
                        "challenge": {
                          "type": "string",
                          "example": "base64url-encoded-challenge"
                        },
                        "allowCredentials": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "string",
                                "example": "public-key"
                              },
                              "id": {
                                "type": "string",
                                "example": "base64url-credential-id"
                              },
                              "transports": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                },
                                "example": [
                                  "internal",
                                  "hybrid"
                                ]
                              }
                            }
                          }
                        },
                        "rpId": {
                          "type": "string",
                          "example": "localhost"
                        },
                        "timeout": {
                          "type": "number",
                          "example": 300000
                        },
                        "userVerification": {
                          "type": "string",
                          "example": "required"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "صيغة رقم الهاتف غير صحيحة"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "المستخدم غير موجود أو لم يتم تسجيل بصمة من قبل",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "لم يتم تسجيل بصمة لهذا المستخدم"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/biometric/login-verify": {
      "post": {
        "operationId": "verifyBiometricLogin",
        "summary": "التحقق من استجابة WebAuthn لتسجيل الدخول بالبصمة",
        "description": "يتحقق من التحدي ويصدر توكنات الدخول للمستخدم",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BiometricLoginVerifyDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تسجيل الدخول بنجاح باستخدام البصمة",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tokens": {
                      "type": "object",
                      "properties": {
                        "access": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "refresh": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        }
                      }
                    },
                    "me": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "phone": {
                          "type": "string",
                          "example": "+966501234567"
                        },
                        "firstName": {
                          "type": "string",
                          "example": "أحمد"
                        },
                        "lastName": {
                          "type": "string",
                          "example": "محمد"
                        },
                        "gender": {
                          "type": "string",
                          "example": "male"
                        },
                        "city": {
                          "type": "string",
                          "example": "صنعاء"
                        },
                        "jobTitle": {
                          "type": "string",
                          "example": "مهندس"
                        },
                        "roles": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": []
                        },
                        "permissions": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": []
                        },
                        "isAdmin": {
                          "type": "boolean",
                          "example": false
                        },
                        "preferredCurrency": {
                          "type": "string",
                          "example": "USD"
                        },
                        "engineerStatus": {
                          "type": "string",
                          "example": "none"
                        },
                        "merchantStatus": {
                          "type": "string",
                          "example": "none"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات الاستجابة غير صحيحة",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "بيانات الاستجابة غير صحيحة"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "فشل التحقق من البصمة أو انتهت صلاحية التحدي",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "فشل التحقق من البصمة"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/user-login": {
      "post": {
        "operationId": "userLogin",
        "summary": "تسجيل دخول المستخدم العادي/المهندس/التاجر بكلمة المرور",
        "description": "تسجيل دخول المستخدمين العاديين باستخدام رقم الهاتف وكلمة المرور",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLoginDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم تسجيل الدخول بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "tokens": {
                          "type": "object",
                          "properties": {
                            "access": {
                              "type": "string",
                              "description": "Access Token"
                            },
                            "refresh": {
                              "type": "string",
                              "description": "Refresh Token"
                            }
                          }
                        },
                        "me": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "phone": {
                              "type": "string"
                            },
                            "firstName": {
                              "type": "string"
                            },
                            "lastName": {
                              "type": "string"
                            },
                            "roles": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "permissions": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "isAdmin": {
                              "type": "boolean"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "401": {
            "description": "كلمة المرور غير صحيحة"
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/auth/dev-login": {
      "post": {
        "operationId": "devLogin",
        "parameters": [],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "المصادقة"
        ]
      }
    },
    "/api/v1/favorites": {
      "get": {
        "operationId": "listFavorites",
        "summary": "الحصول على قائمة المفضلات",
        "description": "استرداد قائمة بجميع المنتجات المضافة للمفضلة من قبل المستخدم",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة المفضلات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "_id": {
                        "type": "string",
                        "example": "65af1c91f2a7f20012d34567",
                        "description": "معرف عنصر المفضلة"
                      },
                      "productId": {
                        "type": "string",
                        "example": "65af1c91f2a7f20012d39999",
                        "description": "معرف المنتج"
                      },
                      "note": {
                        "type": "string",
                        "example": "أحتاج التحقق من المخزون قبل الشراء",
                        "description": "ملاحظة المستخدم"
                      },
                      "isSynced": {
                        "type": "boolean",
                        "example": false,
                        "description": "هل تمت مزامنة هذا السجل من جهاز زائر"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-02-01T12:30:00.000Z",
                        "description": "تاريخ الإضافة للمفضلة"
                      }
                    }
                  },
                  "example": [
                    {
                      "_id": "65af1c91f2a7f20012d34567",
                      "productId": "65af1c91f2a7f20012d39999",
                      "note": "أحتاج التحقق من المخزون قبل الشراء",
                      "isSynced": false,
                      "createdAt": "2025-02-01T12:30:00.000Z"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "المفضلات-المستخدم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "post": {
        "operationId": "addFavorite",
        "summary": "إضافة منتج للمفضلة",
        "description": "إضافة منتج إلى قائمة المفضلات الخاصة بالمستخدم",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddFavoriteDto"
              },
              "examples": {
                "default": {
                  "summary": "إضافة منتج عادي",
                  "value": {
                    "productId": "65af1c91f2a7f20012d39999",
                    "note": "هدية لعيد ميلاد أختي"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إضافة المنتج للمفضلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "_id": {
                      "type": "string",
                      "example": "65af1c91f2a7f20012d35555",
                      "description": "معرف المفضلة الجديدة"
                    },
                    "productId": {
                      "type": "string",
                      "example": "65af1c91f2a7f20012d39999",
                      "description": "معرف المنتج"
                    },
                    "note": {
                      "type": "string",
                      "example": "منتج رائع!",
                      "description": "ملاحظة المستخدم"
                    },
                    "isSynced": {
                      "type": "boolean",
                      "example": false,
                      "description": "هل تمت مزامنة هذا السجل من جهاز زائر"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2025-02-01T12:30:00.000Z",
                      "description": "تاريخ الإضافة"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2025-02-01T12:30:00.000Z",
                      "description": "آخر تحديث"
                    }
                  },
                  "example": {
                    "_id": "65af1c91f2a7f20012d35555",
                    "productId": "65af1c91f2a7f20012d39999",
                    "note": "منتج رائع!",
                    "isSynced": false,
                    "createdAt": "2025-02-01T12:30:00.000Z",
                    "updatedAt": "2025-02-01T12:30:00.000Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة أو المنتج موجود بالفعل في المفضلة"
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "المفضلات-المستخدم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "removeFavorite",
        "summary": "إزالة منتج من المفضلة",
        "description": "إزالة منتج من قائمة المفضلات الخاصة بالمستخدم",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RemoveFavoriteDto"
              },
              "examples": {
                "removeByProduct": {
                  "summary": "إزالة منتج أساسي",
                  "value": {
                    "productId": "65af1c91f2a7f20012d39999"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إزالة المنتج من المفضلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "deleted": {
                      "type": "boolean",
                      "example": true,
                      "description": "هل تم حذف المفضلة بنجاح"
                    }
                  },
                  "example": {
                    "deleted": true
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "المفضلات-المستخدم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/favorites/{id}": {
      "patch": {
        "operationId": "updateFavorite",
        "summary": "تحديث مفضلة",
        "description": "تحديث ملاحظة أو تفاصيل عنصر في المفضلة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف المفضلة",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateFavoriteDto"
              },
              "examples": {
                "updateNote": {
                  "summary": "تحديث الملاحظة فقط",
                  "value": {
                    "note": "تم التأكد من السعر، مناسب للشراء"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث المفضلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "_id": {
                      "type": "string",
                      "example": "65af1c91f2a7f20012d34567",
                      "description": "معرف المفضلة"
                    },
                    "productId": {
                      "type": "string",
                      "example": "65af1c91f2a7f20012d39999",
                      "description": "معرف المنتج"
                    },
                    "note": {
                      "type": "string",
                      "example": "منتج ممتاز!",
                      "description": "الملاحظة المحدثة"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2025-02-05T17:00:00.000Z",
                      "description": "تاريخ التحديث"
                    }
                  },
                  "example": {
                    "_id": "65af1c91f2a7f20012d34567",
                    "productId": "65af1c91f2a7f20012d39999",
                    "note": "منتج ممتاز!",
                    "updatedAt": "2025-02-05T17:00:00.000Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          },
          "404": {
            "description": "المفضلة غير موجودة"
          }
        },
        "tags": [
          "المفضلات-المستخدم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/favorites/clear/all": {
      "delete": {
        "operationId": "clearFavorites",
        "summary": "حذف جميع المفضلات",
        "description": "حذف جميع المنتجات من قائمة المفضلات الخاصة بالمستخدم",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم حذف جميع المفضلات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "cleared": {
                      "type": "number",
                      "example": 15,
                      "description": "عدد العناصر المحذوفة"
                    }
                  },
                  "example": {
                    "cleared": 15
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "المفضلات-المستخدم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/favorites/count": {
      "get": {
        "operationId": "getCount",
        "summary": "الحصول على عدد المفضلات",
        "description": "استرداد عدد المنتجات في قائمة المفضلات الخاصة بالمستخدم",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد عدد المفضلات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "number",
                      "example": 15,
                      "description": "عدد المنتجات في المفضلة"
                    }
                  },
                  "example": {
                    "count": 15
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "المفضلات-المستخدم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/favorites/sync": {
      "post": {
        "operationId": "syncFromGuest",
        "summary": "مزامنة مفضلات الزائر مع حساب المستخدم",
        "description": "يحول المفضلات المخزنة بواسطة deviceId إلى حساب المستخدم الحالي مع احتساب العناصر المتكررة",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SyncFavoritesDto"
              },
              "examples": {
                "default": {
                  "summary": "مزامنة قياسية",
                  "value": {
                    "deviceId": "device-abc-123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تمت المزامنة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "synced": {
                      "type": "number",
                      "example": 5,
                      "description": "عدد العناصر التي تمت إضافتها للمستخدم"
                    },
                    "skipped": {
                      "type": "number",
                      "example": 2,
                      "description": "عدد العناصر التي تم تجاوزها لأنها موجودة مسبقاً"
                    },
                    "total": {
                      "type": "number",
                      "example": 7,
                      "description": "إجمالي العناصر التي تمت قراءتها من جهاز الزائر"
                    }
                  },
                  "example": {
                    "synced": 5,
                    "skipped": 2,
                    "total": 7
                  }
                }
              }
            }
          },
          "400": {
            "description": "DeviceId مفقود أو غير صالح"
          }
        },
        "tags": [
          "المفضلات-المستخدم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/favorites/{id}/view": {
      "post": {
        "operationId": "incrementView",
        "summary": "زيادة عدد مرات مشاهدة عنصر المفضلة",
        "description": "يستخدم هذا النداء عادة عند فتح المستخدم لصفحة المنتج لإحصاء الاهتمام",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف عنصر المفضلة",
            "schema": {
              "example": "65af1c91f2a7f20012d34567",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تحديث عداد المشاهدات للمفضلة",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "viewed": {
                      "type": "boolean",
                      "example": true,
                      "description": "تأكيد نجاح العملية"
                    }
                  },
                  "example": {
                    "viewed": true
                  }
                }
              }
            }
          },
          "404": {
            "description": "المفضلة غير موجودة"
          }
        },
        "tags": [
          "المفضلات-المستخدم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/favorites/guest": {
      "get": {
        "operationId": "listFavorites",
        "summary": "الحصول على مفضلات الزائر",
        "description": "استرداد قائمة المفضلات للزائر غير المسجل باستخدام معرف الجهاز",
        "parameters": [
          {
            "name": "deviceId",
            "required": true,
            "in": "query",
            "description": "معرف الجهاز الفريد للزائر",
            "schema": {
              "example": "device_123456789",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد مفضلات الزائر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "_id": {
                        "type": "string",
                        "example": "65af1c91f2a7f20012d44444",
                        "description": "معرف المفضلة"
                      },
                      "productId": {
                        "type": "string",
                        "example": "65af1c91f2a7f20012d39999",
                        "description": "معرف المنتج"
                      },
                      "note": {
                        "type": "string",
                        "example": "إضافة لمقارنة الأسعار لاحقاً",
                        "description": "ملاحظة الزائر"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-02-01T12:30:00.000Z",
                        "description": "تاريخ الإضافة"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-02-02T09:41:12.000Z",
                        "description": "آخر تحديث"
                      }
                    }
                  },
                  "example": [
                    {
                      "_id": "65af1c91f2a7f20012d44444",
                      "productId": "65af1c91f2a7f20012d39999",
                      "note": "إضافة لمقارنة الأسعار لاحقاً",
                      "createdAt": "2025-02-01T12:30:00.000Z",
                      "updatedAt": "2025-02-02T09:41:12.000Z"
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "مفضلات-الزوار"
        ]
      },
      "post": {
        "operationId": "addFavorite",
        "summary": "إضافة منتج لمفضلات الزائر",
        "description": "إضافة منتج إلى قائمة المفضلات للزائر غير المسجل",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GuestAddFavoriteDto"
              },
              "examples": {
                "default": {
                  "summary": "إضافة منتج كزائر",
                  "value": {
                    "deviceId": "device_123456789",
                    "productId": "65af1c91f2a7f20012d39999"
                  }
                },
                "withNote": {
                  "summary": "إضافة مع ملاحظة",
                  "value": {
                    "deviceId": "device_123456789",
                    "productId": "65af1c91f2a7f20012d39999",
                    "note": "أحتاج هذا المقاس"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إضافة المنتج لمفضلات الزائر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "_id": {
                      "type": "string",
                      "example": "65af1c91f2a7f20012d44444",
                      "description": "معرف المفضلة الجديدة"
                    },
                    "deviceId": {
                      "type": "string",
                      "example": "device_123456789",
                      "description": "معرف جهاز الزائر"
                    },
                    "productId": {
                      "type": "string",
                      "example": "65af1c91f2a7f20012d39999",
                      "description": "معرف المنتج"
                    },
                    "note": {
                      "type": "string",
                      "example": "منتج رائع!",
                      "description": "ملاحظة الزائر"
                    },
                    "isSynced": {
                      "type": "boolean",
                      "example": false,
                      "description": "هل تمت مزامنة العنصر مع حساب مستخدم"
                    }
                  },
                  "example": {
                    "_id": "65af1c91f2a7f20012d44444",
                    "deviceId": "device_123456789",
                    "productId": "65af1c91f2a7f20012d39999",
                    "note": "منتج رائع!",
                    "isSynced": false
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          }
        },
        "tags": [
          "مفضلات-الزوار"
        ]
      },
      "delete": {
        "operationId": "removeFavorite",
        "summary": "إزالة منتج من مفضلات الزائر",
        "description": "إزالة منتج من قائمة المفضلات للزائر غير المسجل",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GuestRemoveFavoriteDto"
              },
              "examples": {
                "default": {
                  "summary": "إزالة منتج لزائر",
                  "value": {
                    "deviceId": "device_123456789",
                    "productId": "65af1c91f2a7f20012d39999"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إزالة المنتج من مفضلات الزائر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "deleted": {
                      "type": "boolean",
                      "example": true,
                      "description": "هل تم حذف المفضلة بنجاح"
                    },
                    "removed": {
                      "type": "number",
                      "example": 1,
                      "description": "تم استخدامه للإشارة إلى عدد العناصر التي تمت إزالتها"
                    }
                  },
                  "example": {
                    "deleted": true,
                    "removed": 1
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          }
        },
        "tags": [
          "مفضلات-الزوار"
        ]
      }
    },
    "/api/v1/favorites/guest/clear": {
      "delete": {
        "operationId": "clearFavorites",
        "summary": "حذف جميع مفضلات الزائر",
        "description": "حذف جميع المنتجات من قائمة المفضلات للزائر غير المسجل",
        "parameters": [
          {
            "name": "deviceId",
            "required": true,
            "in": "query",
            "description": "معرف الجهاز الفريد للزائر",
            "schema": {
              "example": "device_123456789",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف جميع مفضلات الزائر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "cleared": {
                      "type": "number",
                      "example": 10,
                      "description": "عدد العناصر التي تم حذفها"
                    }
                  },
                  "example": {
                    "cleared": 10
                  }
                }
              }
            }
          }
        },
        "tags": [
          "مفضلات-الزوار"
        ]
      }
    },
    "/api/v1/favorites/guest/count": {
      "get": {
        "operationId": "getCount",
        "summary": "الحصول على عدد مفضلات الزائر",
        "description": "استرداد عدد المنتجات في قائمة المفضلات للزائر غير المسجل",
        "parameters": [
          {
            "name": "deviceId",
            "required": true,
            "in": "query",
            "description": "معرف الجهاز الفريد للزائر",
            "schema": {
              "example": "device_123456789",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد عدد مفضلات الزائر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "number",
                      "example": 5,
                      "description": "عدد المنتجات في المفضلة"
                    }
                  },
                  "example": {
                    "count": 5
                  }
                }
              }
            }
          }
        },
        "tags": [
          "مفضلات-الزوار"
        ]
      }
    },
    "/api/v1/admin/favorites/stats": {
      "get": {
        "operationId": "getStats",
        "summary": "الحصول على إحصائيات المفضلات",
        "description": "استرداد إحصائيات شاملة حول استخدام المفضلات في النظام",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد إحصائيات المفضلات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalUsers": {
                          "type": "number",
                          "example": 450,
                          "description": "عدد المستخدمين الذين لديهم عناصر مفضلة"
                        },
                        "totalGuests": {
                          "type": "number",
                          "example": 320,
                          "description": "عدد أجهزة الزوار التي لديها مفضلات"
                        },
                        "totalSynced": {
                          "type": "number",
                          "example": 210,
                          "description": "عدد العناصر التي تمت مزامنتها بنجاح من الزوار إلى المستخدمين"
                        },
                        "total": {
                          "type": "number",
                          "example": 770,
                          "description": "إجمالي عناصر المفضلة النشطة (مستخدمين + زوار)"
                        }
                      }
                    }
                  },
                  "example": {
                    "data": {
                      "totalUsers": 450,
                      "totalGuests": 320,
                      "totalSynced": 210,
                      "total": 770
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذه البيانات"
          }
        },
        "tags": [
          "إدارة-المفضلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/favorites/most-favorited": {
      "get": {
        "operationId": "getMostFavorited",
        "summary": "المنتجات الأكثر إضافة للمفضلة",
        "description": "استرداد قائمة بالمنتجات الأكثر إضافة للمفضلة مرتبة تنازلياً",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد المنتجات المراد عرضها",
            "schema": {
              "example": 10,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد المنتجات الأكثر تفضيلاً بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "productId": {
                        "type": "string",
                        "example": "65af1c91f2a7f20012d39999",
                        "description": "معرف المنتج"
                      },
                      "count": {
                        "type": "number",
                        "example": 45,
                        "description": "عدد مرات الإضافة للمفضلة"
                      },
                      "product": {
                        "type": "object",
                        "description": "البيانات الأساسية للمنتج (Populated)",
                        "properties": {
                          "name": {
                            "type": "string",
                            "example": "هاتف ذكي سامسونج S25",
                            "description": "اسم المنتج"
                          },
                          "slug": {
                            "type": "string",
                            "example": "samsung-s25",
                            "description": "المعرف النصي للمنتج"
                          }
                        }
                      }
                    }
                  },
                  "example": [
                    {
                      "productId": "65af1c91f2a7f20012d39999",
                      "count": 45,
                      "product": {
                        "name": "هاتف ذكي سامسونج S25",
                        "slug": "samsung-s25"
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-المفضلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/favorites/product/{productId}/count": {
      "get": {
        "operationId": "getProductCount",
        "summary": "عدد المفضلات لمنتج معين",
        "description": "استرداد عدد المرات التي تم فيها إضافة منتج محدد للمفضلة",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "description": "معرف المنتج",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد عدد المفضلات للمنتج بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "number",
                      "example": 45,
                      "description": "عدد مرات إضافة المنتج للمفضلة"
                    }
                  },
                  "example": {
                    "count": 45
                  }
                }
              }
            }
          },
          "404": {
            "description": "المنتج غير موجود"
          }
        },
        "tags": [
          "إدارة-المفضلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/favorites/user/{userId}/count": {
      "get": {
        "operationId": "getUserCount",
        "summary": "عدد المفضلات لمستخدم معين",
        "description": "استرداد عدد المنتجات في قائمة المفضلات لمستخدم محدد",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "description": "معرف المستخدم",
            "schema": {
              "example": "507f1f77bcf86cd799439012",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد عدد المفضلات للمستخدم بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "number",
                      "example": 15,
                      "description": "عدد المنتجات في مفضلات المستخدم"
                    }
                  },
                  "example": {
                    "count": 15
                  }
                }
              }
            }
          },
          "404": {
            "description": "المستخدم غير موجود"
          }
        },
        "tags": [
          "إدارة-المفضلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products": {
      "post": {
        "operationId": "createProduct",
        "summary": "إنشاء منتج جديد",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProductDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Product created successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "listProducts",
        "summary": "قائمة المنتجات مع التصفية",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Products list retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/{id}": {
      "get": {
        "operationId": "getProduct",
        "summary": "الحصول على منتج بالمعرف",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product retrieved successfully"
          },
          "404": {
            "description": "Product not found"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateProduct",
        "summary": "تحديث المنتج",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProductDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product updated successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteProduct",
        "summary": "حذف المنتج (حذف مؤقت)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product deleted successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/{id}/restore": {
      "post": {
        "operationId": "restoreProduct",
        "summary": "استعادة المنتج المحذوف",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product restored successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/stats/summary": {
      "get": {
        "operationId": "getStats",
        "summary": "الحصول على إحصائيات المنتجات",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Statistics retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/{productId}/variants": {
      "post": {
        "operationId": "createVariant",
        "summary": "إنشاء متغير للمنتج",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateVariantDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Variant created successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "getVariants",
        "summary": "الحصول على متغيرات المنتج",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "includeDeleted",
            "required": true,
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Variants retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/{productId}/generate-variants": {
      "post": {
        "operationId": "generateVariants",
        "summary": "توليد المتغيرات تلقائياً",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateVariantsDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Variants generated successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/variants/{id}": {
      "get": {
        "operationId": "getVariant",
        "summary": "الحصول على متغير بالمعرف",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Variant retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateVariant",
        "summary": "تحديث المتغير",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateVariantDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Variant updated successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteVariant",
        "summary": "حذف المتغير (حذف مؤقت)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Variant deleted successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/variants/{id}/price": {
      "get": {
        "operationId": "getVariantPrice",
        "summary": "الحصول على سعر المتغير بعملة محددة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Price retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/{id}/prices": {
      "get": {
        "operationId": "getProductPrices",
        "summary": "الحصول على جميع أسعار متغيرات المنتج",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Prices retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/{id}/price-range": {
      "get": {
        "operationId": "getPriceRange",
        "summary": "الحصول على نطاق أسعار المنتج",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Price range retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/variants/{id}/stock": {
      "post": {
        "operationId": "updateStock",
        "summary": "تحديث مخزون المتغير",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Stock updated successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/variants/{id}/availability": {
      "get": {
        "operationId": "checkAvailability",
        "summary": "التحقق من توفر المتغير",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "quantity",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Availability checked successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/inventory/low-stock": {
      "get": {
        "operationId": "getLowStock",
        "summary": "الحصول على المتغيرات ذات المخزون المنخفض",
        "parameters": [
          {
            "name": "threshold",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Low stock variants retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/inventory/out-of-stock": {
      "get": {
        "operationId": "getOutOfStock",
        "summary": "الحصول على المتغيرات غير المتوفرة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Out of stock variants retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/inventory/summary": {
      "get": {
        "operationId": "getInventorySummary",
        "summary": "الحصول على ملخص المخزون",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Inventory summary retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/{id}/related": {
      "get": {
        "operationId": "getRelatedProducts",
        "summary": "الحصول على المنتجات الشبيهة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Related products retrieved successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "put": {
        "operationId": "updateRelatedProducts",
        "summary": "تحديث المنتجات الشبيهة (استبدال كامل)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Related products updated successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/products/{id}/related/{relatedId}": {
      "post": {
        "operationId": "addRelatedProduct",
        "summary": "إضافة منتج شبيه",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "relatedId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Related product added successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "removeRelatedProduct",
        "summary": "إزالة منتج شبيه",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "relatedId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Related product removed successfully"
          }
        },
        "tags": [
          "إدارة-المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/products": {
      "get": {
        "operationId": "listProducts",
        "summary": "الحصول على قائمة المنتجات",
        "description": "استرداد قائمة منتجات مع التصفح والترقيم مع إمكانية التصفية الاختيارية",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number (default: 1)",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Items per page (default: 20)",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Search term for product name or description",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "categoryId",
            "required": false,
            "in": "query",
            "description": "Filter by category ID",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "brandId",
            "required": false,
            "in": "query",
            "description": "Filter by brand ID",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "isFeatured",
            "required": false,
            "in": "query",
            "description": "Filter featured products",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "isNew",
            "required": false,
            "in": "query",
            "description": "Filter new products",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Products list retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "507f1f77bcf86cd799439011"
                          },
                          "name": {
                            "type": "string",
                            "example": "Solar Panel 300W"
                          },
                          "description": {
                            "type": "string",
                            "example": "High efficiency solar panel"
                          },
                          "category": {
                            "type": "object"
                          },
                          "brand": {
                            "type": "object"
                          },
                          "isFeatured": {
                            "type": "boolean",
                            "example": true
                          },
                          "isNew": {
                            "type": "boolean",
                            "example": false
                          }
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "number",
                          "example": 1
                        },
                        "limit": {
                          "type": "number",
                          "example": 20
                        },
                        "total": {
                          "type": "number",
                          "example": 150
                        },
                        "totalPages": {
                          "type": "number",
                          "example": 8
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "المنتجات"
        ]
      }
    },
    "/api/v1/products/{id}": {
      "get": {
        "operationId": "getProduct",
        "summary": "Get product details",
        "description": "Retrieves detailed information about a specific product",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product ID",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          },
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product details retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "product": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "example": "507f1f77bcf86cd799439011"
                            },
                            "name": {
                              "type": "string",
                              "example": "Solar Panel 300W"
                            },
                            "description": {
                              "type": "string",
                              "example": "High efficiency solar panel"
                            },
                            "category": {
                              "type": "object"
                            },
                            "brand": {
                              "type": "object"
                            },
                            "isFeatured": {
                              "type": "boolean",
                              "example": true
                            },
                            "isNew": {
                              "type": "boolean",
                              "example": false
                            },
                            "viewsCount": {
                              "type": "number",
                              "example": 150
                            }
                          }
                        },
                        "variants": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "basePriceUSD": {
                                "type": "number"
                              },
                              "stock": {
                                "type": "number"
                              },
                              "isAvailable": {
                                "type": "boolean"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Product not found"
          }
        },
        "tags": [
          "المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/products/slug/{slug}": {
      "get": {
        "operationId": "getProductBySlug",
        "summary": "Get product by slug",
        "description": "Retrieves product information using URL slug",
        "parameters": [
          {
            "name": "slug",
            "required": true,
            "in": "path",
            "description": "Product slug",
            "schema": {
              "example": "solar-panel-300w",
              "type": "string"
            }
          },
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/products/featured/list": {
      "get": {
        "operationId": "getFeatured",
        "summary": "الحصول على المنتجات المميزة",
        "parameters": [
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Featured products retrieved successfully"
          }
        },
        "tags": [
          "المنتجات"
        ]
      }
    },
    "/api/v1/products/new/list": {
      "get": {
        "operationId": "getNew",
        "summary": "الحصول على المنتجات الجديدة",
        "parameters": [
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "New products retrieved successfully"
          }
        },
        "tags": [
          "المنتجات"
        ]
      }
    },
    "/api/v1/products/{id}/variants": {
      "get": {
        "operationId": "getVariants",
        "summary": "الحصول على متغيرات المنتج",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Variants retrieved successfully"
          }
        },
        "tags": [
          "المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/products/variants/{id}/price": {
      "get": {
        "operationId": "getVariantPrice",
        "summary": "الحصول على سعر المتغير",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Price retrieved successfully"
          }
        },
        "tags": [
          "المنتجات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/products/variants/{id}/availability": {
      "get": {
        "operationId": "checkVariantAvailability",
        "summary": "التحقق من توفر المتغير",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "quantity",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Availability checked successfully"
          }
        },
        "tags": [
          "المنتجات"
        ]
      }
    },
    "/api/v1/products/{id}/price-range": {
      "get": {
        "operationId": "getPriceRange",
        "summary": "الحصول على نطاق أسعار المنتج",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currency",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Price range retrieved successfully"
          }
        },
        "tags": [
          "المنتجات"
        ]
      }
    },
    "/api/v1/products/stats/count": {
      "get": {
        "operationId": "getProductsCount",
        "summary": "الحصول على عدد المنتجات",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Count retrieved successfully"
          }
        },
        "tags": [
          "المنتجات"
        ]
      }
    },
    "/api/v1/products/{id}/related": {
      "get": {
        "operationId": "getRelatedProducts",
        "summary": "الحصول على المنتجات الشبيهة",
        "description": "استرداد قائمة المنتجات الشبيهة لمنتج معين لعرضها في صفحة تفاصيل المنتج",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product ID",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Maximum number of related products to return (default: 10)",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Related products retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "507f1f77bcf86cd799439011"
                          },
                          "name": {
                            "type": "string",
                            "example": "Solar Panel 400W"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Solar Panel 400W"
                          },
                          "description": {
                            "type": "string",
                            "example": "High efficiency solar panel"
                          },
                          "category": {
                            "type": "object"
                          },
                          "brand": {
                            "type": "object"
                          },
                          "mainImageId": {
                            "type": "object"
                          },
                          "isFeatured": {
                            "type": "boolean",
                            "example": true
                          },
                          "isNew": {
                            "type": "boolean",
                            "example": false
                          }
                        }
                      }
                    },
                    "count": {
                      "type": "number",
                      "example": 5
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Product not found"
          }
        },
        "tags": [
          "المنتجات"
        ]
      }
    },
    "/api/v1/admin/attributes": {
      "post": {
        "operationId": "createAttribute",
        "summary": "إنشاء سمة جديدة",
        "description": "إنشاء سمة جديدة في النظام. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "بيانات السمة الجديدة",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAttributeDto"
              },
              "examples": {
                "color": {
                  "summary": "إنشاء سمة اللون",
                  "value": {
                    "name": "اللون",
                    "nameEn": "Color",
                    "type": "select",
                    "description": "لون المنتج",
                    "order": 1,
                    "isFilterable": true,
                    "isRequired": false,
                    "showInFilters": true,
                    "groupId": "64a1b2c3d4e5f6789abcdef1"
                  }
                },
                "size": {
                  "summary": "إنشاء سمة المقاس",
                  "value": {
                    "name": "المقاس",
                    "nameEn": "Size",
                    "type": "select",
                    "description": "مقاس المنتج",
                    "order": 2,
                    "isFilterable": true,
                    "isRequired": true,
                    "showInFilters": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء السمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "اللون"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Color"
                        },
                        "slug": {
                          "type": "string",
                          "example": "color"
                        },
                        "type": {
                          "type": "string",
                          "example": "select"
                        },
                        "description": {
                          "type": "string",
                          "example": "لون المنتج"
                        },
                        "order": {
                          "type": "number",
                          "example": 1
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "isFilterable": {
                          "type": "boolean",
                          "example": true
                        },
                        "isRequired": {
                          "type": "boolean",
                          "example": false
                        },
                        "showInFilters": {
                          "type": "boolean",
                          "example": true
                        },
                        "groupId": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef1"
                        },
                        "usageCount": {
                          "type": "number",
                          "example": 0
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "Forbidden"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "listAttributes",
        "summary": "الحصول على قائمة السمات",
        "description": "الحصول على قائمة بجميع السمات مع إمكانية التصفية والبحث.",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [
          {
            "name": "includeDeleted",
            "required": false,
            "in": "query",
            "description": "تضمين السمات المحذوفة",
            "schema": {
              "example": false
            }
          },
          {
            "name": "groupId",
            "required": false,
            "in": "query",
            "description": "تصفية السمات حسب المجموعة",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef1"
            }
          },
          {
            "name": "isFilterable",
            "required": false,
            "in": "query",
            "description": "تصفية السمات القابلة للفلترة",
            "schema": {
              "example": true
            }
          },
          {
            "name": "isActive",
            "required": false,
            "in": "query",
            "description": "تصفية السمات النشطة",
            "schema": {
              "example": true
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "البحث في أسماء السمات",
            "schema": {
              "example": "لون"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على قائمة السمات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef0"
                          },
                          "name": {
                            "type": "string",
                            "example": "اللون"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Color"
                          },
                          "slug": {
                            "type": "string",
                            "example": "color"
                          },
                          "type": {
                            "type": "string",
                            "example": "select"
                          },
                          "description": {
                            "type": "string",
                            "example": "لون المنتج"
                          },
                          "order": {
                            "type": "number",
                            "example": 1
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true
                          },
                          "isFilterable": {
                            "type": "boolean",
                            "example": true
                          },
                          "isRequired": {
                            "type": "boolean",
                            "example": false
                          },
                          "showInFilters": {
                            "type": "boolean",
                            "example": true
                          },
                          "groupId": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef1"
                          },
                          "usageCount": {
                            "type": "number",
                            "example": 25
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/attributes/{id}": {
      "get": {
        "operationId": "getAttribute",
        "summary": "الحصول على سمة واحدة",
        "description": "الحصول على تفاصيل سمة محددة مع قيمها.",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف السمة",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على السمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "اللون"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Color"
                        },
                        "slug": {
                          "type": "string",
                          "example": "color"
                        },
                        "type": {
                          "type": "string",
                          "example": "select"
                        },
                        "description": {
                          "type": "string",
                          "example": "لون المنتج"
                        },
                        "order": {
                          "type": "number",
                          "example": 1
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "isFilterable": {
                          "type": "boolean",
                          "example": true
                        },
                        "isRequired": {
                          "type": "boolean",
                          "example": false
                        },
                        "showInFilters": {
                          "type": "boolean",
                          "example": true
                        },
                        "groupId": {
                          "type": "object",
                          "example": {
                            "_id": "64a1b2c3d4e5f6789abcdef1",
                            "name": "الخصائص الفيزيائية"
                          }
                        },
                        "usageCount": {
                          "type": "number",
                          "example": 25
                        },
                        "values": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "64a1b2c3d4e5f6789abcdef2"
                              },
                              "value": {
                                "type": "string",
                                "example": "أحمر"
                              },
                              "valueEn": {
                                "type": "string",
                                "example": "Red"
                              },
                              "slug": {
                                "type": "string",
                                "example": "red"
                              },
                              "hexCode": {
                                "type": "string",
                                "example": "#FF0000"
                              }
                            }
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "السمة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateAttribute",
        "summary": "تحديث سمة",
        "description": "تحديث بيانات سمة موجودة.",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف السمة",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "البيانات المحدثة للسمة",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAttributeDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث السمة بنجاح"
          },
          "404": {
            "description": "السمة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteAttribute",
        "summary": "حذف سمة",
        "description": "حذف سمة (حذف منطقي - Soft Delete). لا يمكن حذف السمات المستخدمة في المنتجات.",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف السمة",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف السمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "deleted": {
                          "type": "boolean",
                          "example": true
                        },
                        "deletedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "السمة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/attributes/{id}/restore": {
      "post": {
        "operationId": "restoreAttribute",
        "summary": "استعادة سمة محذوفة",
        "description": "استعادة سمة تم حذفها مسبقاً (حذف منطقي).",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف السمة المحذوفة",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استعادة السمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "restored": {
                          "type": "boolean",
                          "example": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "السمة غير موجودة أو غير محذوفة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/attributes/{attributeId}/values": {
      "post": {
        "operationId": "createValue",
        "summary": "إضافة قيمة جديدة للسمة",
        "description": "إضافة قيمة جديدة إلى سمة موجودة.",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [
          {
            "name": "attributeId",
            "required": true,
            "in": "path",
            "description": "معرف السمة",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "بيانات القيمة الجديدة",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAttributeValueDto"
              },
              "examples": {
                "color": {
                  "summary": "إضافة لون أحمر",
                  "value": {
                    "value": "أحمر",
                    "valueEn": "Red",
                    "hexCode": "#FF0000",
                    "order": 1,
                    "description": "اللون الأحمر"
                  }
                },
                "size": {
                  "summary": "إضافة مقاس كبير",
                  "value": {
                    "value": "كبير",
                    "valueEn": "Large",
                    "order": 3,
                    "description": "المقاس الكبير"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إضافة القيمة بنجاح"
          },
          "404": {
            "description": "السمة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "listValues",
        "summary": "الحصول على قيم السمة",
        "description": "الحصول على جميع قيم سمة محددة.",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [
          {
            "name": "attributeId",
            "required": true,
            "in": "path",
            "description": "معرف السمة",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على قيم السمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef2"
                          },
                          "value": {
                            "type": "string",
                            "example": "أحمر"
                          },
                          "valueEn": {
                            "type": "string",
                            "example": "Red"
                          },
                          "slug": {
                            "type": "string",
                            "example": "red"
                          },
                          "hexCode": {
                            "type": "string",
                            "example": "#FF0000"
                          },
                          "imageUrl": {
                            "type": "string",
                            "example": "https://example.com/red.jpg"
                          },
                          "description": {
                            "type": "string",
                            "example": "اللون الأحمر"
                          },
                          "order": {
                            "type": "number",
                            "example": 1
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true
                          },
                          "usageCount": {
                            "type": "number",
                            "example": 10
                          },
                          "attributeId": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef0"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/attributes/values/{id}": {
      "patch": {
        "operationId": "updateValue",
        "summary": "تحديث قيمة السمة",
        "description": "تحديث بيانات قيمة سمة موجودة.",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف قيمة السمة",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef2",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "البيانات المحدثة للقيمة",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAttributeValueDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث القيمة بنجاح"
          },
          "404": {
            "description": "قيمة السمة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteValue",
        "summary": "حذف قيمة السمة",
        "description": "حذف قيمة سمة (حذف منطقي). لا يمكن حذف القيم المستخدمة في المنتجات.",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف قيمة السمة",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef2",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف القيمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "deleted": {
                          "type": "boolean",
                          "example": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "قيمة السمة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/attributes/stats/summary": {
      "get": {
        "operationId": "getStats",
        "summary": "إحصائيات السمات",
        "description": "الحصول على إحصائيات شاملة عن السمات في النظام.",
        "tags": [
          "إدارة-السمات"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "number",
                          "example": 50,
                          "description": "إجمالي عدد السمات"
                        },
                        "active": {
                          "type": "number",
                          "example": 45,
                          "description": "عدد السمات النشطة"
                        },
                        "filterable": {
                          "type": "number",
                          "example": 30,
                          "description": "عدد السمات القابلة للفلترة"
                        },
                        "byType": {
                          "type": "object",
                          "properties": {
                            "select": {
                              "type": "number",
                              "example": 25
                            },
                            "multiselect": {
                              "type": "number",
                              "example": 10
                            },
                            "text": {
                              "type": "number",
                              "example": 8
                            },
                            "number": {
                              "type": "number",
                              "example": 5
                            },
                            "boolean": {
                              "type": "number",
                              "example": 2
                            }
                          },
                          "description": "توزيع السمات حسب النوع"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/attributes": {
      "get": {
        "operationId": "listAttributes",
        "summary": "الحصول على قائمة السمات النشطة",
        "description": "يُرجع قائمة بجميع السمات النشطة المتاحة في النظام. النتائج مخزنة مؤقتاً لمدة 30 دقيقة.",
        "tags": [
          "السمات-العامة"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على قائمة السمات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef0"
                          },
                          "name": {
                            "type": "string",
                            "example": "اللون"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Color"
                          },
                          "slug": {
                            "type": "string",
                            "example": "color"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "select",
                              "multiselect",
                              "text",
                              "number",
                              "boolean",
                              "color"
                            ],
                            "example": "select"
                          },
                          "description": {
                            "type": "string",
                            "example": "لون المنتج"
                          },
                          "order": {
                            "type": "number",
                            "example": 1
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true
                          },
                          "isFilterable": {
                            "type": "boolean",
                            "example": true
                          },
                          "isRequired": {
                            "type": "boolean",
                            "example": false
                          },
                          "showInFilters": {
                            "type": "boolean",
                            "example": true
                          },
                          "groupId": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef1"
                          },
                          "usageCount": {
                            "type": "number",
                            "example": 25
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/attributes/filterable": {
      "get": {
        "operationId": "getFilterableAttributes",
        "summary": "الحصول على السمات القابلة للفلترة",
        "description": "يُرجع قائمة بالسمات النشطة والقابلة للفلترة مع جميع قيمها. مفيد لبناء واجهات الفلترة في المتاجر الإلكترونية.",
        "tags": [
          "السمات-العامة"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على السمات القابلة للفلترة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef0"
                          },
                          "name": {
                            "type": "string",
                            "example": "اللون"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Color"
                          },
                          "slug": {
                            "type": "string",
                            "example": "color"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "select",
                              "multiselect",
                              "text",
                              "number",
                              "boolean",
                              "color"
                            ],
                            "example": "select"
                          },
                          "description": {
                            "type": "string",
                            "example": "لون المنتج"
                          },
                          "order": {
                            "type": "number",
                            "example": 1
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true
                          },
                          "isFilterable": {
                            "type": "boolean",
                            "example": true
                          },
                          "isRequired": {
                            "type": "boolean",
                            "example": false
                          },
                          "showInFilters": {
                            "type": "boolean",
                            "example": true
                          },
                          "groupId": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef1"
                          },
                          "usageCount": {
                            "type": "number",
                            "example": 25
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "values": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "_id": {
                                  "type": "string",
                                  "example": "64a1b2c3d4e5f6789abcdef2"
                                },
                                "value": {
                                  "type": "string",
                                  "example": "أحمر"
                                },
                                "valueEn": {
                                  "type": "string",
                                  "example": "Red"
                                },
                                "slug": {
                                  "type": "string",
                                  "example": "red"
                                },
                                "hexCode": {
                                  "type": "string",
                                  "example": "#FF0000"
                                },
                                "imageUrl": {
                                  "type": "string",
                                  "example": "https://example.com/red-color.jpg"
                                },
                                "imageId": {
                                  "type": "string",
                                  "example": "img_123"
                                },
                                "description": {
                                  "type": "string",
                                  "example": "اللون الأحمر"
                                },
                                "order": {
                                  "type": "number",
                                  "example": 1
                                },
                                "isActive": {
                                  "type": "boolean",
                                  "example": true
                                },
                                "usageCount": {
                                  "type": "number",
                                  "example": 10
                                },
                                "attributeId": {
                                  "type": "string",
                                  "example": "64a1b2c3d4e5f6789abcdef0"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date-time"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date-time"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/attributes/{id}": {
      "get": {
        "operationId": "getAttribute",
        "summary": "الحصول على سمة واحدة مع قيمها",
        "description": "يُرجع تفاصيل سمة محددة مع جميع قيمها المتاحة. مفيد لعرض تفاصيل سمة معينة.",
        "tags": [
          "السمات-العامة"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف السمة (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على السمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "اللون"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Color"
                        },
                        "slug": {
                          "type": "string",
                          "example": "color"
                        },
                        "type": {
                          "type": "string",
                          "enum": [
                            "select",
                            "multiselect",
                            "text",
                            "number",
                            "boolean",
                            "color"
                          ],
                          "example": "select"
                        },
                        "description": {
                          "type": "string",
                          "example": "لون المنتج"
                        },
                        "order": {
                          "type": "number",
                          "example": 1
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "isFilterable": {
                          "type": "boolean",
                          "example": true
                        },
                        "isRequired": {
                          "type": "boolean",
                          "example": false
                        },
                        "showInFilters": {
                          "type": "boolean",
                          "example": true
                        },
                        "groupId": {
                          "type": "object",
                          "properties": {
                            "_id": {
                              "type": "string",
                              "example": "64a1b2c3d4e5f6789abcdef1"
                            },
                            "name": {
                              "type": "string",
                              "example": "الخصائص الفيزيائية"
                            },
                            "nameEn": {
                              "type": "string",
                              "example": "Physical Properties"
                            }
                          }
                        },
                        "usageCount": {
                          "type": "number",
                          "example": 25
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "values": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "64a1b2c3d4e5f6789abcdef2"
                              },
                              "value": {
                                "type": "string",
                                "example": "أحمر"
                              },
                              "valueEn": {
                                "type": "string",
                                "example": "Red"
                              },
                              "slug": {
                                "type": "string",
                                "example": "red"
                              },
                              "hexCode": {
                                "type": "string",
                                "example": "#FF0000"
                              },
                              "imageUrl": {
                                "type": "string",
                                "example": "https://example.com/red-color.jpg"
                              },
                              "imageId": {
                                "type": "string",
                                "example": "img_123"
                              },
                              "description": {
                                "type": "string",
                                "example": "اللون الأحمر"
                              },
                              "order": {
                                "type": "number",
                                "example": 1
                              },
                              "isActive": {
                                "type": "boolean",
                                "example": true
                              },
                              "usageCount": {
                                "type": "number",
                                "example": 10
                              },
                              "attributeId": {
                                "type": "string",
                                "example": "64a1b2c3d4e5f6789abcdef0"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "السمة غير موجودة",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "السمة غير موجودة"
                    },
                    "error": {
                      "type": "string",
                      "example": "Not Found"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/categories": {
      "post": {
        "operationId": "createCategory",
        "summary": "إنشاء فئة جديدة",
        "description": "إنشاء فئة جديدة في النظام. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-الفئات"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "بيانات الفئة الجديدة",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCategoryDto"
              },
              "examples": {
                "electronics": {
                  "summary": "إنشاء فئة الإلكترونيات",
                  "value": {
                    "name": "الإلكترونيات",
                    "nameEn": "Electronics",
                    "description": "جميع الأجهزة الإلكترونية والكهربائية",
                    "parentId": null,
                    "isActive": true,
                    "isFeatured": true,
                    "order": 1
                  }
                },
                "phones": {
                  "summary": "إنشاء فئة الهواتف",
                  "value": {
                    "name": "الهواتف",
                    "nameEn": "Phones",
                    "description": "الهواتف الذكية والملحقات",
                    "parentId": "parent_category_id",
                    "isActive": true,
                    "isFeatured": false,
                    "order": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء الفئة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "الإلكترونيات"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Electronics"
                        },
                        "slug": {
                          "type": "string",
                          "example": "electronics"
                        },
                        "description": {
                          "type": "string",
                          "example": "جميع الأجهزة الإلكترونية"
                        },
                        "parentId": {
                          "type": "string",
                          "example": null
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "isFeatured": {
                          "type": "boolean",
                          "example": true
                        },
                        "order": {
                          "type": "number",
                          "example": 1
                        },
                        "productCount": {
                          "type": "number",
                          "example": 0
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "listCategories",
        "summary": "الحصول على قائمة الفئات",
        "description": "الحصول على قائمة بجميع الفئات مع إمكانية التصفية والبحث. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-الفئات"
        ],
        "parameters": [
          {
            "name": "includeDeleted",
            "required": false,
            "in": "query",
            "description": "تضمين الفئات المحذوفة",
            "schema": {
              "example": false
            }
          },
          {
            "name": "isFeatured",
            "required": false,
            "in": "query",
            "description": "تصفية الفئات المميزة",
            "schema": {
              "example": true
            }
          },
          {
            "name": "isActive",
            "required": false,
            "in": "query",
            "description": "تصفية الفئات النشطة",
            "schema": {
              "example": true
            }
          },
          {
            "name": "parentId",
            "required": false,
            "in": "query",
            "description": "تصفية حسب الفئة الأب",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "البحث في أسماء الفئات",
            "schema": {
              "example": "إلكترونيات"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على قائمة الفئات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef0"
                          },
                          "name": {
                            "type": "string",
                            "example": "الإلكترونيات"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Electronics"
                          },
                          "slug": {
                            "type": "string",
                            "example": "electronics"
                          },
                          "description": {
                            "type": "string",
                            "example": "جميع الأجهزة الإلكترونية"
                          },
                          "parentId": {
                            "type": "string",
                            "example": null
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true
                          },
                          "isFeatured": {
                            "type": "boolean",
                            "example": true
                          },
                          "order": {
                            "type": "number",
                            "example": 1
                          },
                          "productCount": {
                            "type": "number",
                            "example": 25
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/categories/tree": {
      "get": {
        "operationId": "getCategoryTree",
        "summary": "الحصول على شجرة الفئات الكاملة",
        "description": "الحصول على شجرة الفئات الكاملة مع جميع المستويات والعلاقات الهرمية. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-الفئات"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على شجرة الفئات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef0"
                          },
                          "name": {
                            "type": "string",
                            "example": "الإلكترونيات"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Electronics"
                          },
                          "slug": {
                            "type": "string",
                            "example": "electronics"
                          },
                          "description": {
                            "type": "string",
                            "example": "جميع الأجهزة الإلكترونية"
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true
                          },
                          "isFeatured": {
                            "type": "boolean",
                            "example": true
                          },
                          "order": {
                            "type": "number",
                            "example": 1
                          },
                          "productCount": {
                            "type": "number",
                            "example": 25
                          },
                          "children": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "_id": {
                                  "type": "string",
                                  "example": "64a1b2c3d4e5f6789abcdef1"
                                },
                                "name": {
                                  "type": "string",
                                  "example": "الهواتف"
                                },
                                "nameEn": {
                                  "type": "string",
                                  "example": "Phones"
                                },
                                "slug": {
                                  "type": "string",
                                  "example": "phones"
                                },
                                "productCount": {
                                  "type": "number",
                                  "example": 15
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/categories/{id}": {
      "get": {
        "operationId": "getCategory",
        "summary": "الحصول على فئة واحدة",
        "description": "الحصول على تفاصيل فئة محددة مع جميع المعلومات والإحصائيات. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-الفئات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الفئة (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على الفئة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "الإلكترونيات"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Electronics"
                        },
                        "slug": {
                          "type": "string",
                          "example": "electronics"
                        },
                        "description": {
                          "type": "string",
                          "example": "جميع الأجهزة الإلكترونية"
                        },
                        "parentId": {
                          "type": "string",
                          "example": null
                        },
                        "parent": {
                          "type": "object",
                          "properties": {
                            "_id": {
                              "type": "string",
                              "example": "parent_id"
                            },
                            "name": {
                              "type": "string",
                              "example": "الفئة الأب"
                            },
                            "nameEn": {
                              "type": "string",
                              "example": "Parent Category"
                            }
                          }
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "isFeatured": {
                          "type": "boolean",
                          "example": true
                        },
                        "order": {
                          "type": "number",
                          "example": 1
                        },
                        "productCount": {
                          "type": "number",
                          "example": 25
                        },
                        "children": {
                          "type": "array"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          },
          "404": {
            "description": "الفئة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateCategory",
        "summary": "تحديث فئة",
        "description": "تحديث بيانات فئة موجودة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-الفئات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الفئة (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "البيانات المحدثة للفئة",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCategoryDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث الفئة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "الإلكترونيات المحدثة"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Updated Electronics"
                        },
                        "slug": {
                          "type": "string",
                          "example": "updated-electronics"
                        },
                        "description": {
                          "type": "string",
                          "example": "جميع الأجهزة الإلكترونية المحدثة"
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "isFeatured": {
                          "type": "boolean",
                          "example": true
                        },
                        "order": {
                          "type": "number",
                          "example": 2
                        },
                        "productCount": {
                          "type": "number",
                          "example": 25
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          },
          "404": {
            "description": "الفئة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteCategory",
        "summary": "حذف فئة (حذف منطقي)",
        "description": "حذف فئة من النظام (حذف منطقي - Soft Delete). يمكن استعادتها لاحقاً. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-الفئات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الفئة (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف الفئة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "deleted": {
                          "type": "boolean",
                          "example": true
                        },
                        "deletedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "لا يمكن حذف فئة تحتوي على منتجات أو فئات فرعية"
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          },
          "404": {
            "description": "الفئة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/categories/{id}/restore": {
      "post": {
        "operationId": "restoreCategory",
        "summary": "استعادة فئة محذوفة",
        "description": "استعادة فئة تم حذفها مسبقاً (حذف منطقي). يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-الفئات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الفئة المحذوفة (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استعادة الفئة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "restored": {
                          "type": "boolean",
                          "example": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          },
          "404": {
            "description": "الفئة غير موجودة أو غير محذوفة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/categories/{id}/permanent": {
      "delete": {
        "operationId": "permanentDeleteCategory",
        "summary": "حذف نهائي للفئة",
        "description": "حذف فئة نهائياً من النظام. لا يمكن استعادتها. يتطلب صلاحيات Super Admin فقط.",
        "tags": [
          "إدارة-الفئات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الفئة (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف الفئة نهائياً بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "deleted": {
                          "type": "boolean",
                          "example": true
                        },
                        "message": {
                          "type": "string",
                          "example": "تم حذف الفئة نهائياً"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات Super Admin فقط"
          },
          "404": {
            "description": "الفئة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/categories/{id}/update-stats": {
      "post": {
        "operationId": "updateCategoryStats",
        "summary": "تحديث إحصائيات الفئة",
        "description": "تحديث عدد المنتجات والإحصائيات الأخرى للفئة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-الفئات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الفئة (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تحديث الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "updated": {
                          "type": "boolean",
                          "example": true
                        },
                        "productCount": {
                          "type": "number",
                          "example": 25
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          },
          "404": {
            "description": "الفئة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/categories/stats/summary": {
      "get": {
        "operationId": "getStats",
        "summary": "إحصائيات الفئات العامة",
        "description": "الحصول على إحصائيات شاملة عن الفئات في النظام. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-الفئات"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalCategories": {
                          "type": "number",
                          "example": 50
                        },
                        "activeCategories": {
                          "type": "number",
                          "example": 45
                        },
                        "featuredCategories": {
                          "type": "number",
                          "example": 10
                        },
                        "deletedCategories": {
                          "type": "number",
                          "example": 5
                        },
                        "totalProducts": {
                          "type": "number",
                          "example": 1250
                        },
                        "categoriesWithProducts": {
                          "type": "number",
                          "example": 35
                        },
                        "averageProductsPerCategory": {
                          "type": "number",
                          "example": 25.5
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/categories": {
      "get": {
        "operationId": "listCategories",
        "summary": "الحصول على قائمة الفئات النشطة",
        "description": "الحصول على قائمة بجميع الفئات النشطة مع إمكانية التصفية حسب الفئة الأب أو الفئات المميزة. النتائج مخزنة مؤقتاً لمدة 30 دقيقة.",
        "tags": [
          "الفئات-العامة"
        ],
        "parameters": [
          {
            "name": "parentId",
            "required": false,
            "in": "query",
            "description": "تصفية حسب الفئة الأب (null للفئات الجذرية)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          },
          {
            "name": "isFeatured",
            "required": false,
            "in": "query",
            "description": "تصفية الفئات المميزة فقط",
            "schema": {
              "example": true,
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على قائمة الفئات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef0"
                          },
                          "name": {
                            "type": "string",
                            "example": "الإلكترونيات"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Electronics"
                          },
                          "parentId": {
                            "type": "string",
                            "example": null
                          },
                          "image": {
                            "type": "object",
                            "nullable": true,
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "64img123abc"
                              },
                              "path": {
                                "type": "string",
                                "example": "media/category/lighting.png"
                              }
                            }
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true
                          },
                          "order": {
                            "type": "number",
                            "example": 1
                          },
                          "productsCount": {
                            "type": "number",
                            "example": 12
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/categories/tree": {
      "get": {
        "operationId": "getCategoryTree",
        "summary": "الحصول على شجرة الفئات الكاملة",
        "description": "الحصول على شجرة الفئات الكاملة مع جميع المستويات والعلاقات الهرمية. النتائج مخزنة مؤقتاً لمدة ساعة واحدة.",
        "tags": [
          "الفئات-العامة"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على شجرة الفئات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef0"
                          },
                          "name": {
                            "type": "string",
                            "example": "الإلكترونيات"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Electronics"
                          },
                          "slug": {
                            "type": "string",
                            "example": "electronics"
                          },
                          "description": {
                            "type": "string",
                            "example": "جميع الأجهزة الإلكترونية"
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true
                          },
                          "isFeatured": {
                            "type": "boolean",
                            "example": true
                          },
                          "order": {
                            "type": "number",
                            "example": 1
                          },
                          "productCount": {
                            "type": "number",
                            "example": 25
                          },
                          "children": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "_id": {
                                  "type": "string",
                                  "example": "64a1b2c3d4e5f6789abcdef1"
                                },
                                "name": {
                                  "type": "string",
                                  "example": "الهواتف"
                                },
                                "nameEn": {
                                  "type": "string",
                                  "example": "Phones"
                                },
                                "slug": {
                                  "type": "string",
                                  "example": "phones"
                                },
                                "description": {
                                  "type": "string",
                                  "example": "الهواتف الذكية والملحقات"
                                },
                                "isActive": {
                                  "type": "boolean",
                                  "example": true
                                },
                                "isFeatured": {
                                  "type": "boolean",
                                  "example": false
                                },
                                "productCount": {
                                  "type": "number",
                                  "example": 15
                                },
                                "children": {
                                  "type": "array"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/categories/{id}/products": {
      "get": {
        "operationId": "getCategoryProducts",
        "summary": "الحصول على المنتجات حسب الفئة",
        "description": "الحصول على قائمة بالمنتجات العامة (النشطة) التي تنتمي إلى فئة محددة. النتائج مخزنة مؤقتاً لمدة 5 دقائق.",
        "tags": [
          "الفئات-العامة"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الفئة (ObjectId أو Slug)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة (افتراضي: 1)",
            "schema": {
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العناصر في الصفحة (افتراضي: 20)",
            "schema": {
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "نص البحث في أسماء المنتجات",
            "schema": {
              "example": "solar",
              "type": "string"
            }
          },
          {
            "name": "brandId",
            "required": false,
            "in": "query",
            "description": "تصفية حسب البراند",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef1",
              "type": "string"
            }
          },
          {
            "name": "isFeatured",
            "required": false,
            "in": "query",
            "description": "تصفية المنتجات المميزة فقط",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          },
          {
            "name": "isNew",
            "required": false,
            "in": "query",
            "description": "تصفية المنتجات الجديدة فقط",
            "schema": {
              "example": false,
              "type": "boolean"
            }
          },
          {
            "name": "currency",
            "required": false,
            "in": "query",
            "description": "رمز العملة المطلوبة (افتراضي USD)",
            "schema": {
              "example": "SAR",
              "type": "string"
            }
          },
          {
            "name": "force",
            "required": false,
            "in": "query",
            "description": "تجاوز التخزين المؤقت وإرجاع البيانات المحدثة فوراً",
            "schema": {
              "example": false,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على المنتجات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "64prod123abc"
                              },
                              "name": {
                                "type": "string",
                                "example": "منتج رقم 1"
                              },
                              "nameEn": {
                                "type": "string",
                                "example": "Product 1"
                              },
                              "slug": {
                                "type": "string",
                                "example": "product-1"
                              },
                              "description": {
                                "type": "string",
                                "example": "وصف المنتج"
                              },
                              "categoryId": {
                                "type": "object"
                              },
                              "brandId": {
                                "type": "object"
                              },
                              "mainImageId": {
                                "type": "object"
                              },
                              "isActive": {
                                "type": "boolean",
                                "example": true
                              },
                              "isFeatured": {
                                "type": "boolean",
                                "example": false
                              },
                              "isNew": {
                                "type": "boolean",
                                "example": true
                              },
                              "status": {
                                "type": "string",
                                "example": "active"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            }
                          }
                        },
                        "meta": {
                          "type": "object",
                          "properties": {
                            "page": {
                              "type": "number",
                              "example": 1
                            },
                            "limit": {
                              "type": "number",
                              "example": 20
                            },
                            "total": {
                              "type": "number",
                              "example": 50
                            },
                            "totalPages": {
                              "type": "number",
                              "example": 3
                            },
                            "hasNextPage": {
                              "type": "boolean",
                              "example": true
                            },
                            "hasPrevPage": {
                              "type": "boolean",
                              "example": false
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "الفئة غير موجودة أو غير نشطة"
          }
        }
      }
    },
    "/api/v1/categories/{id}": {
      "get": {
        "operationId": "getCategory",
        "summary": "الحصول على فئة واحدة",
        "description": "الحصول على تفاصيل فئة محددة مع جميع المعلومات المتاحة للجمهور. النتائج مخزنة مؤقتاً لمدة 30 دقيقة.",
        "tags": [
          "الفئات-العامة"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الفئة (ObjectId أو Slug)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على الفئة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "الإلكترونيات"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Electronics"
                        },
                        "slug": {
                          "type": "string",
                          "example": "electronics"
                        },
                        "description": {
                          "type": "string",
                          "example": "جميع الأجهزة الإلكترونية والكهربائية"
                        },
                        "parentId": {
                          "type": "string",
                          "example": null
                        },
                        "parent": {
                          "type": "object",
                          "properties": {
                            "_id": {
                              "type": "string",
                              "example": "parent_id"
                            },
                            "name": {
                              "type": "string",
                              "example": "الفئة الأب"
                            },
                            "nameEn": {
                              "type": "string",
                              "example": "Parent Category"
                            },
                            "slug": {
                              "type": "string",
                              "example": "parent-category"
                            }
                          }
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "isFeatured": {
                          "type": "boolean",
                          "example": true
                        },
                        "order": {
                          "type": "number",
                          "example": 1
                        },
                        "productCount": {
                          "type": "number",
                          "example": 25
                        },
                        "children": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "64a1b2c3d4e5f6789abcdef1"
                              },
                              "name": {
                                "type": "string",
                                "example": "الهواتف"
                              },
                              "nameEn": {
                                "type": "string",
                                "example": "Phones"
                              },
                              "slug": {
                                "type": "string",
                                "example": "phones"
                              },
                              "productCount": {
                                "type": "number",
                                "example": 15
                              }
                            }
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "الفئة غير موجودة أو غير نشطة"
          }
        }
      }
    },
    "/api/v1/categories/featured/list": {
      "get": {
        "operationId": "getFeaturedCategories",
        "summary": "الحصول على الفئات المميزة",
        "description": "الحصول على قائمة بالفئات المميزة النشطة فقط. النتائج مخزنة مؤقتاً لمدة 30 دقيقة.",
        "tags": [
          "الفئات-العامة"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على الفئات المميزة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef0"
                          },
                          "name": {
                            "type": "string",
                            "example": "الإلكترونيات المميزة"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Featured Electronics"
                          },
                          "parentId": {
                            "type": "string",
                            "example": null
                          },
                          "image": {
                            "type": "object",
                            "nullable": true,
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "64img123abc"
                              },
                              "path": {
                                "type": "string",
                                "example": "media/category/featured.png"
                              }
                            }
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true
                          },
                          "order": {
                            "type": "number",
                            "example": 1
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/exchange-rates": {
      "get": {
        "operationId": "getCurrentRates",
        "summary": "الحصول على أسعار الصرف الحالية",
        "description": "استرداد أسعار صرف العملات الحالية (دولار أمريكي إلى ريال يمني وريال سعودي)",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد أسعار الصرف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "usdToYer": {
                      "type": "number",
                      "example": 250.5,
                      "description": "سعر الدولار مقابل الريال اليمني"
                    },
                    "usdToSar": {
                      "type": "number",
                      "example": 3.75,
                      "description": "سعر الدولار مقابل الريال السعودي"
                    },
                    "lastUpdated": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T10:30:00Z",
                      "description": "تاريخ آخر تحديث"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "أسعار-الصرف"
        ]
      }
    },
    "/api/v1/exchange-rates/convert": {
      "post": {
        "operationId": "convertCurrency",
        "summary": "تحويل العملة",
        "description": "تحويل مبلغ من عملة إلى أخرى باستخدام أسعار الصرف الحالية",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConvertCurrencyDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحويل العملة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "fromCurrency": {
                      "type": "string",
                      "example": "USD",
                      "description": "العملة المصدر"
                    },
                    "toCurrency": {
                      "type": "string",
                      "example": "YER",
                      "description": "العملة الهدف"
                    },
                    "amount": {
                      "type": "number",
                      "example": 100,
                      "description": "المبلغ الأصلي"
                    },
                    "convertedAmount": {
                      "type": "number",
                      "example": 25050,
                      "description": "المبلغ المحول"
                    },
                    "rate": {
                      "type": "number",
                      "example": 250.5,
                      "description": "سعر الصرف المستخدم"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T10:30:00Z",
                      "description": "تاريخ التحويل"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة أو عملة غير مدعومة"
          }
        },
        "tags": [
          "أسعار-الصرف"
        ]
      }
    },
    "/api/v1/exchange-rates/usd-to-yer": {
      "get": {
        "operationId": "getUSDToYERRate",
        "summary": "الحصول على سعر الدولار مقابل الريال اليمني",
        "description": "استرداد سعر صرف الدولار الأمريكي مقابل الريال اليمني الحالي",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد سعر الصرف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "rate": {
                      "type": "number",
                      "example": 250.5,
                      "description": "سعر الصرف الحالي"
                    },
                    "currency": {
                      "type": "string",
                      "example": "YER",
                      "description": "رمز العملة"
                    },
                    "formatted": {
                      "type": "string",
                      "example": "1 USD = 250.50 $",
                      "description": "السعر منسق للعرض"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "أسعار-الصرف"
        ]
      }
    },
    "/api/v1/exchange-rates/usd-to-sar": {
      "get": {
        "operationId": "getUSDToSARRate",
        "summary": "الحصول على سعر الدولار مقابل الريال السعودي",
        "description": "استرداد سعر صرف الدولار الأمريكي مقابل الريال السعودي الحالي",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد سعر الصرف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "rate": {
                      "type": "number",
                      "example": 3.75,
                      "description": "سعر الصرف الحالي"
                    },
                    "currency": {
                      "type": "string",
                      "example": "SAR",
                      "description": "رمز العملة"
                    },
                    "formatted": {
                      "type": "string",
                      "example": "1 USD = 3.75 $",
                      "description": "السعر منسق للعرض"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "أسعار-الصرف"
        ]
      }
    },
    "/api/v1/admin/exchange-rates": {
      "get": {
        "operationId": "getCurrentRates",
        "summary": "الحصول على أسعار الصرف الحالية (إداري)",
        "description": "استرداد أسعار صرف العملات الحالية مع تفاصيل إضافية للإداريين",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد أسعار الصرف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "usdToYer": {
                      "type": "number",
                      "example": 250.5,
                      "description": "سعر الدولار مقابل الريال اليمني"
                    },
                    "usdToSar": {
                      "type": "number",
                      "example": 3.75,
                      "description": "سعر الدولار مقابل الريال السعودي"
                    },
                    "lastUpdatedAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T10:30:00Z",
                      "description": "تاريخ آخر تحديث"
                    },
                    "lastUpdatedBy": {
                      "type": "string",
                      "example": "user123",
                      "description": "معرف المستخدم الذي قام بآخر تحديث"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذه البيانات"
          }
        },
        "tags": [
          "إدارة-أسعار-الصرف"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/exchange-rates/update": {
      "post": {
        "operationId": "updateRates",
        "summary": "تحديث أسعار الصرف",
        "description": "تحديث أسعار صرف العملات الجديدة في النظام",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateExchangeRateDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث أسعار الصرف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "تم تحديث أسعار الصرف بنجاح"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "usdToYer": {
                          "type": "number",
                          "example": 251,
                          "description": "السعر الجديد للدولار مقابل الريال اليمني"
                        },
                        "usdToSar": {
                          "type": "number",
                          "example": 3.76,
                          "description": "السعر الجديد للدولار مقابل الريال السعودي"
                        },
                        "lastUpdatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T11:00:00Z"
                        },
                        "lastUpdatedBy": {
                          "type": "string",
                          "example": "admin123"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة أو أسعار غير صالحة"
          },
          "403": {
            "description": "غير مصرح لك بتحديث أسعار الصرف"
          }
        },
        "tags": [
          "إدارة-أسعار-الصرف"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/exchange-rates/convert": {
      "post": {
        "operationId": "convertCurrency",
        "summary": "تحويل العملة (إداري)",
        "description": "تحويل مبلغ من عملة إلى أخرى للاختبار والتحقق من أسعار الصرف",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConvertCurrencyDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحويل العملة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "fromCurrency": {
                      "type": "string",
                      "example": "USD",
                      "description": "العملة المصدر"
                    },
                    "toCurrency": {
                      "type": "string",
                      "example": "YER",
                      "description": "العملة الهدف"
                    },
                    "amount": {
                      "type": "number",
                      "example": 100,
                      "description": "المبلغ الأصلي"
                    },
                    "convertedAmount": {
                      "type": "number",
                      "example": 25050,
                      "description": "المبلغ المحول"
                    },
                    "rate": {
                      "type": "number",
                      "example": 250.5,
                      "description": "سعر الصرف المستخدم"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T10:30:00Z",
                      "description": "تاريخ التحويل"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة أو عملة غير مدعومة"
          }
        },
        "tags": [
          "إدارة-أسعار-الصرف"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/exchange-rates/usd-to-yer": {
      "get": {
        "operationId": "getUSDToYERRate",
        "summary": "الحصول على سعر الدولار مقابل الريال اليمني (إداري)",
        "description": "استرداد سعر صرف الدولار الأمريكي مقابل الريال اليمني الحالي مع تفاصيل إضافية",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد سعر الصرف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "rate": {
                      "type": "number",
                      "example": 250.5,
                      "description": "سعر الصرف الحالي"
                    },
                    "currency": {
                      "type": "string",
                      "example": "YER",
                      "description": "رمز العملة"
                    },
                    "formatted": {
                      "type": "string",
                      "example": "1 USD = 250.50 $",
                      "description": "السعر منسق للعرض"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-أسعار-الصرف"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/exchange-rates/usd-to-sar": {
      "get": {
        "operationId": "getUSDToSARRate",
        "summary": "الحصول على سعر الدولار مقابل الريال السعودي (إداري)",
        "description": "استرداد سعر صرف الدولار الأمريكي مقابل الريال السعودي الحالي مع تفاصيل إضافية",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد سعر الصرف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "rate": {
                      "type": "number",
                      "example": 3.75,
                      "description": "سعر الصرف الحالي"
                    },
                    "currency": {
                      "type": "string",
                      "example": "SAR",
                      "description": "رمز العملة"
                    },
                    "formatted": {
                      "type": "string",
                      "example": "1 USD = 3.75 $",
                      "description": "السعر منسق للعرض"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-أسعار-الصرف"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/notifications": {
      "get": {
        "operationId": "getUserNotifications",
        "summary": "الحصول على إشعارات المستخدم",
        "description": "استرداد قائمة إشعارات المستخدم مع إمكانية التصفح والترقيم",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد الإشعارات في الصفحة",
            "schema": {
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "عدد الإشعارات التي تم تخطيها",
            "schema": {
              "example": 0,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الإشعارات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "notifications": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "notif123",
                                "description": "معرف الإشعار"
                              },
                              "title": {
                                "type": "string",
                                "example": "طلب جديد",
                                "description": "عنوان الإشعار"
                              },
                              "message": {
                                "type": "string",
                                "example": "لديك طلب جديد",
                                "description": "محتوى الإشعار"
                              },
                              "type": {
                                "type": "string",
                                "example": "order",
                                "description": "نوع الإشعار"
                              },
                              "isRead": {
                                "type": "boolean",
                                "example": false,
                                "description": "حالة القراءة"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2024-01-15T10:30:00Z"
                              }
                            }
                          }
                        },
                        "total": {
                          "type": "number",
                          "example": 150,
                          "description": "إجمالي عدد الإشعارات"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "number",
                          "example": 1,
                          "description": "رقم الصفحة الحالية"
                        },
                        "limit": {
                          "type": "number",
                          "example": 20,
                          "description": "عدد العناصر في الصفحة"
                        },
                        "total": {
                          "type": "number",
                          "example": 150,
                          "description": "إجمالي العناصر"
                        },
                        "totalPages": {
                          "type": "number",
                          "example": 8,
                          "description": "إجمالي الصفحات"
                        },
                        "hasNextPage": {
                          "type": "boolean",
                          "example": true,
                          "description": "هل يوجد صفحة تالية"
                        },
                        "hasPrevPage": {
                          "type": "boolean",
                          "example": false,
                          "description": "هل يوجد صفحة سابقة"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "الإشعارات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/unread-count": {
      "get": {
        "operationId": "getUnreadCount",
        "summary": "الحصول على عدد الإشعارات غير المقروءة",
        "description": "استرداد عدد الإشعارات التي لم يقرأها المستخدم بعد",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد عدد الإشعارات غير المقروءة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "count": {
                          "type": "number",
                          "example": 5,
                          "description": "عدد الإشعارات غير المقروءة"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "الإشعارات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/mark-read": {
      "post": {
        "operationId": "markAsRead",
        "summary": "تحديد الإشعارات كمقروءة",
        "description": "تحديد إشعارات محددة كمقروءة",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MarkAsReadDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديد الإشعارات كمقروءة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "markedCount": {
                          "type": "number",
                          "example": 3,
                          "description": "عدد الإشعارات المحددة كمقروءة"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "3 notifications marked as read",
                      "description": "رسالة النتيجة"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "الإشعارات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/mark-all-read": {
      "post": {
        "operationId": "markAllAsRead",
        "summary": "تحديد جميع الإشعارات كمقروءة",
        "description": "تحديد جميع إشعارات المستخدم كمقروءة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم تحديد جميع الإشعارات كمقروءة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "markedCount": {
                          "type": "number",
                          "example": 15,
                          "description": "عدد الإشعارات المحددة كمقروءة"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "15 notifications marked as read",
                      "description": "رسالة النتيجة"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "الإشعارات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/stats": {
      "get": {
        "operationId": "getUserStats",
        "summary": "الحصول على إحصائيات إشعارات المستخدم",
        "description": "استرداد إحصائيات مفصلة حول إشعارات المستخدم",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "number",
                          "example": 150,
                          "description": "إجمالي الإشعارات"
                        },
                        "unread": {
                          "type": "number",
                          "example": 5,
                          "description": "الإشعارات غير المقروءة"
                        },
                        "read": {
                          "type": "number",
                          "example": 145,
                          "description": "الإشعارات المقروءة"
                        },
                        "byType": {
                          "type": "object",
                          "properties": {
                            "order": {
                              "type": "number",
                              "example": 50,
                              "description": "إشعارات الطلبات"
                            },
                            "system": {
                              "type": "number",
                              "example": 30,
                              "description": "إشعارات النظام"
                            },
                            "promotion": {
                              "type": "number",
                              "example": 20,
                              "description": "إشعارات العروض"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "الإشعارات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/admin/list": {
      "get": {
        "operationId": "adminListNotifications",
        "summary": "الإدارة: قائمة جميع الإشعارات",
        "description": "استرداد قائمة بجميع الإشعارات في النظام (للإداريين فقط)",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة الإشعارات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "notifications": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "notif123"
                              },
                              "userId": {
                                "type": "string",
                                "example": "user456"
                              },
                              "title": {
                                "type": "string",
                                "example": "طلب جديد"
                              },
                              "message": {
                                "type": "string",
                                "example": "لديك طلب جديد"
                              },
                              "type": {
                                "type": "string",
                                "example": "order"
                              },
                              "isRead": {
                                "type": "boolean",
                                "example": false
                              }
                            }
                          }
                        },
                        "total": {
                          "type": "number",
                          "example": 500
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "description": "بيانات الترقيم"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذه البيانات"
          }
        },
        "tags": [
          "الإشعارات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/admin/create": {
      "post": {
        "operationId": "adminCreateNotification",
        "summary": "الإدارة: إنشاء إشعار",
        "description": "إنشاء إشعار جديد للمستخدمين (للإداريين فقط)",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateNotificationDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء الإشعار بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "notif123",
                          "description": "معرف الإشعار الجديد"
                        },
                        "title": {
                          "type": "string",
                          "example": "إعلان مهم",
                          "description": "عنوان الإشعار"
                        },
                        "message": {
                          "type": "string",
                          "example": "رسالة مهمة لجميع المستخدمين",
                          "description": "محتوى الإشعار"
                        },
                        "type": {
                          "type": "string",
                          "example": "announcement",
                          "description": "نوع الإشعار"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "403": {
            "description": "غير مصرح لك بإنشاء إشعارات"
          }
        },
        "tags": [
          "الإشعارات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/admin/stats": {
      "get": {
        "operationId": "adminGetStats",
        "summary": "الإدارة: الحصول على إحصائيات الإشعارات",
        "description": "استرداد إحصائيات شاملة حول جميع الإشعارات في النظام (للإداريين فقط)",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Statistics retrieved successfully"
          }
        },
        "tags": [
          "الإشعارات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/admin/templates": {
      "get": {
        "operationId": "adminGetTemplates",
        "summary": "الإدارة: الحصول على قوالب الإشعارات",
        "description": "استرداد قائمة بقوالب الإشعارات المتاحة في النظام (للإداريين فقط)",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Templates retrieved successfully"
          }
        },
        "tags": [
          "الإشعارات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/admin/cleanup": {
      "post": {
        "operationId": "adminCleanup",
        "summary": "الإدارة: تنظيف الإشعارات القديمة",
        "description": "حذف الإشعارات القديمة والغير مهمة من النظام (للإداريين فقط)",
        "parameters": [
          {
            "name": "olderThanDays",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cleanup completed successfully"
          }
        },
        "tags": [
          "الإشعارات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/user/{userId}": {
      "get": {
        "operationId": "getUserDetailedStats",
        "summary": "تحليلات مستخدم مفصلة",
        "description": "استرداد تحليلات شاملة لمستخدم محدد تشمل السلوكيات والإحصائيات والتقييمات",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب بيانات المستخدم بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDetailedStatsDto"
                }
              }
            }
          },
          "404": {
            "description": "المستخدم غير موجود"
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/rankings": {
      "get": {
        "operationId": "getCustomerRankings",
        "summary": "ترتيب العملاء حسب القيمة والأداء",
        "description": "يعرض قائمة مرتبة للعملاء حسب المبلغ المنفق وعدد الطلبات",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العملاء المراد عرضهم",
            "schema": {
              "default": 50,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب ترتيب العملاء بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CustomerRankingDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/overview": {
      "get": {
        "operationId": "getOverallAnalytics",
        "summary": "الإحصائيات العامة للمستخدمين",
        "description": "يعرض إحصائيات شاملة عن جميع المستخدمين في النظام",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب الإحصائيات العامة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OverallUserAnalyticsDto"
                }
              }
            }
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/analyze": {
      "post": {
        "operationId": "analyzeUsers",
        "summary": "تحليل متقدم للمستخدمين",
        "description": "تحليل شامل للمستخدمين حسب المعايير المحددة",
        "parameters": [
          {
            "name": "page",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserStatsFilterDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم التحليل بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedUserStatsDto"
                }
              }
            }
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/reports/top-customers": {
      "get": {
        "operationId": "getTopCustomersReport",
        "summary": "تقرير أفضل العملاء",
        "description": "تقرير مفصل عن أفضل العملاء حسب معايير متعددة",
        "parameters": [
          {
            "name": "period",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "metric",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم إنشاء التقرير بنجاح"
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/reports/customer-segments": {
      "get": {
        "operationId": "getCustomerSegmentsReport",
        "summary": "تقرير شرائح العملاء",
        "description": "تقرير تحليلي لشرائح العملاء المختلفة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم إنشاء التقرير بنجاح"
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/alerts/churn-risk": {
      "get": {
        "operationId": "getChurnRiskAlerts",
        "summary": "تنبيهات مخاطر فقدان العملاء",
        "description": "قائمة العملاء المعرضين لخطر فقدانهم",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب التنبيهات بنجاح"
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/scoring/config": {
      "get": {
        "operationId": "getScoringConfig",
        "summary": "الحصول على إعدادات التقييم الحالية",
        "description": "يعرض الإعدادات المستخدمة في حساب نقاط المستخدمين",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب إعدادات التقييم بنجاح"
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "post": {
        "operationId": "updateScoringConfig",
        "summary": "تحديث إعدادات التقييم",
        "description": "تحديث الإعدادات المستخدمة في حساب نقاط المستخدمين",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم تحديث إعدادات التقييم بنجاح"
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/cache/stats": {
      "get": {
        "operationId": "getCacheStats",
        "summary": "الحصول على إحصائيات التخزين المؤقت",
        "description": "يعرض إحصائيات نظام التخزين المؤقت",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب إحصائيات التخزين المؤقت بنجاح"
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/cache/clear": {
      "post": {
        "operationId": "clearCache",
        "summary": "مسح جميع البيانات من التخزين المؤقت",
        "description": "مسح جميع البيانات المخزنة مؤقتاً",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم مسح التخزين المؤقت بنجاح"
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/user-analytics/cache/user/{userId}": {
      "delete": {
        "operationId": "clearUserCache",
        "summary": "مسح بيانات مستخدم من التخزين المؤقت",
        "description": "مسح جميع البيانات المخزنة مؤقتاً لمستخدم معين",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم مسح بيانات المستخدم من التخزين المؤقت بنجاح"
          }
        },
        "tags": [
          "تحليلات-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/users/verification/submit": {
      "post": {
        "operationId": "submitVerification",
        "summary": "رفع وثائق التحقق",
        "description": "رفع ملف السيرة الذاتية للمهندس أو صورة المحل للتاجر مع ملاحظة اختيارية",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "الملف المطلوب رفعه (CV للمهندس، صورة المحل للتاجر)"
                  },
                  "storeName": {
                    "type": "string",
                    "description": "اسم المحل (مطلوب للتاجر فقط)",
                    "example": "محل الأجهزة الكهربائية"
                  },
                  "note": {
                    "type": "string",
                    "description": "ملاحظة اختيارية",
                    "example": "ملاحظة إضافية حول طلب التحقق"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم رفع الوثائق بنجاح وتم تحديث الحالة إلى قيد المراجعة"
          },
          "400": {
            "description": "بيانات غير صحيحة أو نوع الملف غير مدعوم"
          },
          "403": {
            "description": "المستخدم ليس مهندساً أو تاجراً أو تم التحقق مسبقاً"
          }
        },
        "tags": [
          "تحقق-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/orders/checkout/preview": {
      "post": {
        "operationId": "previewCheckout",
        "summary": "معاينة الطلب",
        "description": "معاينة تفاصيل الطلب والأسعار قبل التأكيد",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CheckoutPreviewDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إنشاء معاينة الطلب بنجاح"
          },
          "400": {
            "description": "بيانات غير صحيحة"
          }
        },
        "tags": [
          "الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/orders/checkout/confirm": {
      "post": {
        "operationId": "confirmCheckout",
        "summary": "تأكيد الطلب",
        "description": "تأكيد الطلب وإنشاؤه في النظام",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CheckoutConfirmDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء الطلب بنجاح"
          },
          "400": {
            "description": "فشل في إنشاء الطلب"
          }
        },
        "tags": [
          "الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/orders": {
      "get": {
        "operationId": "getUserOrders",
        "summary": "الحصول على طلبات المستخدم",
        "description": "قائمة بجميع طلبات المستخدم مع إمكانية الفلترة والترقيم",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "default": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "default": 20,
              "type": "number"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "pending_payment",
                "confirmed",
                "processing",
                "shipped",
                "delivered",
                "completed",
                "on_hold",
                "cancelled",
                "returned",
                "refunded"
              ],
              "type": "string"
            }
          },
          {
            "name": "paymentStatus",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "pending",
                "authorized",
                "paid",
                "failed",
                "refunded",
                "partially_refunded",
                "cancelled"
              ],
              "type": "string"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "schema": {
              "default": "desc",
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          },
          {
            "name": "fromDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "toDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على الطلبات بنجاح"
          }
        },
        "tags": [
          "الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/orders/recent": {
      "get": {
        "operationId": "getRecentOrders",
        "summary": "الطلبات الأخيرة",
        "description": "الحصول على أحدث الطلبات للمستخدم",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد الطلبات المطلوبة",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على الطلبات الأخيرة"
          }
        },
        "tags": [
          "الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/orders/{id}": {
      "get": {
        "operationId": "getOrderDetails",
        "summary": "تفاصيل الطلب",
        "description": "الحصول على تفاصيل طلب محدد",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على تفاصيل الطلب"
          },
          "404": {
            "description": "الطلب غير موجود"
          }
        },
        "tags": [
          "الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/orders/{id}/track": {
      "get": {
        "operationId": "trackOrder",
        "summary": "تتبع الطلب",
        "description": "الحصول على معلومات تتبع الطلب والخط الزمني",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على معلومات التتبع"
          }
        },
        "tags": [
          "الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/orders/{id}/cancel": {
      "post": {
        "operationId": "cancelOrder",
        "summary": "إلغاء الطلب",
        "description": "إلغاء طلب محدد من قبل العميل",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CancelOrderDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إلغاء الطلب بنجاح"
          },
          "400": {
            "description": "لا يمكن إلغاء الطلب"
          }
        },
        "tags": [
          "الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/orders/{id}/rate": {
      "post": {
        "operationId": "rateOrder",
        "summary": "تقييم الطلب",
        "description": "تقييم طلب محدد بعد التسليم",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RateOrderDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تقييم الطلب بنجاح"
          },
          "400": {
            "description": "لا يمكن تقييم الطلب في هذه المرحلة"
          }
        },
        "tags": [
          "الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/orders/{id}/notes": {
      "post": {
        "operationId": "addOrderNotes",
        "summary": "إضافة ملاحظات للطلب",
        "description": "إضافة ملاحظات شخصية للطلب",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddOrderNotesDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إضافة الملاحظات بنجاح"
          }
        },
        "tags": [
          "الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/orders/stats/summary": {
      "get": {
        "operationId": "getOrderStatistics",
        "summary": "إحصائيات الطلبات",
        "description": "الحصول على إحصائيات طلبات المستخدم",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على الإحصائيات"
          }
        },
        "tags": [
          "الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders": {
      "get": {
        "operationId": "getAllOrders",
        "summary": "جميع الطلبات (للإدارة)",
        "description": "الحصول على جميع الطلبات مع إمكانية الفلترة والبحث",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "default": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "default": 20,
              "type": "number"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "pending_payment",
                "confirmed",
                "processing",
                "shipped",
                "delivered",
                "completed",
                "on_hold",
                "cancelled",
                "returned",
                "refunded"
              ],
              "type": "string"
            }
          },
          {
            "name": "paymentStatus",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "pending",
                "authorized",
                "paid",
                "failed",
                "refunded",
                "partially_refunded",
                "cancelled"
              ],
              "type": "string"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "schema": {
              "default": "desc",
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          },
          {
            "name": "fromDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "toDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على الطلبات بنجاح"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/{id}": {
      "get": {
        "operationId": "getOrderDetails",
        "summary": "تفاصيل الطلب (للإدارة)",
        "description": "الحصول على تفاصيل طلب محدد مع جميع المعلومات",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على تفاصيل الطلب"
          },
          "404": {
            "description": "الطلب غير موجود"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/{id}/status": {
      "patch": {
        "operationId": "updateOrderStatus",
        "summary": "تحديث حالة الطلب",
        "description": "تحديث حالة طلب محدد من قبل الإدارة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateOrderStatusDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث حالة الطلب بنجاح"
          },
          "400": {
            "description": "لا يمكن تحديث الحالة"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/{id}/ship": {
      "post": {
        "operationId": "shipOrder",
        "summary": "شحن الطلب",
        "description": "تحديث معلومات الشحن للطلب",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShipOrderDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم شحن الطلب بنجاح"
          },
          "400": {
            "description": "الطلب غير جاهز للشحن"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/{id}/refund": {
      "post": {
        "operationId": "processRefund",
        "summary": "معالجة الاسترداد",
        "description": "معالجة استرداد مبلغ الطلب",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefundOrderDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم معالجة الاسترداد بنجاح"
          },
          "400": {
            "description": "لا يمكن معالجة الاسترداد"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/{id}/notes": {
      "post": {
        "operationId": "addAdminNotes",
        "summary": "إضافة ملاحظات إدارية",
        "description": "إضافة ملاحظات إدارية للطلب",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddOrderNotesDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إضافة الملاحظات بنجاح"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/{id}/verify-payment": {
      "post": {
        "operationId": "verifyPayment",
        "summary": "مطابقة الدفع المحلي",
        "description": "مطابقة الدفع للطلبات المحلية (إدخال المبلغ والعملة)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الطلب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyPaymentDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم مطابقة الدفع بنجاح"
          },
          "400": {
            "description": "فشل في مطابقة الدفع"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/bulk/update-status": {
      "post": {
        "operationId": "bulkUpdateStatus",
        "summary": "تحديث حالة عدة طلبات",
        "description": "تحديث حالة عدة طلبات في عملية واحدة",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkOrderUpdateDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث الطلبات بنجاح"
          },
          "400": {
            "description": "فشل في تحديث بعض الطلبات"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/stats": {
      "get": {
        "operationId": "getOrderStats",
        "summary": "إحصائيات الطلبات الأساسية",
        "description": "الحصول على إحصائيات أساسية للطلبات",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على الإحصائيات"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/analytics/summary": {
      "get": {
        "operationId": "getAnalytics",
        "summary": "التحليلات الإدارية",
        "description": "الحصول على تحليلات شاملة للطلبات",
        "parameters": [
          {
            "name": "days",
            "required": false,
            "in": "query",
            "description": "عدد الأيام",
            "schema": {
              "default": 7,
              "type": "number"
            }
          },
          {
            "name": "groupBy",
            "required": false,
            "in": "query",
            "description": "تجميع البيانات",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "فلترة حسب الحالة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على التحليلات"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/analytics/revenue": {
      "get": {
        "operationId": "getRevenueAnalytics",
        "summary": "تحليل الإيرادات",
        "description": "تحليل مفصل للإيرادات والأرباح",
        "parameters": [
          {
            "name": "fromDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "toDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على تحليل الإيرادات"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/analytics/performance": {
      "get": {
        "operationId": "getPerformanceAnalytics",
        "summary": "تحليل الأداء",
        "description": "تحليل أداء النظام والطلبات",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على تحليل الأداء"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/reports/orders": {
      "get": {
        "operationId": "generateOrdersReport",
        "summary": "تقرير الطلبات",
        "description": "تقرير مفصل للطلبات",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "default": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "default": 20,
              "type": "number"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "pending_payment",
                "confirmed",
                "processing",
                "shipped",
                "delivered",
                "completed",
                "on_hold",
                "cancelled",
                "returned",
                "refunded"
              ],
              "type": "string"
            }
          },
          {
            "name": "paymentStatus",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "pending",
                "authorized",
                "paid",
                "failed",
                "refunded",
                "partially_refunded",
                "cancelled"
              ],
              "type": "string"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "schema": {
              "default": "desc",
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          },
          {
            "name": "fromDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "toDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "format",
            "required": false,
            "in": "query",
            "description": "تنسيق التقرير (pdf, excel)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم إنشاء التقرير"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/reports/financial": {
      "get": {
        "operationId": "generateFinancialReport",
        "summary": "التقرير المالي",
        "description": "تقرير مالي مفصل للطلبات",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم إنشاء التقرير المالي"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/analytics/export": {
      "post": {
        "operationId": "exportOrderAnalytics",
        "summary": "تصدير تحليلات الطلبات",
        "description": "تصدير بيانات تحليلات الطلبات بصيغ مختلفة (CSV, Excel, JSON)",
        "parameters": [
          {
            "name": "format",
            "required": false,
            "in": "query",
            "description": "صيغة الملف (csv, xlsx, json)",
            "schema": {
              "example": "csv",
              "type": "string"
            }
          },
          {
            "name": "days",
            "required": false,
            "in": "query",
            "description": "عدد الأيام",
            "schema": {
              "example": 30,
              "type": "number"
            }
          },
          {
            "name": "fromDate",
            "required": false,
            "in": "query",
            "description": "من تاريخ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "toDate",
            "required": false,
            "in": "query",
            "description": "إلى تاريخ",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تصدير البيانات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "fileUrl": {
                          "type": "string"
                        },
                        "format": {
                          "type": "string"
                        },
                        "exportedAt": {
                          "type": "string"
                        },
                        "fileName": {
                          "type": "string"
                        },
                        "recordCount": {
                          "type": "number"
                        },
                        "summary": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/orders/export": {
      "post": {
        "operationId": "exportOrders",
        "summary": "تصدير قائمة الطلبات",
        "description": "تصدير قائمة الطلبات مع التصفية بصيغ مختلفة (CSV, Excel, JSON)",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "default": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "default": 20,
              "type": "number"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "pending_payment",
                "confirmed",
                "processing",
                "shipped",
                "delivered",
                "completed",
                "on_hold",
                "cancelled",
                "returned",
                "refunded"
              ],
              "type": "string"
            }
          },
          {
            "name": "paymentStatus",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "pending",
                "authorized",
                "paid",
                "failed",
                "refunded",
                "partially_refunded",
                "cancelled"
              ],
              "type": "string"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "schema": {
              "default": "desc",
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          },
          {
            "name": "fromDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "toDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "format",
            "required": false,
            "in": "query",
            "description": "صيغة الملف",
            "schema": {
              "example": "csv",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تصدير القائمة بنجاح"
          }
        },
        "tags": [
          "إدارة-الطلبات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/webhooks/payment": {
      "post": {
        "operationId": "handlePaymentWebhook",
        "summary": "Webhook الدفع",
        "description": "معالجة إشعارات الدفع من مزودي الخدمة",
        "parameters": [
          {
            "name": "X-Webhook-Signature",
            "required": false,
            "in": "header",
            "description": "توقيع Webhook للتحقق من الأمان",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WebhookDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم معالجة Webhook بنجاح"
          },
          "400": {
            "description": "Webhook غير صحيح"
          }
        },
        "tags": [
          "الخطافات"
        ]
      }
    },
    "/api/v1/webhooks/shipping": {
      "post": {
        "operationId": "handleShippingWebhook",
        "summary": "Webhook الشحن",
        "description": "معالجة إشعارات الشحن من شركات النقل",
        "parameters": [
          {
            "name": "X-Webhook-Signature",
            "required": true,
            "in": "header",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم معالجة إشعار الشحن"
          }
        },
        "tags": [
          "الخطافات"
        ]
      }
    },
    "/api/v1/webhooks/inventory": {
      "post": {
        "operationId": "handleInventoryWebhook",
        "summary": "Webhook المخزون",
        "description": "معالجة إشعارات تغيير المخزون",
        "parameters": [
          {
            "name": "X-Webhook-Signature",
            "required": true,
            "in": "header",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم معالجة إشعار المخزون"
          }
        },
        "tags": [
          "الخطافات"
        ]
      }
    },
    "/api/v1/cart": {
      "get": {
        "operationId": "get",
        "summary": "الحصول على سلة المستخدم",
        "description": "يسترد سلة التسوق الحالية للمستخدم مع جميع العناصر",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد السلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "userId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439012"
                        },
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "507f1f77bcf86cd799439013"
                              },
                              "variantId": {
                                "type": "string",
                                "example": "507f1f77bcf86cd799439014",
                                "nullable": true,
                                "description": "يتوفر فقط عند وجود متغير محدد"
                              },
                              "productId": {
                                "type": "string",
                                "example": "507f1f77bcf86cd799439099",
                                "nullable": true,
                                "description": "معرف المنتج عند التعامل مع عنصر بدون متغيرات"
                              },
                              "quantity": {
                                "type": "number",
                                "example": 2
                              }
                            }
                          }
                        },
                        "totalItems": {
                          "type": "number",
                          "example": 3
                        },
                        "totalPrice": {
                          "type": "number",
                          "example": 599.98
                        },
                        "currency": {
                          "type": "string",
                          "example": "USD"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "رمز JWT غير صحيح أو مفقود"
          }
        },
        "tags": [
          "السلة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/cart/items": {
      "post": {
        "operationId": "add",
        "summary": "إضافة عنصر إلى السلة",
        "description": "إضافة عنصر إلى السلة باستخدام `variantId` أو `productId` (لمنتج بسيط بدون متغيرات)",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddItemDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إضافة العنصر إلى السلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439013"
                        },
                        "variantId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439014",
                          "nullable": true
                        },
                        "productId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439099",
                          "nullable": true
                        },
                        "quantity": {
                          "type": "number",
                          "example": 2
                        },
                        "product": {
                          "type": "object"
                        },
                        "variant": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "معرف المتغير أو الكمية غير صحيحة"
          },
          "401": {
            "description": "رمز JWT غير صحيح أو مفقود"
          }
        },
        "tags": [
          "السلة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/cart/items/{itemId}": {
      "patch": {
        "operationId": "update",
        "summary": "تحديث كمية عنصر في السلة",
        "description": "تحديث كمية عنصر محدد في سلة التسوق للمستخدم.",
        "tags": [
          "السلة"
        ],
        "parameters": [
          {
            "name": "itemId",
            "required": true,
            "in": "path",
            "description": "معرف العنصر في السلة",
            "schema": {
              "example": "507f1f77bcf86cd799439013",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateItemDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث العنصر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439013"
                        },
                        "variantId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439014",
                          "nullable": true
                        },
                        "productId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439099",
                          "nullable": true
                        },
                        "quantity": {
                          "type": "number",
                          "example": 3
                        },
                        "product": {
                          "type": "object"
                        },
                        "variant": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "كمية غير صحيحة"
          },
          "404": {
            "description": "العنصر غير موجود في السلة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "remove",
        "summary": "إزالة عنصر من السلة",
        "description": "إزالة عنصر محدد من سلة التسوق للمستخدم.",
        "tags": [
          "السلة"
        ],
        "parameters": [
          {
            "name": "itemId",
            "required": true,
            "in": "path",
            "description": "معرف العنصر في السلة",
            "schema": {
              "example": "507f1f77bcf86cd799439013",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم إزالة العنصر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "message": {
                          "type": "string",
                          "example": "تم إزالة العنصر من السلة"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "العنصر غير موجود في السلة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/cart/merge": {
      "post": {
        "operationId": "merge",
        "summary": "دمج سلة الأجهزة مع سلة المستخدم",
        "description": "دمج سلة التسوق المحفوظة على الجهاز مع سلة المستخدم المسجل دخوله.",
        "tags": [
          "السلة"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeviceDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم دمج السلات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "merged": {
                          "type": "boolean",
                          "example": true
                        },
                        "itemsAdded": {
                          "type": "number",
                          "example": 2
                        },
                        "totalItems": {
                          "type": "number",
                          "example": 5
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "معرف الجهاز غير صحيح"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/cart/preview": {
      "post": {
        "operationId": "preview",
        "summary": "معاينة السلة",
        "description": "معاينة السلة مع حساب التكاليف والضرائب لعملة محددة.",
        "tags": [
          "السلة"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PreviewDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم حساب معاينة السلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "subtotal": {
                          "type": "number",
                          "example": 500
                        },
                        "tax": {
                          "type": "number",
                          "example": 75
                        },
                        "shipping": {
                          "type": "number",
                          "example": 25
                        },
                        "total": {
                          "type": "number",
                          "example": 600
                        },
                        "currency": {
                          "type": "string",
                          "example": "SAR"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/cart/settings": {
      "patch": {
        "operationId": "updateSettings",
        "summary": "تحديث إعدادات السلة",
        "description": "تحديث إعدادات السلة مثل العملة المفضلة وغيرها.",
        "tags": [
          "السلة"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCartSettingsDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث إعدادات السلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "message": {
                          "type": "string",
                          "example": "تم تحديث إعدادات السلة"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/cart/coupon": {
      "post": {
        "operationId": "applyCoupon",
        "summary": "تطبيق كوبون خصم",
        "description": "تطبيق كوبون خصم على السلة.",
        "tags": [
          "السلة"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApplyCouponDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تطبيق الكوبون بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "message": {
                          "type": "string",
                          "example": "تم تطبيق الكوبون بنجاح"
                        },
                        "discount": {
                          "type": "number",
                          "example": 50
                        },
                        "newTotal": {
                          "type": "number",
                          "example": 550
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "كود الكوبون غير صحيح أو منتهي الصلاحية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "removeCoupon",
        "summary": "إزالة كوبون الخصم",
        "description": "إزالة الكوبون المطبق من السلة.",
        "tags": [
          "السلة"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم إزالة الكوبون بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "message": {
                          "type": "string",
                          "example": "تم إزالة الكوبون من السلة"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "لا يوجد كوبون مطبق على السلة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/cart/guest": {
      "get": {
        "operationId": "get",
        "summary": "الحصول على سلة الزائر",
        "description": "الحصول على سلة التسوق للزائر غير المسجل باستخدام معرف الجهاز. لا يتطلب مصادقة.",
        "tags": [
          "سلة-الزوار"
        ],
        "parameters": [
          {
            "name": "deviceId",
            "required": true,
            "in": "query",
            "description": "معرف الجهاز الفريد للزائر",
            "schema": {
              "example": "device_123456789",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على سلة الزائر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "deviceId": {
                          "type": "string",
                          "example": "device_123456789"
                        },
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "507f1f77bcf86cd799439013"
                              },
                              "variantId": {
                                "type": "string",
                                "example": "507f1f77bcf86cd799439014"
                              },
                              "quantity": {
                                "type": "number",
                                "example": 2
                              },
                              "product": {
                                "type": "object"
                              },
                              "variant": {
                                "type": "object"
                              }
                            }
                          }
                        },
                        "totalItems": {
                          "type": "number",
                          "example": 3
                        },
                        "totalPrice": {
                          "type": "number",
                          "example": 599.98
                        },
                        "currency": {
                          "type": "string",
                          "example": "SAR"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "معرف الجهاز مطلوب"
          }
        }
      }
    },
    "/api/v1/cart/guest/items": {
      "post": {
        "operationId": "add",
        "summary": "إضافة عنصر إلى سلة الزائر",
        "description": "إضافة منتج إلى سلة التسوق للزائر غير المسجل. لا يتطلب مصادقة.",
        "tags": [
          "سلة-الزوار"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GuestAddItemDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إضافة العنصر إلى السلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439013"
                        },
                        "variantId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439014"
                        },
                        "quantity": {
                          "type": "number",
                          "example": 2
                        },
                        "product": {
                          "type": "object"
                        },
                        "variant": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "معرف المنتج أو الكمية غير صحيحة"
          }
        }
      }
    },
    "/api/v1/cart/guest/items/{itemId}": {
      "patch": {
        "operationId": "update",
        "summary": "تحديث كمية عنصر في سلة الزائر",
        "description": "تحديث كمية عنصر محدد في سلة التسوق للزائر غير المسجل.",
        "tags": [
          "سلة-الزوار"
        ],
        "parameters": [
          {
            "name": "itemId",
            "required": true,
            "in": "path",
            "description": "معرف العنصر في السلة",
            "schema": {
              "example": "507f1f77bcf86cd799439013",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GuestUpdateItemDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث العنصر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439013"
                        },
                        "variantId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439014"
                        },
                        "quantity": {
                          "type": "number",
                          "example": 3
                        },
                        "product": {
                          "type": "object"
                        },
                        "variant": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "كمية غير صحيحة أو معرف الجهاز مطلوب"
          },
          "404": {
            "description": "العنصر غير موجود في السلة"
          }
        }
      },
      "delete": {
        "operationId": "remove",
        "summary": "إزالة عنصر من سلة الزائر",
        "description": "إزالة عنصر محدد من سلة التسوق للزائر غير المسجل.",
        "tags": [
          "سلة-الزوار"
        ],
        "parameters": [
          {
            "name": "itemId",
            "required": true,
            "in": "path",
            "description": "معرف العنصر في السلة",
            "schema": {
              "example": "507f1f77bcf86cd799439013",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeviceDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إزالة العنصر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "message": {
                          "type": "string",
                          "example": "تم إزالة العنصر من السلة"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "معرف الجهاز مطلوب"
          },
          "404": {
            "description": "العنصر غير موجود في السلة"
          }
        }
      }
    },
    "/api/v1/cart/guest/clear": {
      "post": {
        "operationId": "clear",
        "summary": "مسح سلة الزائر",
        "description": "مسح جميع العناصر من سلة التسوق للزائر غير المسجل.",
        "tags": [
          "سلة-الزوار"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeviceDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم مسح السلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "message": {
                          "type": "string",
                          "example": "تم مسح السلة بنجاح"
                        },
                        "itemsRemoved": {
                          "type": "number",
                          "example": 5
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "معرف الجهاز مطلوب"
          }
        }
      }
    },
    "/api/v1/cart/guest/preview": {
      "post": {
        "operationId": "preview",
        "summary": "معاينة سلة الزائر",
        "description": "معاينة سلة التسوق للزائر مع حساب التكاليف والضرائب لعملة محددة.",
        "tags": [
          "سلة-الزوار"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GuestPreviewDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم حساب معاينة السلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "subtotal": {
                          "type": "number",
                          "example": 500
                        },
                        "tax": {
                          "type": "number",
                          "example": 75
                        },
                        "shipping": {
                          "type": "number",
                          "example": 25
                        },
                        "total": {
                          "type": "number",
                          "example": 600
                        },
                        "currency": {
                          "type": "string",
                          "example": "SAR"
                        },
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string",
                                "example": "منتج تجريبي"
                              },
                              "quantity": {
                                "type": "number",
                                "example": 2
                              },
                              "price": {
                                "type": "number",
                                "example": 250
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "معرف الجهاز أو العملة غير صحيحة"
          }
        }
      }
    },
    "/api/v1/admin/carts/abandoned": {
      "get": {
        "operationId": "getAbandonedCarts",
        "summary": "الحصول على السلات المهجورة",
        "description": "الحصول على قائمة السلات التي تم التخلي عنها لفترة محددة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [
          {
            "name": "hours",
            "required": false,
            "in": "query",
            "description": "عدد الساعات للاعتبار سلة مهجورة",
            "schema": {
              "example": "24",
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد السلات المراد عرضها",
            "schema": {
              "example": "50",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على السلات المهجورة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "507f1f77bcf86cd799439011"
                          },
                          "userId": {
                            "type": "string",
                            "example": "507f1f77bcf86cd799439012"
                          },
                          "items": {
                            "type": "array"
                          },
                          "pricingSummary": {
                            "type": "object",
                            "properties": {
                              "total": {
                                "type": "number",
                                "example": 599.98
                              }
                            }
                          },
                          "lastActivity": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    },
                    "count": {
                      "type": "number",
                      "example": 25
                    },
                    "totalCarts": {
                      "type": "number",
                      "example": 50
                    },
                    "totalValue": {
                      "type": "number",
                      "example": 14999.5
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/send-reminders": {
      "post": {
        "operationId": "sendReminders",
        "summary": "إرسال تذكيرات لجميع السلات المهجورة",
        "description": "إرسال رسائل تذكير عبر البريد الإلكتروني لجميع السلات المهجورة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم إرسال التذكيرات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "تم إرسال 25 رسالة تذكير"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "emailsSent": {
                          "type": "number",
                          "example": 25
                        },
                        "successCount": {
                          "type": "number",
                          "example": 23
                        },
                        "failedCount": {
                          "type": "number",
                          "example": 2
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/{id}/send-reminder": {
      "post": {
        "operationId": "sendSingleReminder",
        "summary": "إرسال تذكير لسلة محددة",
        "description": "إرسال رسالة تذكير عبر البريد الإلكتروني لسلة مهجورة محددة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف السلة",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم إرسال التذكير بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "تم إرسال التذكير بنجاح"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "cartId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "emailSent": {
                          "type": "boolean",
                          "example": true
                        },
                        "sentAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          },
          "404": {
            "description": "السلة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/analytics": {
      "get": {
        "operationId": "getAnalytics",
        "summary": "الحصول على تحليلات شاملة للسلات",
        "description": "الحصول على تحليلات مفصلة عن السلات لفترة محددة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "الفترة بالأيام",
            "schema": {
              "example": "30",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على التحليلات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalCarts": {
                          "type": "number",
                          "example": 1250
                        },
                        "activeCarts": {
                          "type": "number",
                          "example": 800
                        },
                        "abandonedCarts": {
                          "type": "number",
                          "example": 450
                        },
                        "conversionRate": {
                          "type": "number",
                          "example": 0.35
                        },
                        "averageCartValue": {
                          "type": "number",
                          "example": 245.5
                        },
                        "totalRevenue": {
                          "type": "number",
                          "example": 306875
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/statistics": {
      "get": {
        "operationId": "getStatistics",
        "summary": "الحصول على إحصائيات السلات",
        "description": "الحصول على نظرة عامة على إحصائيات السلات. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalCarts": {
                          "type": "number",
                          "example": 5000
                        },
                        "activeCarts": {
                          "type": "number",
                          "example": 3200
                        },
                        "completedCarts": {
                          "type": "number",
                          "example": 1800
                        },
                        "abandonedCarts": {
                          "type": "number",
                          "example": 1400
                        },
                        "totalValue": {
                          "type": "number",
                          "example": 1225000
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/conversion-rates": {
      "get": {
        "operationId": "getConversionRates",
        "summary": "الحصول على معدلات التحويل",
        "description": "الحصول على معدلات تحويل السلات لفترة محددة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "الفترة بالأيام",
            "schema": {
              "example": "30",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على معدلات التحويل بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "overallRate": {
                          "type": "number",
                          "example": 0.35
                        },
                        "dailyRates": {
                          "type": "array"
                        },
                        "weeklyRates": {
                          "type": "array"
                        },
                        "monthlyRate": {
                          "type": "number",
                          "example": 0.32
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/all": {
      "get": {
        "operationId": "getAllCarts",
        "summary": "الحصول على جميع السلات مع الترقيم والتصفية",
        "description": "الحصول على قائمة بجميع السلات مع إمكانية الترقيم والتصفية. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "example": "1",
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العناصر في الصفحة",
            "schema": {
              "example": "20",
              "type": "string"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "تصفية حسب الحالة",
            "schema": {
              "example": "active",
              "type": "string"
            }
          },
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "تصفية حسب معرف المستخدم",
            "schema": {
              "example": "507f1f77bcf86cd799439012",
              "type": "string"
            }
          },
          {
            "name": "dateFrom",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "example": "2024-01-01",
              "type": "string"
            }
          },
          {
            "name": "dateTo",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "example": "2024-12-31",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على السلات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "507f1f77bcf86cd799439011"
                          },
                          "userId": {
                            "type": "string",
                            "example": "507f1f77bcf86cd799439012"
                          },
                          "items": {
                            "type": "array"
                          },
                          "status": {
                            "type": "string",
                            "example": "active"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "number",
                          "example": 1
                        },
                        "limit": {
                          "type": "number",
                          "example": 20
                        },
                        "total": {
                          "type": "number",
                          "example": 100
                        },
                        "totalPages": {
                          "type": "number",
                          "example": 5
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/{id}": {
      "get": {
        "operationId": "getCartById",
        "summary": "الحصول على تفاصيل السلة بواسطة المعرف",
        "description": "الحصول على تفاصيل سلة محددة باستخدام المعرف. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف السلة",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على تفاصيل السلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "userId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439012"
                        },
                        "items": {
                          "type": "array"
                        },
                        "pricingSummary": {
                          "type": "object"
                        },
                        "status": {
                          "type": "string",
                          "example": "active"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          },
          "404": {
            "description": "السلة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/{id}/convert-to-order": {
      "post": {
        "operationId": "convertToOrder",
        "summary": "تحويل السلة يدوياً إلى طلب",
        "description": "تحويل سلة محددة إلى طلب يدوياً. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف السلة",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تحويل السلة إلى طلب بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "تم تحويل السلة إلى طلب بنجاح"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "orderId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439015"
                        },
                        "cartId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "status": {
                          "type": "string",
                          "example": "completed"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "لا يمكن تحويل السلة - السلة فارغة أو غير نشطة"
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          },
          "404": {
            "description": "السلة غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/recovery-campaigns": {
      "get": {
        "operationId": "getRecoveryCampaigns",
        "summary": "تحليلات حملات استرداد السلات",
        "description": "الحصول على تحليلات حملات استرداد السلات المهجورة لفترة محددة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "الفترة بالأيام",
            "schema": {
              "example": "30",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على تحليلات الحملات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalCampaigns": {
                          "type": "number",
                          "example": 5
                        },
                        "emailsSent": {
                          "type": "number",
                          "example": 1250
                        },
                        "recoveryRate": {
                          "type": "number",
                          "example": 0.15
                        },
                        "revenueRecovered": {
                          "type": "number",
                          "example": 18750
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/customer-behavior": {
      "get": {
        "operationId": "getCustomerBehavior",
        "summary": "تحليلات سلوك العملاء",
        "description": "الحصول على تحليلات سلوك العملاء في السلات لفترة محددة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "الفترة بالأيام",
            "schema": {
              "example": "30",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على تحليلات السلوك بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "averageSessionTime": {
                          "type": "number",
                          "example": 8.5
                        },
                        "averageItemsPerCart": {
                          "type": "number",
                          "example": 2.3
                        },
                        "topAbandonedProducts": {
                          "type": "array"
                        },
                        "peakShoppingHours": {
                          "type": "array"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/revenue-impact": {
      "get": {
        "operationId": "getRevenueImpact",
        "summary": "تحليل تأثير الإيرادات",
        "description": "الحصول على تحليل تأثير السلات المهجورة على الإيرادات لفترة محددة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "الفترة بالأيام",
            "schema": {
              "example": "30",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على تحليل التأثير بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalLostRevenue": {
                          "type": "number",
                          "example": 45000
                        },
                        "potentialRecovery": {
                          "type": "number",
                          "example": 11250
                        },
                        "recoveryPercentage": {
                          "type": "number",
                          "example": 0.25
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/carts/bulk-actions": {
      "post": {
        "operationId": "performBulkActions",
        "summary": "تنفيذ إجراءات جماعية على السلات",
        "description": "تنفيذ إجراءات جماعية على مجموعة من السلات مثل الحذف أو التحديث. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-السلات"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "بيانات الإجراء الجماعي",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "action": {
                    "type": "string",
                    "enum": [
                      "delete",
                      "clear",
                      "update_status"
                    ],
                    "example": "delete",
                    "description": "نوع الإجراء المطلوب تنفيذه"
                  },
                  "cartIds": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": [
                      "507f1f77bcf86cd799439011",
                      "507f1f77bcf86cd799439012"
                    ],
                    "description": "قائمة معرفات السلات"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تنفيذ الإجراء الجماعي بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "تم تنفيذ الإجراء الجماعي: تمت معالجة 25 سلة"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "processed": {
                          "type": "number",
                          "example": 25
                        },
                        "failed": {
                          "type": "number",
                          "example": 0
                        },
                        "errors": {
                          "type": "array"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات الإجراء غير صحيحة"
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/price-rules": {
      "post": {
        "operationId": "createPriceRule",
        "summary": "إنشاء قاعدة تسعير",
        "description": "إنشاء قاعدة تسعير جديدة للتحكم في أسعار المنتجات",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePriceRuleDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء قاعدة التسعير بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011",
                          "description": "معرف قاعدة التسعير"
                        },
                        "name": {
                          "type": "string",
                          "example": "خصم عيد الفطر",
                          "description": "اسم قاعدة التسعير"
                        },
                        "type": {
                          "type": "string",
                          "enum": [
                            "percentage",
                            "fixed",
                            "buy_x_get_y"
                          ],
                          "example": "percentage",
                          "description": "نوع قاعدة التسعير"
                        },
                        "value": {
                          "type": "number",
                          "example": 15,
                          "description": "قيمة الخصم"
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true,
                          "description": "حالة القاعدة"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "403": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "listPriceRules",
        "summary": "قائمة قواعد التسعير",
        "description": "استرداد قائمة بجميع قواعد التسعير المتاحة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة قواعد التسعير بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "507f1f77bcf86cd799439011",
                            "description": "معرف قاعدة التسعير"
                          },
                          "name": {
                            "type": "string",
                            "example": "خصم عيد الفطر",
                            "description": "اسم قاعدة التسعير"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "percentage",
                              "fixed",
                              "buy_x_get_y"
                            ],
                            "example": "percentage",
                            "description": "نوع قاعدة التسعير"
                          },
                          "value": {
                            "type": "number",
                            "example": 15,
                            "description": "قيمة الخصم"
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true,
                            "description": "حالة القاعدة"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/price-rules/{id}": {
      "get": {
        "operationId": "getPriceRule",
        "summary": "الحصول على قاعدة تسعير",
        "description": "استرداد قاعدة تسعير محددة بالمعرف",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف قاعدة التسعير",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد قاعدة التسعير بنجاح"
          },
          "404": {
            "description": "قاعدة التسعير غير موجودة"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updatePriceRule",
        "summary": "تحديث قاعدة تسعير",
        "description": "تحديث قاعدة تسعير موجودة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف قاعدة التسعير",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePriceRuleDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث قاعدة التسعير بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deletePriceRule",
        "summary": "حذف قاعدة تسعير",
        "description": "حذف قاعدة تسعير من النظام",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف قاعدة التسعير",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف قاعدة التسعير بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/price-rules/{id}/toggle": {
      "post": {
        "operationId": "togglePriceRule",
        "summary": "تبديل حالة قاعدة تسعير",
        "description": "تفعيل أو إلغاء تفعيل قاعدة تسعير",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف قاعدة التسعير",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تبديل حالة قاعدة التسعير بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/price-rules/preview": {
      "post": {
        "operationId": "previewPriceRule",
        "summary": "معاينة قاعدة تسعير",
        "description": "معاينة تأثير قاعدة تسعير على منتج معين",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PreviewPriceRuleDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إنشاء المعاينة بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/coupons": {
      "post": {
        "operationId": "createCoupon",
        "summary": "إنشاء كوبون",
        "description": "إنشاء كوبون خصم جديد",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCouponDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء الكوبون بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "listCoupons",
        "summary": "قائمة الكوبونات",
        "description": "استرداد قائمة الكوبونات مع إمكانية التصفية",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة الكوبونات بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/coupons/analytics": {
      "get": {
        "operationId": "getCouponsAnalytics",
        "summary": "إحصائيات الكوبونات",
        "description": "استرداد إحصائيات شاملة عن الكوبونات",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "عدد الأيام للإحصائيات (افتراضي: 30)",
            "schema": {
              "example": 30,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد إحصائيات الكوبونات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalCoupons": {
                          "type": "number",
                          "example": 25
                        },
                        "activeCoupons": {
                          "type": "number",
                          "example": 15
                        },
                        "expiredCoupons": {
                          "type": "number",
                          "example": 5
                        },
                        "totalUses": {
                          "type": "number",
                          "example": 342
                        },
                        "totalLimit": {
                          "type": "number",
                          "example": 500
                        },
                        "usageRate": {
                          "type": "string",
                          "example": "68.40"
                        },
                        "period": {
                          "type": "number",
                          "example": 30
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/coupons/statistics": {
      "get": {
        "operationId": "getCouponsStatistics",
        "summary": "إحصائيات مفصلة للكوبونات",
        "description": "استرداد إحصائيات تفصيلية عن استخدام وأنواع الكوبونات",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "عدد الأيام للإحصائيات (افتراضي: 30)",
            "schema": {
              "example": 30,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات المفصلة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "statusBreakdown": {
                          "type": "object",
                          "properties": {
                            "active": {
                              "type": "number",
                              "example": 15
                            },
                            "inactive": {
                              "type": "number",
                              "example": 3
                            },
                            "expired": {
                              "type": "number",
                              "example": 5
                            },
                            "scheduled": {
                              "type": "number",
                              "example": 2
                            }
                          }
                        },
                        "typeBreakdown": {
                          "type": "object",
                          "properties": {
                            "percentage": {
                              "type": "number",
                              "example": 12
                            },
                            "fixed": {
                              "type": "number",
                              "example": 8
                            },
                            "freeShipping": {
                              "type": "number",
                              "example": 5
                            }
                          }
                        },
                        "topUsedCoupons": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "code": {
                                "type": "string"
                              },
                              "type": {
                                "type": "string",
                                "enum": [
                                  "percentage",
                                  "fixed_amount",
                                  "free_shipping",
                                  "buy_x_get_y"
                                ]
                              },
                              "discountValue": {
                                "type": "number"
                              },
                              "usedCount": {
                                "type": "number"
                              },
                              "usageLimit": {
                                "type": "number"
                              }
                            }
                          }
                        },
                        "period": {
                          "type": "number",
                          "example": 30
                        },
                        "totalInPeriod": {
                          "type": "number",
                          "example": 25
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/coupons/{id}": {
      "get": {
        "operationId": "getCoupon",
        "summary": "الحصول على كوبون",
        "description": "استرداد كوبون محدد بالمعرف",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الكوبون",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الكوبون بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateCoupon",
        "summary": "تحديث كوبون",
        "description": "تحديث كوبون موجود",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الكوبون",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCouponDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث الكوبون بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteCoupon",
        "summary": "حذف كوبون",
        "description": "حذف كوبون من النظام",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الكوبون",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف الكوبون بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/coupons/validate": {
      "post": {
        "operationId": "validateCoupon",
        "summary": "التحقق من صحة كوبون",
        "description": "التحقق من صحة كوبون وإمكانية استخدامه",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateCouponDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم التحقق من الكوبون بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/banners": {
      "post": {
        "operationId": "createBanner",
        "summary": "إنشاء بانر",
        "description": "إنشاء بانر إعلاني جديد. يمكن تحديد أنواع المستخدمين المستهدفين (user, engineer, merchant, admin, super_admin). إذا تركت فارغاً، سيظهر البانر للجميع. يمكن تحديد نوع التنقل: external_url (رابط خارجي)، category (فئة)، product (منتج)، section (قسم في التطبيق)، أو none (بدون تنقل).",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateBannerDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء البانر بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "listBanners",
        "summary": "قائمة البانرات",
        "description": "استرداد قائمة البانرات الإعلانية",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة البانرات بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/banners/analytics": {
      "get": {
        "operationId": "getBannersAnalytics",
        "summary": "إحصائيات البانرات",
        "description": "استرداد إحصائيات الأداء للبانرات الإعلانية",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد إحصائيات البانرات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalBanners": {
                          "type": "number",
                          "example": 10,
                          "description": "إجمالي عدد البانرات"
                        },
                        "activeBanners": {
                          "type": "number",
                          "example": 7,
                          "description": "عدد البانرات النشطة"
                        },
                        "totalViews": {
                          "type": "number",
                          "example": 5420,
                          "description": "إجمالي المشاهدات"
                        },
                        "totalClicks": {
                          "type": "number",
                          "example": 342,
                          "description": "إجمالي النقرات"
                        },
                        "averageCTR": {
                          "type": "number",
                          "example": 6.31,
                          "description": "متوسط معدل النقر (%)"
                        },
                        "topPerforming": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "title": {
                                "type": "string"
                              },
                              "views": {
                                "type": "number"
                              },
                              "clicks": {
                                "type": "number"
                              },
                              "ctr": {
                                "type": "number"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/banners/{id}": {
      "get": {
        "operationId": "getBanner",
        "summary": "الحصول على بانر",
        "description": "استرداد بانر محدد بالمعرف",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف البانر",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد البانر بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateBanner",
        "summary": "تحديث بانر",
        "description": "تحديث بانر موجود",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف البانر",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateBannerDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث البانر بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteBanner",
        "summary": "حذف بانر",
        "description": "حذف بانر من النظام",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف البانر",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف البانر بنجاح"
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/marketing/coupons/export": {
      "post": {
        "operationId": "exportCouponsData",
        "summary": "تصدير بيانات الكوبونات",
        "description": "تصدير بيانات الكوبونات وتحليلاتها بصيغ مختلفة (CSV, Excel, JSON)",
        "parameters": [
          {
            "name": "format",
            "required": false,
            "in": "query",
            "description": "صيغة الملف (csv, xlsx, json)",
            "schema": {
              "example": "csv",
              "type": "string"
            }
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "عدد الأيام للتحليلات (افتراضي: 30)",
            "schema": {
              "example": 30,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تصدير البيانات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "fileUrl": {
                          "type": "string",
                          "example": "https://api.example.com/exports/coupons_data_1698765432.csv"
                        },
                        "format": {
                          "type": "string",
                          "example": "csv"
                        },
                        "exportedAt": {
                          "type": "string",
                          "example": "2024-10-27T12:00:00.000Z"
                        },
                        "fileName": {
                          "type": "string",
                          "example": "coupons_data_1698765432.csv"
                        },
                        "recordCount": {
                          "type": "number",
                          "example": 25
                        },
                        "summary": {
                          "type": "object",
                          "properties": {
                            "totalCoupons": {
                              "type": "number",
                              "example": 25
                            },
                            "activeCoupons": {
                              "type": "number",
                              "example": 15
                            },
                            "expiredCoupons": {
                              "type": "number",
                              "example": 5
                            },
                            "totalUses": {
                              "type": "number",
                              "example": 150
                            },
                            "usageRate": {
                              "type": "string",
                              "example": "75.00"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-التسويق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/marketing/pricing/variant": {
      "get": {
        "operationId": "getVariantPrice",
        "summary": "الحصول على سعر المتغير",
        "description": "استرداد السعر الفعال لمتغير منتج مع تطبيق قواعد التسعير",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد السعر الفعال بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "originalPrice": {
                          "type": "number",
                          "example": 100,
                          "description": "السعر الأصلي"
                        },
                        "effectivePrice": {
                          "type": "number",
                          "example": 85,
                          "description": "السعر الفعال بعد الخصم"
                        },
                        "discountAmount": {
                          "type": "number",
                          "example": 15,
                          "description": "مبلغ الخصم"
                        },
                        "discountPercent": {
                          "type": "number",
                          "example": 15,
                          "description": "نسبة الخصم"
                        },
                        "appliedRules": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "ruleId": {
                                "type": "string",
                                "example": "rule123"
                              },
                              "ruleName": {
                                "type": "string",
                                "example": "خصم عيد الفطر"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "التسويق-العام"
        ]
      }
    },
    "/api/v1/marketing/coupons/validate": {
      "get": {
        "operationId": "validateCoupon",
        "summary": "التحقق من صحة كوبون",
        "description": "التحقق من صحة كوبون الخصم وإمكانية استخدامه",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم التحقق من الكوبون بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "valid": {
                          "type": "boolean",
                          "example": true,
                          "description": "صحة الكوبون"
                        },
                        "discountType": {
                          "type": "string",
                          "enum": [
                            "percentage",
                            "fixed"
                          ],
                          "example": "percentage",
                          "description": "نوع الخصم"
                        },
                        "discountValue": {
                          "type": "number",
                          "example": 15,
                          "description": "قيمة الخصم"
                        },
                        "minimumAmount": {
                          "type": "number",
                          "example": 100,
                          "description": "الحد الأدنى للطلب"
                        },
                        "message": {
                          "type": "string",
                          "example": "كوبون صالح",
                          "description": "رسالة التحقق"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "كوبون غير صحيح أو منتهي الصلاحية"
          }
        },
        "tags": [
          "التسويق-العام"
        ]
      }
    },
    "/api/v1/marketing/banners": {
      "get": {
        "operationId": "getActiveBanners",
        "summary": "الحصول على البانرات النشطة",
        "description": "استرداد قائمة البانرات الإعلانية النشطة حسب الموقع ونوع المستخدم. إذا كان المستخدم مسجل دخول، سيتم عرض البانرات المتوافقة مع أدواره. للمستخدمين غير المسجلين، سيتم عرض البانرات العامة فقط.",
        "parameters": [
          {
            "name": "location",
            "required": false,
            "in": "query",
            "description": "موقع عرض البانر",
            "schema": {
              "enum": [
                "home_top",
                "home_middle",
                "home_bottom",
                "category_top",
                "product_page",
                "cart_page",
                "checkout_page",
                "sidebar",
                "footer"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد البانرات النشطة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "banner123",
                            "description": "معرف البانر"
                          },
                          "title": {
                            "type": "string",
                            "example": "عرض خاص",
                            "description": "عنوان البانر"
                          },
                          "imageUrl": {
                            "type": "string",
                            "example": "https://cdn.example.com/banner.jpg",
                            "description": "رابط صورة البانر"
                          },
                          "linkUrl": {
                            "type": "string",
                            "example": "https://example.com/special-offer",
                            "description": "رابط البانر (للتوافق مع الإصدارات القديمة)"
                          },
                          "navigationType": {
                            "type": "string",
                            "enum": [
                              "external_url",
                              "category",
                              "product",
                              "section",
                              "none"
                            ],
                            "example": "category",
                            "description": "نوع التنقل: external_url, category, product, section, none"
                          },
                          "navigationTarget": {
                            "type": "string",
                            "example": "category123",
                            "description": "الهدف من التنقل: معرف الفئة، معرف المنتج، اسم القسم، أو رابط خارجي"
                          },
                          "navigationParams": {
                            "type": "object",
                            "example": {},
                            "description": "معاملات إضافية للتنقل"
                          },
                          "location": {
                            "type": "string",
                            "enum": [
                              "home_top",
                              "home_middle",
                              "home_bottom",
                              "category_top",
                              "product_page",
                              "cart_page",
                              "checkout_page",
                              "sidebar",
                              "footer"
                            ],
                            "example": "home",
                            "description": "موقع البانر"
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true,
                            "description": "حالة البانر"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "التسويق-العام"
        ]
      }
    },
    "/api/v1/marketing/banners/{id}/view": {
      "get": {
        "operationId": "trackBannerView",
        "summary": "تتبع مشاهدة البانر",
        "description": "تسجيل مشاهدة لبانر معين (يستخدم للإحصائيات)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف البانر",
            "schema": {
              "example": "banner123",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تسجيل المشاهدة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true,
                      "description": "نجاح العملية"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "التسويق-العام"
        ]
      }
    },
    "/api/v1/marketing/banners/{id}/click": {
      "get": {
        "operationId": "trackBannerClick",
        "summary": "تتبع نقر البانر",
        "description": "تسجيل نقرة لبانر معين (يستخدم للإحصائيات)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف البانر",
            "schema": {
              "example": "banner123",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تسجيل النقرة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true,
                      "description": "نجاح العملية"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "التسويق-العام"
        ]
      }
    },
    "/api/v1/addresses": {
      "get": {
        "operationId": "list",
        "summary": "الحصول على جميع عناوين المستخدم",
        "parameters": [
          {
            "name": "includeDeleted",
            "required": false,
            "in": "query",
            "description": "تضمين العناوين المحذوفة مؤقتاً",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب العناوين بنجاح"
          },
          "401": {
            "description": "غير مصرح له"
          }
        },
        "tags": [
          "العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "post": {
        "operationId": "create",
        "summary": "إنشاء عنوان جديد",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAddressDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء العنوان بنجاح"
          },
          "400": {
            "description": "خطأ في التحقق من البيانات"
          },
          "401": {
            "description": "غير مصرح له"
          }
        },
        "tags": [
          "العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/addresses/active": {
      "get": {
        "operationId": "getActive",
        "summary": "الحصول على العناوين النشطة فقط",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب العناوين النشطة بنجاح"
          },
          "401": {
            "description": "غير مصرح له"
          }
        },
        "tags": [
          "العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/addresses/default": {
      "get": {
        "operationId": "getDefault",
        "summary": "الحصول على العنوان الافتراضي",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب العنوان الافتراضي بنجاح (أو null إذا لم يكن موجوداً)"
          },
          "401": {
            "description": "غير مصرح له"
          }
        },
        "tags": [
          "العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/addresses/{id}": {
      "get": {
        "operationId": "getAddress",
        "summary": "الحصول على عنوان بالمعرف",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العنوان",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب العنوان بنجاح"
          },
          "401": {
            "description": "غير مصرح له"
          }
        },
        "tags": [
          "العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "update",
        "summary": "تحديث العنوان",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العنوان",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAddressDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث العنوان بنجاح"
          },
          "400": {
            "description": "خطأ في التحقق من البيانات"
          },
          "401": {
            "description": "غير مصرح له"
          }
        },
        "tags": [
          "العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "remove",
        "summary": "حذف العنوان (حذف مؤقت)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العنوان",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف العنوان بنجاح"
          },
          "401": {
            "description": "غير مصرح له"
          }
        },
        "tags": [
          "العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/addresses/{id}/set-default": {
      "post": {
        "operationId": "setDefault",
        "summary": "تعيين العنوان كافتراضي",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العنوان",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تعيين العنوان الافتراضي بنجاح"
          },
          "401": {
            "description": "غير مصرح له"
          }
        },
        "tags": [
          "العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/addresses/{id}/restore": {
      "post": {
        "operationId": "restore",
        "summary": "استعادة العنوان المحذوف",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العنوان",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استعادة العنوان بنجاح"
          },
          "401": {
            "description": "غير مصرح له"
          }
        },
        "tags": [
          "العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/addresses/validate/{id}": {
      "get": {
        "operationId": "validateOwnership",
        "summary": "التحقق من ملكية العنوان",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العنوان",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "نتيجة التحقق من الملكية"
          },
          "401": {
            "description": "غير مصرح له"
          }
        },
        "tags": [
          "العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/stats": {
      "get": {
        "operationId": "getStats",
        "summary": "الحصول على إحصائيات شاملة للعناوين",
        "description": "استرداد إحصائيات مفصلة حول العناوين في النظام",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "totalAddresses": {
                      "type": "number",
                      "example": 1250,
                      "description": "إجمالي عدد العناوين (بما في ذلك المحذوفة)"
                    },
                    "totalActiveAddresses": {
                      "type": "number",
                      "example": 1180,
                      "description": "عدد العناوين النشطة"
                    },
                    "totalDeletedAddresses": {
                      "type": "number",
                      "example": 70,
                      "description": "عدد العناوين المحذوفة"
                    },
                    "totalUsers": {
                      "type": "number",
                      "example": 450,
                      "description": "عدد المستخدمين الذين لديهم عناوين"
                    },
                    "averagePerUser": {
                      "type": "number",
                      "example": 2.8,
                      "description": "متوسط عدد العناوين لكل مستخدم"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذه البيانات"
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/top-cities": {
      "get": {
        "operationId": "getTopCities",
        "summary": "المدن الأكثر استخداماً",
        "description": "استرداد قائمة بالمدن الأكثر استخداماً في العناوين مرتبة تنازلياً",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد المدن المراد عرضها",
            "schema": {
              "example": 10,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد المدن الأكثر استخداماً بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "city": {
                            "type": "string",
                            "example": "صنعاء",
                            "description": "اسم المدينة"
                          },
                          "count": {
                            "type": "number",
                            "example": 450,
                            "description": "عدد العناوين"
                          },
                          "activeCount": {
                            "type": "number",
                            "example": 420,
                            "description": "عدد العناوين النشطة"
                          },
                          "defaultCount": {
                            "type": "number",
                            "example": 150,
                            "description": "عدد العناوين الافتراضية"
                          },
                          "totalUsage": {
                            "type": "number",
                            "example": 1250,
                            "description": "إجمالي مرات الاستخدام"
                          },
                          "percentage": {
                            "type": "number",
                            "example": 36.5,
                            "description": "النسبة المئوية من إجمالي العناوين"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/most-used": {
      "get": {
        "operationId": "getMostUsedAddresses",
        "summary": "العناوين الأكثر استخداماً",
        "description": "استرداد قائمة بالعناوين الأكثر استخداماً مع معلومات المستخدمين",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العناوين المراد عرضها",
            "schema": {
              "example": 10,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد العناوين الأكثر استخداماً بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "507f1f77bcf86cd799439011"
                          },
                          "label": {
                            "type": "string",
                            "example": "المنزل"
                          },
                          "line1": {
                            "type": "string",
                            "example": "شارع الستين، بجوار مطعم السلطان"
                          },
                          "city": {
                            "type": "string",
                            "example": "صنعاء"
                          },
                          "usageCount": {
                            "type": "number",
                            "example": 15
                          },
                          "lastUsedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "userId": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string",
                                "example": "أحمد محمد"
                              },
                              "phone": {
                                "type": "string",
                                "example": "+967771234567"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/recently-used": {
      "get": {
        "operationId": "getRecentlyUsedAddresses",
        "summary": "العناوين المستخدمة مؤخراً",
        "description": "استرداد قائمة بالعناوين التي تم استخدامها مؤخراً",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العناوين المراد عرضها",
            "schema": {
              "example": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد العناوين المستخدمة مؤخراً بنجاح"
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/never-used": {
      "get": {
        "operationId": "getNeverUsedAddresses",
        "summary": "العناوين التي لم تستخدم أبداً",
        "description": "استرداد قائمة بالعناوين التي لم يتم استخدامها مطلقاً",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العناوين المراد عرضها",
            "schema": {
              "example": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد العناوين غير المستخدمة بنجاح"
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/usage-analytics": {
      "get": {
        "operationId": "getUsageAnalytics",
        "summary": "تحليلات استخدام العناوين",
        "description": "استرداد تحليلات مفصلة حول استخدام العناوين في النظام",
        "parameters": [
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية (YYYY-MM-DD)",
            "schema": {
              "example": "2024-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية (YYYY-MM-DD)",
            "schema": {
              "example": "2024-12-31",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تحليلات الاستخدام بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "stats": {
                          "type": "object",
                          "properties": {
                            "totalUsage": {
                              "type": "number",
                              "example": 3500
                            },
                            "avgUsage": {
                              "type": "number",
                              "example": 2.8
                            },
                            "maxUsage": {
                              "type": "number",
                              "example": 25
                            },
                            "addressesUsed": {
                              "type": "number",
                              "example": 1050
                            },
                            "addressesNeverUsed": {
                              "type": "number",
                              "example": 130
                            }
                          }
                        },
                        "dailyTrend": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "2024-01-15"
                              },
                              "count": {
                                "type": "number",
                                "example": 45
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/geographic-analytics": {
      "get": {
        "operationId": "getGeographicAnalytics",
        "summary": "التحليل الجغرافي للعناوين",
        "description": "استرداد بيانات التوزيع الجغرافي للعناوين (للخرائط الحرارية)",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد التحليل الجغرافي بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "cityDistribution": {
                          "type": "array",
                          "description": "توزيع العناوين حسب المدينة"
                        },
                        "coordinates": {
                          "type": "array",
                          "description": "جميع الإحداثيات (لخريطة حرارية)",
                          "items": {
                            "type": "object",
                            "properties": {
                              "lat": {
                                "type": "number",
                                "example": 15.3694
                              },
                              "lng": {
                                "type": "number",
                                "example": 44.191
                              },
                              "city": {
                                "type": "string",
                                "example": "صنعاء"
                              },
                              "label": {
                                "type": "string",
                                "example": "المنزل"
                              }
                            }
                          }
                        },
                        "totalPoints": {
                          "type": "number",
                          "example": 1250
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/list": {
      "get": {
        "operationId": "listAddresses",
        "summary": "قائمة جميع العناوين مع فلترة وبحث",
        "description": "استرداد جميع العناوين في النظام مع دعم الفلترة والبحث والترتيب",
        "parameters": [
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "تصفية حسب معرف المستخدم",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "city",
            "required": false,
            "in": "query",
            "description": "تصفية حسب المدينة",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "label",
            "required": false,
            "in": "query",
            "description": "تصفية حسب التسمية",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "isDefault",
            "required": false,
            "in": "query",
            "description": "العناوين الافتراضية فقط",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "isActive",
            "required": false,
            "in": "query",
            "description": "العناوين النشطة فقط",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "includeDeleted",
            "required": false,
            "in": "query",
            "description": "تضمين المحذوفة",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "deletedOnly",
            "required": false,
            "in": "query",
            "description": "عرض العناوين المحذوفة فقط",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "البحث في النص",
            "schema": {
              "example": "شارع",
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد النتائج",
            "schema": {
              "default": 20,
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "default": 1,
              "type": "number"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "الترتيب حسب",
            "schema": {
              "enum": [
                "createdAt",
                "usageCount",
                "lastUsedAt"
              ],
              "type": "string"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "اتجاه الترتيب",
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة العناوين بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "description": "قائمة العناوين مع معلومات المستخدمين"
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "number",
                          "example": 1250
                        },
                        "page": {
                          "type": "number",
                          "example": 1
                        },
                        "limit": {
                          "type": "number",
                          "example": 20
                        },
                        "pages": {
                          "type": "number",
                          "example": 63
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/user/{userId}": {
      "get": {
        "operationId": "getUserAddresses",
        "summary": "الحصول على عناوين مستخدم محدد",
        "description": "استرداد جميع عناوين مستخدم محدد مع معلومات المستخدم",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "description": "معرف المستخدم",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "includeDeleted",
            "required": false,
            "in": "query",
            "description": "تضمين العناوين المحذوفة",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد عناوين المستخدم بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "description": "قائمة العناوين"
                    },
                    "count": {
                      "type": "number",
                      "example": 3
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "المستخدم غير موجود"
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/user/{userId}/count": {
      "get": {
        "operationId": "getUserAddressCount",
        "summary": "عدد عناوين مستخدم محدد",
        "description": "الحصول على عدد العناوين النشطة لمستخدم محدد",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "description": "معرف المستخدم",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد العدد بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "userId": {
                          "type": "string",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "count": {
                          "type": "number",
                          "example": 3
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/addresses/nearby": {
      "get": {
        "operationId": "searchNearbyAddresses",
        "summary": "البحث عن عناوين قريبة من نقطة معينة",
        "description": "استرداد العناوين القريبة من إحداثيات معينة (مفيد للتخطيط اللوجستي)",
        "parameters": [
          {
            "name": "lat",
            "required": true,
            "in": "query",
            "description": "خط العرض",
            "schema": {
              "example": 15.3694,
              "type": "string"
            }
          },
          {
            "name": "lng",
            "required": true,
            "in": "query",
            "description": "خط الطول",
            "schema": {
              "example": 44.191,
              "type": "string"
            }
          },
          {
            "name": "radius",
            "required": false,
            "in": "query",
            "description": "نصف القطر بالكيلومتر",
            "schema": {
              "example": 10,
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد النتائج",
            "schema": {
              "example": 20,
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد العناوين القريبة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "description": "العناوين القريبة مرتبة حسب المسافة"
                    },
                    "searchParams": {
                      "type": "object",
                      "properties": {
                        "lat": {
                          "type": "number",
                          "example": 15.3694
                        },
                        "lng": {
                          "type": "number",
                          "example": 44.191
                        },
                        "radiusKm": {
                          "type": "number",
                          "example": 10
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-العناوين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-settings/public": {
      "get": {
        "operationId": "getPublicSettings",
        "summary": "الحصول على الإعدادات العامة (عام)",
        "description": "إعدادات النظام المتاحة للعموم",
        "parameters": [
          {
            "name": "category",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "general",
                "email",
                "payment",
                "shipping",
                "security",
                "notifications",
                "seo",
                "advanced"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الإعدادات العامة بنجاح"
          }
        },
        "tags": [
          "إعدادات النظام"
        ]
      }
    },
    "/api/v1/system-settings": {
      "post": {
        "operationId": "createSetting",
        "summary": "إنشاء إعداد جديد",
        "description": "إضافة إعداد جديد للنظام",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSettingDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء الإعداد بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SettingDto"
                }
              }
            }
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "getAllSettings",
        "summary": "الحصول على جميع الإعدادات",
        "description": "استرداد جميع إعدادات النظام",
        "parameters": [
          {
            "name": "category",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "general",
                "email",
                "payment",
                "shipping",
                "security",
                "notifications",
                "seo",
                "advanced"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الإعدادات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SettingDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-settings/category/{category}": {
      "get": {
        "operationId": "getSettingsByCategory",
        "summary": "الحصول على إعدادات فئة معينة",
        "description": "استرداد الإعدادات حسب الفئة كـ key-value pairs",
        "parameters": [
          {
            "name": "category",
            "required": true,
            "in": "path",
            "schema": {
              "enum": [
                "general",
                "email",
                "payment",
                "shipping",
                "security",
                "notifications",
                "seo",
                "advanced"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد إعدادات الفئة بنجاح"
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-settings/bulk": {
      "put": {
        "operationId": "bulkUpdate",
        "summary": "تحديث عدة إعدادات",
        "description": "تحديث إعدادات متعددة دفعة واحدة",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkUpdateSettingsDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث الإعدادات بنجاح"
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-settings/payment-accounts": {
      "get": {
        "operationId": "getAllPaymentAccounts",
        "summary": "جميع حسابات الدفع المحلية",
        "description": "الحصول على جميع الحسابات المحلية (مفصلة)",
        "parameters": [
          {
            "name": "activeOnly",
            "required": false,
            "in": "query",
            "description": "عرض الحسابات المفعلة فقط",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على الحسابات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LocalPaymentAccountResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "post": {
        "operationId": "createPaymentAccount",
        "summary": "إنشاء حساب دفع محلي",
        "description": "إضافة حساب دفع محلي جديد",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateLocalPaymentAccountDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء الحساب بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LocalPaymentAccountResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-settings/payment-accounts/grouped": {
      "get": {
        "operationId": "getGroupedPaymentAccounts",
        "summary": "حسابات الدفع المحلية مجمعة",
        "description": "الحصول على الحسابات المحلية مجمعة حسب اسم البنك",
        "parameters": [
          {
            "name": "activeOnly",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على الحسابات المجمعة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GroupedPaymentAccountDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-settings/payment-accounts/public": {
      "get": {
        "operationId": "getPublicPaymentAccounts",
        "summary": "حسابات الدفع المتاحة (عام)",
        "description": "عرض حسابات الدفع المحلية للعملاء - مجمعة حسب البنك",
        "parameters": [
          {
            "name": "currency",
            "required": false,
            "in": "query",
            "description": "فلترة حسب العملة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على الحسابات العامة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GroupedPaymentAccountDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إعدادات النظام"
        ]
      }
    },
    "/api/v1/system-settings/payment-accounts/{id}": {
      "put": {
        "operationId": "updatePaymentAccount",
        "summary": "تحديث حساب دفع محلي",
        "description": "تعديل حساب دفع محلي موجود",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الحساب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLocalPaymentAccountDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث الحساب بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LocalPaymentAccountResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deletePaymentAccount",
        "summary": "حذف حساب دفع محلي",
        "description": "حذف حساب دفع محلي من النظام",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الحساب",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف الحساب بنجاح"
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-settings/{key}": {
      "get": {
        "operationId": "getSetting",
        "summary": "الحصول على إعداد بالمفتاح",
        "description": "استرداد إعداد معين",
        "parameters": [
          {
            "name": "key",
            "required": true,
            "in": "path",
            "description": "مفتاح الإعداد",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الإعداد بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SettingDto"
                }
              }
            }
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "put": {
        "operationId": "updateSetting",
        "summary": "تحديث إعداد",
        "description": "تعديل قيمة إعداد موجود",
        "parameters": [
          {
            "name": "key",
            "required": true,
            "in": "path",
            "description": "مفتاح الإعداد",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSettingDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث الإعداد بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SettingDto"
                }
              }
            }
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteSetting",
        "summary": "حذف إعداد",
        "description": "حذف إعداد من النظام",
        "parameters": [
          {
            "name": "key",
            "required": true,
            "in": "path",
            "description": "مفتاح الإعداد",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف الإعداد بنجاح"
          }
        },
        "tags": [
          "إعدادات النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/support/tickets": {
      "post": {
        "operationId": "createTicket",
        "summary": "إنشاء تذكرة دعم جديدة",
        "description": "إنشاء تذكرة دعم جديدة من قبل العميل",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSupportTicketDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء التذكرة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "ticket123",
                          "description": "معرف التذكرة الجديدة"
                        },
                        "title": {
                          "type": "string",
                          "example": "مشكلة في تسجيل الدخول",
                          "description": "عنوان التذكرة"
                        },
                        "description": {
                          "type": "string",
                          "example": "لا يمكنني تسجيل الدخول إلى حسابي",
                          "description": "وصف المشكلة"
                        },
                        "status": {
                          "type": "string",
                          "example": "open",
                          "description": "حالة التذكرة"
                        },
                        "priority": {
                          "type": "string",
                          "example": "medium",
                          "description": "أولوية التذكرة"
                        },
                        "category": {
                          "type": "string",
                          "example": "technical",
                          "description": "فئة التذكرة"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T10:30:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "دعم-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/support/tickets/my": {
      "get": {
        "operationId": "getMyTickets",
        "summary": "تذاكري",
        "description": "استرداد قائمة بجميع تذاكر الدعم الخاصة بالعميل",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد التذاكر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "ticket123",
                            "description": "معرف التذكرة"
                          },
                          "title": {
                            "type": "string",
                            "example": "مشكلة في تسجيل الدخول",
                            "description": "عنوان التذكرة"
                          },
                          "status": {
                            "type": "string",
                            "example": "in_progress",
                            "description": "حالة التذكرة"
                          },
                          "priority": {
                            "type": "string",
                            "example": "medium",
                            "description": "أولوية التذكرة"
                          },
                          "category": {
                            "type": "string",
                            "example": "technical",
                            "description": "فئة التذكرة"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00Z"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T11:00:00Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "دعم-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/support/tickets/{id}": {
      "get": {
        "operationId": "getTicket",
        "summary": "تفاصيل التذكرة",
        "description": "استرداد تفاصيل كاملة لتذكرة دعم محددة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التذكرة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تفاصيل التذكرة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "ticket123",
                          "description": "معرف التذكرة"
                        },
                        "title": {
                          "type": "string",
                          "example": "مشكلة في تسجيل الدخول",
                          "description": "عنوان التذكرة"
                        },
                        "description": {
                          "type": "string",
                          "example": "لا يمكنني تسجيل الدخول إلى حسابي",
                          "description": "وصف المشكلة"
                        },
                        "status": {
                          "type": "string",
                          "example": "in_progress",
                          "description": "حالة التذكرة"
                        },
                        "priority": {
                          "type": "string",
                          "example": "medium",
                          "description": "أولوية التذكرة"
                        },
                        "category": {
                          "type": "string",
                          "example": "technical",
                          "description": "فئة التذكرة"
                        },
                        "messages": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "msg123",
                                "description": "معرف الرسالة"
                              },
                              "content": {
                                "type": "string",
                                "example": "نحن نعمل على حل المشكلة",
                                "description": "محتوى الرسالة"
                              },
                              "senderType": {
                                "type": "string",
                                "example": "admin",
                                "description": "نوع المرسل"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2024-01-15T11:00:00Z"
                              }
                            }
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T10:30:00Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T11:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذه التذكرة"
          },
          "404": {
            "description": "لم يتم العثور على التذكرة"
          }
        },
        "tags": [
          "دعم-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/support/tickets/{id}/messages": {
      "get": {
        "operationId": "getTicketMessages",
        "summary": "رسائل التذكرة",
        "description": "استرداد جميع رسائل تذكرة دعم محددة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التذكرة",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد الرسائل في الصفحة",
            "schema": {
              "example": 50,
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "example": 1,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الرسائل بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "msg123",
                            "description": "معرف الرسالة"
                          },
                          "content": {
                            "type": "string",
                            "example": "نحن نعمل على حل المشكلة",
                            "description": "محتوى الرسالة"
                          },
                          "senderType": {
                            "type": "string",
                            "example": "admin",
                            "description": "نوع المرسل"
                          },
                          "attachments": {
                            "type": "array",
                            "items": {
                              "type": "string",
                              "example": "https://example.com/file.pdf"
                            }
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T11:00:00Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذه التذكرة"
          },
          "404": {
            "description": "لم يتم العثور على التذكرة"
          }
        },
        "tags": [
          "دعم-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "post": {
        "operationId": "addMessage",
        "summary": "إضافة رسالة للتذكرة",
        "description": "إضافة رسالة جديدة لتذكرة دعم من قبل العميل",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التذكرة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddSupportMessageDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إضافة الرسالة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "msg123",
                          "description": "معرف الرسالة الجديدة"
                        },
                        "content": {
                          "type": "string",
                          "example": "أرجو التحقق من البريد الإلكتروني أيضاً",
                          "description": "محتوى الرسالة"
                        },
                        "senderType": {
                          "type": "string",
                          "example": "customer",
                          "description": "نوع المرسل"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T12:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذه التذكرة"
          },
          "404": {
            "description": "لم يتم العثور على التذكرة"
          }
        },
        "tags": [
          "دعم-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/support/tickets/{id}/archive": {
      "put": {
        "operationId": "archiveTicket",
        "summary": "أرشفة التذكرة",
        "description": "أرشفة تذكرة دعم من قبل العميل",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التذكرة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم أرشفة التذكرة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Ticket archived successfully"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بأرشفة هذه التذكرة"
          },
          "404": {
            "description": "لم يتم العثور على التذكرة"
          }
        },
        "tags": [
          "دعم-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/support/tickets/{id}/rate": {
      "post": {
        "operationId": "rateTicket",
        "summary": "تقييم التذكرة",
        "description": "تقييم خدمة الدعم المقدمة للتذكرة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التذكرة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RateTicketDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إرسال التقييم بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "ticket123",
                          "description": "معرف التذكرة"
                        },
                        "rating": {
                          "type": "number",
                          "example": 5,
                          "description": "التقييم من 1-5"
                        },
                        "ratingComment": {
                          "type": "string",
                          "example": "خدمة ممتازة وسريعة",
                          "description": "تعليق التقييم"
                        },
                        "ratedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T16:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "التذكرة غير مكتملة أو تم تقييمها مسبقاً"
          },
          "403": {
            "description": "غير مصرح لك بتقييم هذه التذكرة"
          },
          "404": {
            "description": "لم يتم العثور على التذكرة"
          }
        },
        "tags": [
          "دعم-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/support/tickets": {
      "get": {
        "operationId": "getAllTickets",
        "summary": "قائمة تذاكر الدعم",
        "description": "استرداد قائمة بجميع تذاكر الدعم مع إمكانية التصفية والترقيم",
        "parameters": [
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "حالة التذكرة",
            "schema": {
              "enum": [
                "open",
                "in_progress",
                "waiting_for_user",
                "resolved",
                "closed"
              ],
              "type": "string"
            }
          },
          {
            "name": "priority",
            "required": false,
            "in": "query",
            "description": "أولوية التذكرة",
            "schema": {
              "enum": [
                "low",
                "medium",
                "high",
                "urgent"
              ],
              "type": "string"
            }
          },
          {
            "name": "category",
            "required": false,
            "in": "query",
            "description": "فئة التذكرة",
            "schema": {
              "enum": [
                "technical",
                "billing",
                "products",
                "services",
                "account",
                "other"
              ],
              "type": "string"
            }
          },
          {
            "name": "assignedTo",
            "required": false,
            "in": "query",
            "description": "معرف الموظف المسؤول",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العناصر في الصفحة",
            "schema": {
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "example": 1,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة التذاكر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "ticket123",
                            "description": "معرف التذكرة"
                          },
                          "title": {
                            "type": "string",
                            "example": "مشكلة في تسجيل الدخول",
                            "description": "عنوان التذكرة"
                          },
                          "status": {
                            "type": "string",
                            "example": "open",
                            "description": "حالة التذكرة"
                          },
                          "priority": {
                            "type": "string",
                            "example": "high",
                            "description": "أولوية التذكرة"
                          },
                          "category": {
                            "type": "string",
                            "example": "technical",
                            "description": "فئة التذكرة"
                          },
                          "customerId": {
                            "type": "string",
                            "example": "user456",
                            "description": "معرف العميل"
                          },
                          "customerName": {
                            "type": "string",
                            "example": "أحمد محمد",
                            "description": "اسم العميل"
                          },
                          "assignedTo": {
                            "type": "string",
                            "example": "admin789",
                            "description": "معرف الموظف المسؤول"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00Z"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T11:00:00Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى تذاكر الدعم"
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/support/tickets/{id}": {
      "get": {
        "operationId": "getTicket",
        "summary": "تفاصيل تذكرة الدعم",
        "description": "استرداد تفاصيل كاملة لتذكرة دعم محددة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التذكرة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تفاصيل التذكرة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "ticket123",
                          "description": "معرف التذكرة"
                        },
                        "title": {
                          "type": "string",
                          "example": "مشكلة في تسجيل الدخول",
                          "description": "عنوان التذكرة"
                        },
                        "description": {
                          "type": "string",
                          "example": "لا يمكنني تسجيل الدخول إلى حسابي",
                          "description": "وصف المشكلة"
                        },
                        "status": {
                          "type": "string",
                          "example": "in_progress",
                          "description": "حالة التذكرة"
                        },
                        "priority": {
                          "type": "string",
                          "example": "high",
                          "description": "أولوية التذكرة"
                        },
                        "category": {
                          "type": "string",
                          "example": "technical",
                          "description": "فئة التذكرة"
                        },
                        "customerId": {
                          "type": "string",
                          "example": "user456",
                          "description": "معرف العميل"
                        },
                        "customerName": {
                          "type": "string",
                          "example": "أحمد محمد",
                          "description": "اسم العميل"
                        },
                        "assignedTo": {
                          "type": "string",
                          "example": "admin789",
                          "description": "معرف الموظف المسؤول"
                        },
                        "messages": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "msg123",
                                "description": "معرف الرسالة"
                              },
                              "content": {
                                "type": "string",
                                "example": "نحن نعمل على حل المشكلة",
                                "description": "محتوى الرسالة"
                              },
                              "senderId": {
                                "type": "string",
                                "example": "admin789",
                                "description": "معرف المرسل"
                              },
                              "senderType": {
                                "type": "string",
                                "example": "admin",
                                "description": "نوع المرسل"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2024-01-15T11:00:00Z"
                              }
                            }
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T10:30:00Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T11:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذه التذكرة"
          },
          "404": {
            "description": "لم يتم العثور على التذكرة"
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateTicket",
        "summary": "تحديث تذكرة الدعم",
        "description": "تحديث حالة أو تفاصيل تذكرة دعم من قبل الإدارة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التذكرة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSupportTicketDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث التذكرة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "ticket123",
                          "description": "معرف التذكرة"
                        },
                        "status": {
                          "type": "string",
                          "example": "resolved",
                          "description": "الحالة الجديدة"
                        },
                        "priority": {
                          "type": "string",
                          "example": "medium",
                          "description": "الأولوية الجديدة"
                        },
                        "assignedTo": {
                          "type": "string",
                          "example": "admin789",
                          "description": "معرف الموظف المسؤول"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T12:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "404": {
            "description": "لم يتم العثور على التذكرة"
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/support/tickets/{id}/messages": {
      "get": {
        "operationId": "getTicketMessages",
        "summary": "رسائل تذكرة الدعم",
        "description": "استرداد جميع رسائل تذكرة دعم محددة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التذكرة",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد الرسائل في الصفحة",
            "schema": {
              "example": 50,
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "example": 1,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الرسائل بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "msg123",
                            "description": "معرف الرسالة"
                          },
                          "content": {
                            "type": "string",
                            "example": "نحن نعمل على حل المشكلة",
                            "description": "محتوى الرسالة"
                          },
                          "senderId": {
                            "type": "string",
                            "example": "admin789",
                            "description": "معرف المرسل"
                          },
                          "senderType": {
                            "type": "string",
                            "example": "admin",
                            "description": "نوع المرسل"
                          },
                          "attachments": {
                            "type": "array",
                            "items": {
                              "type": "string",
                              "example": "https://example.com/file.pdf"
                            }
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T11:00:00Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "لم يتم العثور على التذكرة"
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "post": {
        "operationId": "addMessage",
        "summary": "إضافة رسالة لتذكرة الدعم",
        "description": "إضافة رسالة جديدة لتذكرة دعم من قبل الإدارة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التذكرة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddSupportMessageDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إضافة الرسالة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "msg123",
                          "description": "معرف الرسالة الجديدة"
                        },
                        "content": {
                          "type": "string",
                          "example": "تم حل المشكلة بنجاح",
                          "description": "محتوى الرسالة"
                        },
                        "senderId": {
                          "type": "string",
                          "example": "admin789",
                          "description": "معرف المرسل"
                        },
                        "senderType": {
                          "type": "string",
                          "example": "admin",
                          "description": "نوع المرسل"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T12:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "404": {
            "description": "لم يتم العثور على التذكرة"
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/support/stats": {
      "get": {
        "operationId": "getStats",
        "summary": "إحصائيات الدعم",
        "description": "استرداد إحصائيات شاملة حول تذاكر الدعم",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalTickets": {
                          "type": "number",
                          "example": 1250,
                          "description": "إجمالي التذاكر"
                        },
                        "openTickets": {
                          "type": "number",
                          "example": 45,
                          "description": "التذاكر المفتوحة"
                        },
                        "resolvedTickets": {
                          "type": "number",
                          "example": 1182,
                          "description": "التذاكر المحلولة"
                        },
                        "pendingTickets": {
                          "type": "number",
                          "example": 23,
                          "description": "التذاكر المعلقة"
                        },
                        "averageResponseTime": {
                          "type": "number",
                          "example": 2.5,
                          "description": "متوسط وقت الرد (ساعات)"
                        },
                        "averageResolutionTime": {
                          "type": "number",
                          "example": 24.3,
                          "description": "متوسط وقت الحل (ساعات)"
                        },
                        "slaCompliance": {
                          "type": "number",
                          "example": 92.5,
                          "description": "نسبة الامتثال لـ SLA (%)"
                        },
                        "ticketsByPriority": {
                          "type": "object",
                          "properties": {
                            "low": {
                              "type": "number",
                              "example": 450
                            },
                            "medium": {
                              "type": "number",
                              "example": 350
                            },
                            "high": {
                              "type": "number",
                              "example": 250
                            },
                            "urgent": {
                              "type": "number",
                              "example": 200
                            }
                          }
                        },
                        "ticketsByCategory": {
                          "type": "object",
                          "properties": {
                            "technical": {
                              "type": "number",
                              "example": 400
                            },
                            "billing": {
                              "type": "number",
                              "example": 300
                            },
                            "general": {
                              "type": "number",
                              "example": 550
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/support/sla/breached": {
      "get": {
        "operationId": "getBreachedSLATickets",
        "summary": "التذاكر التي انتهكت SLA",
        "description": "استرداد التذاكر التي تجاوزت وقت الاستجابة أو الحل المحدد في اتفاقية مستوى الخدمة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد التذاكر المخالفة لـ SLA بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "ticket123",
                            "description": "معرف التذكرة"
                          },
                          "title": {
                            "type": "string",
                            "example": "مشكلة في تسجيل الدخول",
                            "description": "عنوان التذكرة"
                          },
                          "priority": {
                            "type": "string",
                            "example": "high",
                            "description": "أولوية التذكرة"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00Z"
                          },
                          "slaBreachTime": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T12:30:00Z"
                          },
                          "breachType": {
                            "type": "string",
                            "example": "response_time",
                            "description": "نوع الانتهاك"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/support/sla/{id}/check": {
      "post": {
        "operationId": "checkSLAStatus",
        "summary": "فحص حالة SLA للتذكرة",
        "description": "فحص ما إذا كانت التذكرة قد انتهكت اتفاقية مستوى الخدمة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التذكرة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم فحص حالة SLA بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "ticketId": {
                          "type": "string",
                          "example": "ticket123"
                        },
                        "slaBreached": {
                          "type": "boolean",
                          "example": false,
                          "description": "هل تم انتهاك SLA"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "لم يتم العثور على التذكرة"
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/support/canned-responses": {
      "post": {
        "operationId": "createCannedResponse",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCannedResponseDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "getCannedResponses",
        "parameters": [
          {
            "name": "category",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "technical",
                "billing",
                "products",
                "services",
                "account",
                "other"
              ],
              "type": "string"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/support/canned-responses/{id}": {
      "get": {
        "operationId": "getCannedResponse",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Canned Response ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateCannedResponse",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Canned Response ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCannedResponseDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/support/canned-responses/{id}/use": {
      "post": {
        "operationId": "useCannedResponse",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Canned Response ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/support/canned-responses/shortcut/{shortcut}": {
      "get": {
        "operationId": "getCannedResponseByShortcut",
        "parameters": [
          {
            "name": "shortcut",
            "required": true,
            "in": "path",
            "description": "Canned Response Shortcut",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الدعم"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users": {
      "get": {
        "operationId": "listUsers",
        "summary": "قائمة المستخدمين",
        "description": "استرداد قائمة بجميع المستخدمين مع إمكانية التصفية والترقيم",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة المستخدمين بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "user123",
                            "description": "معرف المستخدم"
                          },
                          "phone": {
                            "type": "string",
                            "example": "+967771234567",
                            "description": "رقم الهاتف"
                          },
                          "email": {
                            "type": "string",
                            "example": "user@example.com",
                            "description": "البريد الإلكتروني"
                          },
                          "fullName": {
                            "type": "string",
                            "example": "أحمد محمد علي",
                            "description": "الاسم الكامل"
                          },
                          "status": {
                            "type": "string",
                            "example": "active",
                            "description": "حالة المستخدم"
                          },
                          "role": {
                            "type": "string",
                            "example": "customer",
                            "description": "دور المستخدم"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00Z"
                          },
                          "lastLogin": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-20T15:45:00Z"
                          }
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "number",
                          "example": 1500,
                          "description": "إجمالي المستخدمين"
                        },
                        "page": {
                          "type": "number",
                          "example": 1,
                          "description": "الصفحة الحالية"
                        },
                        "limit": {
                          "type": "number",
                          "example": 20,
                          "description": "عدد المستخدمين في الصفحة"
                        },
                        "totalPages": {
                          "type": "number",
                          "example": 75,
                          "description": "إجمالي الصفحات"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى قائمة المستخدمين"
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "post": {
        "operationId": "createUser",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserAdminDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/deleted": {
      "get": {
        "operationId": "getDeletedUsers",
        "summary": "الحسابات المحذوفة",
        "description": "استرداد قائمة بجميع الحسابات المحذوفة مع سبب الحذف",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الحسابات المحذوفة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "deletedUsers": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "user123",
                            "description": "معرف المستخدم"
                          },
                          "phone": {
                            "type": "string",
                            "example": "+967771234567",
                            "description": "رقم الهاتف"
                          },
                          "firstName": {
                            "type": "string",
                            "example": "أحمد",
                            "description": "الاسم الأول"
                          },
                          "lastName": {
                            "type": "string",
                            "example": "محمد",
                            "description": "الاسم الأخير"
                          },
                          "deletionReason": {
                            "type": "string",
                            "example": "لا أستخدم التطبيق بعد الآن",
                            "description": "سبب الحذف"
                          },
                          "deletedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00Z",
                            "description": "تاريخ الحذف"
                          },
                          "deletedBy": {
                            "type": "string",
                            "example": "user456",
                            "description": "معرف من قام بالحذف (null إذا حذف المستخدم حسابه بنفسه)"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T10:00:00Z",
                            "description": "تاريخ الإنشاء"
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "number",
                          "example": 1
                        },
                        "limit": {
                          "type": "number",
                          "example": 20
                        },
                        "total": {
                          "type": "number",
                          "example": 50
                        },
                        "totalPages": {
                          "type": "number",
                          "example": 3
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى الحسابات المحذوفة"
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/{id}": {
      "get": {
        "operationId": "getUser",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateUser",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserAdminDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteUser",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/create-admin": {
      "post": {
        "operationId": "createAdmin",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAdminDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/create-role-admin": {
      "post": {
        "operationId": "createRoleBasedAdmin",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRoleBasedAdminDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/{id}/suspend": {
      "post": {
        "operationId": "suspendUser",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SuspendUserDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/{id}/activate": {
      "post": {
        "operationId": "activateUser",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/{id}/restore": {
      "post": {
        "operationId": "restoreUser",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/{id}/permanent": {
      "delete": {
        "operationId": "permanentDelete",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/stats/summary": {
      "get": {
        "operationId": "getUserStats",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/verification/pending": {
      "get": {
        "operationId": "getPendingVerifications",
        "summary": "قائمة طلبات التحقق قيد المراجعة",
        "description": "عرض جميع طلبات التحقق للمهندسين والتجار التي في حالة PENDING",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة طلبات التحقق بنجاح"
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/verification/{userId}": {
      "get": {
        "operationId": "getVerificationDetails",
        "summary": "تفاصيل طلب التحقق",
        "description": "عرض تفاصيل كاملة لطلب التحقق لمستخدم محدد",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تفاصيل طلب التحقق بنجاح"
          },
          "404": {
            "description": "المستخدم غير موجود أو ليس لديه طلب تحقق قيد المراجعة"
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/verification/{userId}/approve": {
      "post": {
        "operationId": "approveVerification",
        "summary": "الموافقة على التحقق",
        "description": "الموافقة على طلب التحقق للمهندس أو التاجر وتحديث الحالة إلى APPROVED",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تمت الموافقة على التحقق بنجاح"
          },
          "404": {
            "description": "المستخدم غير موجود أو ليس لديه طلب تحقق قيد المراجعة"
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/verification/{userId}/reject": {
      "post": {
        "operationId": "rejectVerification",
        "summary": "رفض التحقق",
        "description": "رفض طلب التحقق للمهندس أو التاجر وتحديث الحالة إلى REJECTED",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApproveVerificationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم رفض التحقق بنجاح"
          },
          "404": {
            "description": "المستخدم غير موجود أو ليس لديه طلب تحقق قيد المراجعة"
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/{id}/engineer-status": {
      "patch": {
        "operationId": "updateEngineerStatus",
        "summary": "تغيير حالة توثيق المهندس",
        "description": "يسمح للأدمن بتغيير حالة توثيق المهندس (none/unverified/pending/approved/rejected)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCapabilityStatusDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/{id}/merchant-status": {
      "patch": {
        "operationId": "updateMerchantStatus",
        "summary": "تغيير حالة توثيق التاجر",
        "description": "يسمح للأدمن بتغيير حالة توثيق التاجر ونسبة الخصم (none/unverified/pending/approved/rejected)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCapabilityStatusDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users/{id}/reset-password": {
      "post": {
        "operationId": "resetUserPassword",
        "summary": "إعادة تعيين كلمة مرور المستخدم",
        "description": "يسمح للأدمن بإعادة تعيين كلمة مرور أي مستخدم",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminResetPasswordDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-المستخدمين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/upload/file": {
      "post": {
        "operationId": "uploadFile",
        "summary": "رفع ملف واحد",
        "description": "رفع ملف واحد مع إمكانية تحديد المجلد والاسم المخصص",
        "parameters": [
          {
            "name": "folder",
            "required": false,
            "in": "query",
            "description": "المجلد المراد رفع الملف إليه",
            "schema": {
              "example": "products",
              "type": "string"
            }
          },
          {
            "name": "filename",
            "required": false,
            "in": "query",
            "description": "اسم مخصص للملف",
            "schema": {
              "example": "product-image-001.jpg",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "رفع ملف",
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/UploadFileDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم رفع الملف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "fileName": {
                          "type": "string",
                          "example": "product-image-001.jpg",
                          "description": "اسم الملف"
                        },
                        "filePath": {
                          "type": "string",
                          "example": "products/product-image-001.jpg",
                          "description": "مسار الملف"
                        },
                        "fileUrl": {
                          "type": "string",
                          "example": "https://cdn.example.com/products/product-image-001.jpg",
                          "description": "رابط الملف"
                        },
                        "fileSize": {
                          "type": "number",
                          "example": 1024000,
                          "description": "حجم الملف بالبايت"
                        },
                        "mimeType": {
                          "type": "string",
                          "example": "image/jpeg",
                          "description": "نوع الملف"
                        },
                        "uploadedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T10:30:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "خطأ في البيانات أو نوع الملف غير مدعوم"
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          },
          "413": {
            "description": "حجم الملف كبير جداً"
          }
        },
        "tags": [
          "رفع-الملفات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteFile",
        "summary": "حذف ملف",
        "description": "حذف ملف مرفوع من خلال مساره",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteFileDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم حذف الملف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "File deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بحذف هذا الملف"
          },
          "404": {
            "description": "الملف غير موجود"
          }
        },
        "tags": [
          "رفع-الملفات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/upload/files": {
      "post": {
        "operationId": "uploadFiles",
        "summary": "رفع ملفات متعددة",
        "description": "رفع عدة ملفات في وقت واحد (حتى 10 ملفات) مع إمكانية تحديد المجلد",
        "parameters": [
          {
            "name": "folder",
            "required": false,
            "in": "query",
            "description": "المجلد المراد رفع الملفات إليه",
            "schema": {
              "example": "gallery",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "رفع ملفات متعددة",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  },
                  "folder": {
                    "type": "string",
                    "description": "المجلد المراد رفع الملفات إليه"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم رفع الملفات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "fileName": {
                            "type": "string",
                            "example": "image1.jpg",
                            "description": "اسم الملف"
                          },
                          "filePath": {
                            "type": "string",
                            "example": "gallery/image1.jpg",
                            "description": "مسار الملف"
                          },
                          "fileUrl": {
                            "type": "string",
                            "example": "https://cdn.example.com/gallery/image1.jpg",
                            "description": "رابط الملف"
                          },
                          "fileSize": {
                            "type": "number",
                            "example": 512000,
                            "description": "حجم الملف بالبايت"
                          },
                          "mimeType": {
                            "type": "string",
                            "example": "image/jpeg",
                            "description": "نوع الملف"
                          },
                          "uploadedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "خطأ في البيانات أو نوع أحد الملفات غير مدعوم"
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          },
          "413": {
            "description": "حجم إحدى الملفات كبير جداً"
          }
        },
        "tags": [
          "رفع-الملفات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/upload/file/{filePath}": {
      "get": {
        "operationId": "getFileInfo",
        "summary": "معلومات الملف",
        "description": "الحصول على معلومات مفصلة عن ملف مرفوع",
        "parameters": [
          {
            "name": "filePath",
            "required": true,
            "in": "path",
            "description": "مسار الملف",
            "schema": {
              "example": "products/image.jpg",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرجاع معلومات الملف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "fileName": {
                          "type": "string",
                          "example": "image.jpg",
                          "description": "اسم الملف"
                        },
                        "filePath": {
                          "type": "string",
                          "example": "products/image.jpg",
                          "description": "مسار الملف"
                        },
                        "fileUrl": {
                          "type": "string",
                          "example": "https://cdn.example.com/products/image.jpg",
                          "description": "رابط الملف"
                        },
                        "fileSize": {
                          "type": "number",
                          "example": 1024000,
                          "description": "حجم الملف بالبايت"
                        },
                        "mimeType": {
                          "type": "string",
                          "example": "image/jpeg",
                          "description": "نوع الملف"
                        },
                        "uploadedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T10:30:00Z"
                        },
                        "lastModified": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T11:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى معلومات هذا الملف"
          },
          "404": {
            "description": "الملف غير موجود"
          }
        },
        "tags": [
          "رفع-الملفات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/upload/public/*": {
      "get": {
        "operationId": "serveFile",
        "summary": "عرض ملف عام",
        "description": "عرض ملف مرفوع بشكل عام (يُستخدم للاختبار - في الإنتاج يُفضل استخدام CDN مباشرة)",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرجاع الملف بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "description": "معلومات الملف أو محتواه حسب النوع"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "الملف غير موجود"
          }
        },
        "tags": [
          "رفع-الملفات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media/upload": {
      "post": {
        "operationId": "uploadMedia",
        "summary": "رفع وسائط إلى المكتبة",
        "description": "رفع ملف وسائط (صور، فيديوهات، مستندات) إلى مكتبة الوسائط مع إمكانية إضافة بيانات وصفية",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/UploadMediaDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم رفع الوسائط بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "media123",
                          "description": "معرف الوسائط"
                        },
                        "fileName": {
                          "type": "string",
                          "example": "product-image.jpg",
                          "description": "اسم الملف"
                        },
                        "filePath": {
                          "type": "string",
                          "example": "media/product-image.jpg",
                          "description": "مسار الملف"
                        },
                        "fileUrl": {
                          "type": "string",
                          "example": "https://cdn.example.com/media/product-image.jpg",
                          "description": "رابط الملف"
                        },
                        "fileSize": {
                          "type": "number",
                          "example": 1024000,
                          "description": "حجم الملف بالبايت"
                        },
                        "mimeType": {
                          "type": "string",
                          "example": "image/jpeg",
                          "description": "نوع الملف"
                        },
                        "alt": {
                          "type": "string",
                          "example": "صورة منتج رائع",
                          "description": "النص البديل"
                        },
                        "title": {
                          "type": "string",
                          "example": "هاتف ذكي سامسونج",
                          "description": "عنوان الوسائط"
                        },
                        "tags": {
                          "type": "array",
                          "items": {
                            "type": "string",
                            "example": "product"
                          },
                          "description": "العلامات"
                        },
                        "uploadedBy": {
                          "type": "string",
                          "example": "admin123",
                          "description": "معرف المستخدم الذي رفع الملف"
                        },
                        "uploadedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T10:30:00Z"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "isDuplicate": {
                          "type": "boolean",
                          "example": false,
                          "description": "هل الملف مكرر"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Media uploaded successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "خطأ في البيانات أو نوع الملف غير مدعوم"
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          },
          "413": {
            "description": "حجم الملف كبير جداً"
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media": {
      "get": {
        "operationId": "listMedia",
        "summary": "قائمة الوسائط",
        "description": "استرداد قائمة بجميع الوسائط في المكتبة مع إمكانية التصفية والترقيم",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة الوسائط بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "media123",
                            "description": "معرف الوسائط"
                          },
                          "fileName": {
                            "type": "string",
                            "example": "product-image.jpg",
                            "description": "اسم الملف"
                          },
                          "filePath": {
                            "type": "string",
                            "example": "media/product-image.jpg",
                            "description": "مسار الملف"
                          },
                          "fileUrl": {
                            "type": "string",
                            "example": "https://cdn.example.com/media/product-image.jpg",
                            "description": "رابط الملف"
                          },
                          "fileSize": {
                            "type": "number",
                            "example": 1024000,
                            "description": "حجم الملف بالبايت"
                          },
                          "mimeType": {
                            "type": "string",
                            "example": "image/jpeg",
                            "description": "نوع الملف"
                          },
                          "alt": {
                            "type": "string",
                            "example": "صورة منتج رائع",
                            "description": "النص البديل"
                          },
                          "title": {
                            "type": "string",
                            "example": "هاتف ذكي سامسونج",
                            "description": "عنوان الوسائط"
                          },
                          "tags": {
                            "type": "array",
                            "items": {
                              "type": "string",
                              "example": "product"
                            },
                            "description": "العلامات"
                          },
                          "uploadedBy": {
                            "type": "string",
                            "example": "admin123",
                            "description": "معرف المستخدم الذي رفع الملف"
                          },
                          "uploadedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00Z"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T11:00:00Z"
                          }
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "number",
                          "example": 150,
                          "description": "إجمالي العناصر"
                        },
                        "page": {
                          "type": "number",
                          "example": 1,
                          "description": "الصفحة الحالية"
                        },
                        "limit": {
                          "type": "number",
                          "example": 20,
                          "description": "عدد العناصر في الصفحة"
                        },
                        "totalPages": {
                          "type": "number",
                          "example": 8,
                          "description": "إجمالي الصفحات"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media/{id}": {
      "get": {
        "operationId": "getMedia",
        "summary": "تفاصيل الوسائط",
        "description": "استرداد تفاصيل وسائط محددة من المكتبة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الوسائط",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تفاصيل الوسائط بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "media123",
                      "description": "معرف الوسائط"
                    },
                    "fileName": {
                      "type": "string",
                      "example": "product-image.jpg",
                      "description": "اسم الملف"
                    },
                    "filePath": {
                      "type": "string",
                      "example": "media/product-image.jpg",
                      "description": "مسار الملف"
                    },
                    "fileUrl": {
                      "type": "string",
                      "example": "https://cdn.example.com/media/product-image.jpg",
                      "description": "رابط الملف"
                    },
                    "fileSize": {
                      "type": "number",
                      "example": 1024000,
                      "description": "حجم الملف بالبايت"
                    },
                    "mimeType": {
                      "type": "string",
                      "example": "image/jpeg",
                      "description": "نوع الملف"
                    },
                    "alt": {
                      "type": "string",
                      "example": "صورة منتج رائع",
                      "description": "النص البديل"
                    },
                    "title": {
                      "type": "string",
                      "example": "هاتف ذكي سامسونج",
                      "description": "عنوان الوسائط"
                    },
                    "tags": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "product"
                      },
                      "description": "العلامات"
                    },
                    "uploadedBy": {
                      "type": "string",
                      "example": "admin123",
                      "description": "معرف المستخدم الذي رفع الملف"
                    },
                    "uploadedAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T11:00:00Z"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          },
          "404": {
            "description": "الوسائط غير موجودة"
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateMedia",
        "summary": "تحديث الوسائط",
        "description": "تحديث البيانات الوصفية لملف وسائط في المكتبة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الوسائط",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMediaDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث الوسائط بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "media123",
                      "description": "معرف الوسائط"
                    },
                    "alt": {
                      "type": "string",
                      "example": "صورة منتج محدثة",
                      "description": "النص البديل المحدث"
                    },
                    "title": {
                      "type": "string",
                      "example": "هاتف ذكي سامسونج جالاكسي",
                      "description": "العنوان المحدث"
                    },
                    "tags": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "product"
                      },
                      "description": "العلامات المحدثة"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T12:00:00Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة"
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          },
          "404": {
            "description": "الوسائط غير موجودة"
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteMedia",
        "summary": "حذف الوسائط",
        "description": "حذف ملف وسائط من المكتبة (حذف مؤقت - يمكن الاستعادة)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الوسائط",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف الوسائط بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Media deleted successfully"
                    },
                    "deletedAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T13:00:00Z"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بحذف هذه الوسائط"
          },
          "404": {
            "description": "الوسائط غير موجودة"
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media/{id}/restore": {
      "post": {
        "operationId": "restoreMedia",
        "summary": "استعادة الوسائط",
        "description": "استعادة ملف وسائط محذوف مؤقتاً إلى المكتبة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الوسائط",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استعادة الوسائط بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "media123",
                      "description": "معرف الوسائط"
                    },
                    "status": {
                      "type": "string",
                      "example": "active",
                      "description": "حالة الوسائط بعد الاستعادة"
                    },
                    "restoredAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T14:00:00Z"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك باستعادة هذه الوسائط"
          },
          "404": {
            "description": "الوسائط غير موجودة أو غير محذوفة"
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media/{id}/permanent": {
      "delete": {
        "operationId": "permanentDeleteMedia",
        "summary": "حذف الوسائط نهائياً",
        "description": "حذف ملف وسائط نهائياً من المكتبة والتخزين (متاح للمشرفين الفائقين فقط)",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف الوسائط",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف الوسائط نهائياً بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Media permanently deleted successfully"
                    },
                    "deletedFiles": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "media/product-image.jpg"
                      },
                      "description": "قائمة الملفات المحذوفة"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالحذف النهائي (يتطلب صلاحيات مشرف فائق)"
          },
          "404": {
            "description": "الوسائط غير موجودة"
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media/stats/summary": {
      "get": {
        "operationId": "getStats",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media/cleanup/deleted": {
      "post": {
        "operationId": "cleanupDeletedFiles",
        "parameters": [],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media/cleanup/duplicates": {
      "post": {
        "operationId": "cleanupDuplicateFiles",
        "parameters": [],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media/cleanup/unused": {
      "post": {
        "operationId": "cleanupUnusedFiles",
        "parameters": [
          {
            "name": "days",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media-analytics/overview": {
      "get": {
        "operationId": "getOverview",
        "summary": "الإحصائيات العامة للوسائط",
        "description": "يعرض إحصائيات شاملة عن جميع الملفات والوسائط في النظام",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب الإحصائيات العامة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalFiles": {
                          "type": "number",
                          "example": 1250,
                          "description": "إجمالي عدد الملفات"
                        },
                        "totalSize": {
                          "type": "number",
                          "example": 5242880000,
                          "description": "إجمالي حجم الملفات بالبايت"
                        },
                        "totalSizeFormatted": {
                          "type": "string",
                          "example": "5.24 GB",
                          "description": "إجمالي الحجم منسق"
                        },
                        "filesThisMonth": {
                          "type": "number",
                          "example": 156,
                          "description": "عدد الملفات المرفوعة هذا الشهر"
                        },
                        "filesThisWeek": {
                          "type": "number",
                          "example": 42,
                          "description": "عدد الملفات المرفوعة هذا الأسبوع"
                        },
                        "filesToday": {
                          "type": "number",
                          "example": 8,
                          "description": "عدد الملفات المرفوعة اليوم"
                        },
                        "averageFileSize": {
                          "type": "number",
                          "example": 419430,
                          "description": "متوسط حجم الملف"
                        },
                        "averageFileSizeFormatted": {
                          "type": "string",
                          "example": "419.43 KB"
                        },
                        "filesByType": {
                          "type": "object",
                          "properties": {
                            "images": {
                              "type": "number",
                              "example": 850
                            },
                            "videos": {
                              "type": "number",
                              "example": 120
                            },
                            "documents": {
                              "type": "number",
                              "example": 200
                            },
                            "other": {
                              "type": "number",
                              "example": 80
                            }
                          }
                        },
                        "sizeByType": {
                          "type": "object",
                          "properties": {
                            "images": {
                              "type": "number",
                              "example": 2147483648
                            },
                            "videos": {
                              "type": "number",
                              "example": 2684354560
                            },
                            "documents": {
                              "type": "number",
                              "example": 314572800
                            },
                            "other": {
                              "type": "number",
                              "example": 96468992
                            }
                          }
                        },
                        "storageUsagePercent": {
                          "type": "number",
                          "example": 52.4,
                          "description": "نسبة استخدام التخزين"
                        },
                        "topUploaders": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "userId": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "uploadCount": {
                                "type": "number"
                              },
                              "totalSize": {
                                "type": "number"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إحصائيات-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media-analytics/by-type": {
      "get": {
        "operationId": "getStatsByType",
        "summary": "إحصائيات الوسائط حسب النوع",
        "description": "يعرض توزيع الملفات حسب أنواعها المختلفة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب الإحصائيات بنجاح"
          }
        },
        "tags": [
          "إحصائيات-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media-analytics/upload-timeline": {
      "get": {
        "operationId": "getUploadTimeline",
        "summary": "إحصائيات الرفع حسب الفترة الزمنية",
        "description": "يعرض توزيع عمليات الرفع خلال فترة زمنية محددة",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "الفترة الزمنية للإحصائيات",
            "schema": {
              "enum": [
                "day",
                "week",
                "month",
                "year"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب الإحصائيات بنجاح"
          }
        },
        "tags": [
          "إحصائيات-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media-analytics/largest-files": {
      "get": {
        "operationId": "getLargestFiles",
        "summary": "قائمة أكبر الملفات",
        "description": "يعرض الملفات الأكبر حجماً في النظام",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد الملفات المراد عرضها",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب القائمة بنجاح"
          }
        },
        "tags": [
          "إحصائيات-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media-analytics/recent-uploads": {
      "get": {
        "operationId": "getRecentUploads",
        "summary": "أحدث الملفات المرفوعة",
        "description": "يعرض آخر الملفات التي تم رفعها",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد الملفات المراد عرضها",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب القائمة بنجاح"
          }
        },
        "tags": [
          "إحصائيات-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media-analytics/storage": {
      "get": {
        "operationId": "getStorageStats",
        "summary": "إحصائيات التخزين",
        "description": "يعرض معلومات عن مساحة التخزين المستخدمة والمتاحة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب إحصائيات التخزين بنجاح"
          }
        },
        "tags": [
          "إحصائيات-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media-analytics/by-user": {
      "get": {
        "operationId": "getStatsByUser",
        "summary": "إحصائيات الرفع حسب المستخدم",
        "description": "يعرض إحصائيات عمليات الرفع لكل مستخدم",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد المستخدمين المراد عرضهم",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب الإحصائيات بنجاح"
          }
        },
        "tags": [
          "إحصائيات-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media-analytics/unused-files": {
      "get": {
        "operationId": "getUnusedFiles",
        "summary": "الملفات غير المستخدمة",
        "description": "يعرض الملفات التي لم يتم استخدامها في أي مكان",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد الملفات المراد عرضها",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب القائمة بنجاح"
          }
        },
        "tags": [
          "إحصائيات-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/media-analytics/full-report": {
      "get": {
        "operationId": "getFullReport",
        "summary": "تقرير شامل عن الوسائط",
        "description": "يولد تقرير شامل يحتوي على جميع الإحصائيات",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم توليد التقرير بنجاح"
          }
        },
        "tags": [
          "إحصائيات-الوسائط"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/dashboard": {
      "get": {
        "operationId": "getDashboard",
        "summary": "الحصول على بيانات لوحة التحكم",
        "description": "استرداد بيانات تحليلات شاملة للوحة التحكم مع الرسوم البيانية ومؤشرات الأداء الرئيسية",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "الفترة الزمنية للتحليلات",
            "schema": {
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية (صيغة ISO)",
            "schema": {
              "example": "2023-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية (صيغة ISO)",
            "schema": {
              "example": "2023-12-31",
              "type": "string"
            }
          },
          {
            "name": "compareWithPrevious",
            "required": false,
            "in": "query",
            "description": "المقارنة مع الفترة السابقة",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد بيانات لوحة التحكم بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/overview": {
      "get": {
        "operationId": "getOverview",
        "summary": "الحصول على مقاييس النظرة العامة",
        "description": "استرداد مؤشرات الأداء الرئيسية وإحصائيات النظرة العامة",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "نوع الفترة الزمنية",
            "schema": {
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "example": "2023-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "example": "2023-12-31",
              "type": "string"
            }
          },
          {
            "name": "compareWithPrevious",
            "required": false,
            "in": "query",
            "description": "مقارنة مع الفترة السابقة",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد مقاييس النظرة العامة بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/revenue": {
      "get": {
        "operationId": "getRevenueAnalytics",
        "summary": "الحصول على تحليلات الإيرادات",
        "description": "تحليل مفصل للإيرادات مع الاتجاهات والتفصيلات",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "نوع الفترة الزمنية",
            "schema": {
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "example": "2023-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "example": "2023-12-31",
              "type": "string"
            }
          },
          {
            "name": "compareWithPrevious",
            "required": false,
            "in": "query",
            "description": "مقارنة مع الفترة السابقة",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تحليلات الإيرادات بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/users": {
      "get": {
        "operationId": "getUserAnalytics",
        "summary": "الحصول على تحليلات المستخدمين",
        "description": "اتجاهات تسجيل المستخدمين والتركيبة السكانية ومقاييس التفاعل",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "نوع الفترة الزمنية",
            "schema": {
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "example": "2023-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "example": "2023-12-31",
              "type": "string"
            }
          },
          {
            "name": "compareWithPrevious",
            "required": false,
            "in": "query",
            "description": "مقارنة مع الفترة السابقة",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تحليلات المستخدمين بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/products": {
      "get": {
        "operationId": "getProductAnalytics",
        "summary": "الحصول على تحليلات المنتجات",
        "description": "أداء المنتجات واتجاهات المبيعات وتحليلات المخزون",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "نوع الفترة الزمنية",
            "schema": {
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "example": "2023-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "example": "2023-12-31",
              "type": "string"
            }
          },
          {
            "name": "compareWithPrevious",
            "required": false,
            "in": "query",
            "description": "مقارنة مع الفترة السابقة",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تحليلات المنتجات بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/services": {
      "get": {
        "operationId": "getServiceAnalytics",
        "summary": "الحصول على تحليلات الخدمات",
        "description": "اتجاهات طلبات الخدمات وأداء المهندسين ومقاييس الإنجاز",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "نوع الفترة الزمنية",
            "schema": {
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "example": "2023-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "example": "2023-12-31",
              "type": "string"
            }
          },
          {
            "name": "compareWithPrevious",
            "required": false,
            "in": "query",
            "description": "مقارنة مع الفترة السابقة",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تحليلات الخدمات بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/support": {
      "get": {
        "operationId": "getSupportAnalytics",
        "summary": "الحصول على تحليلات الدعم",
        "description": "اتجاهات تذاكر الدعم وأوقات الحل ورضا العملاء",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "نوع الفترة الزمنية",
            "schema": {
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "example": "2023-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "example": "2023-12-31",
              "type": "string"
            }
          },
          {
            "name": "compareWithPrevious",
            "required": false,
            "in": "query",
            "description": "مقارنة مع الفترة السابقة",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تحليلات الدعم بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/performance": {
      "get": {
        "operationId": "getPerformanceMetrics",
        "summary": "الحصول على مقاييس أداء النظام",
        "description": "أوقات استجابة API ومعدلات الأخطاء ووقت التشغيل وصحة النظام",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد مقاييس الأداء بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PerformanceMetricsDto"
                }
              }
            }
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/reports/generate": {
      "post": {
        "operationId": "generateReport",
        "summary": "إنشاء تقرير مخصص",
        "description": "إنشاء تقرير تحليلات مخصص بالصيغ المحددة",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReportGenerationDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء التقرير بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalyticsReportDto"
                }
              }
            }
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/reports/{id}": {
      "get": {
        "operationId": "getReport",
        "summary": "الحصول على تقرير بالمعرف",
        "description": "استرداد تقرير تم إنشاؤه سابقاً",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التقرير",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد التقرير بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalyticsReportDto"
                }
              }
            }
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/reports/schedule": {
      "post": {
        "operationId": "scheduleReport",
        "summary": "جدولة تقرير تلقائي",
        "description": "إنشاء تقرير مجدول يعمل تلقائياً",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateReportScheduleDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء جدولة التقرير بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/kpis": {
      "get": {
        "operationId": "getKPIs",
        "summary": "الحصول على مقاييس KPI",
        "description": "استرداد مؤشرات الأداء الرئيسية",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "نوع الفترة الزمنية",
            "schema": {
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "example": "2023-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "example": "2023-12-31",
              "type": "string"
            }
          },
          {
            "name": "compareWithPrevious",
            "required": false,
            "in": "query",
            "description": "مقارنة مع الفترة السابقة",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد مؤشرات الأداء الرئيسية بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/trends/{metric}": {
      "get": {
        "operationId": "getMetricTrends",
        "summary": "الحصول على اتجاهات المقياس",
        "description": "استرداد بيانات الاتجاهات لمقاييس محددة عبر الزمن",
        "parameters": [
          {
            "name": "metric",
            "required": true,
            "in": "path",
            "description": "اسم المقياس (الإيرادات، المستخدمين، الطلبات، إلخ)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "type": "string"
            }
          },
          {
            "name": "days",
            "required": false,
            "in": "query",
            "description": "عدد الأيام للبحث للخلف",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد اتجاهات المقياس بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/comparison": {
      "get": {
        "operationId": "comparePeriods",
        "summary": "مقارنة الفترات",
        "description": "مقارنة التحليلات بين فترتين مختلفتين",
        "parameters": [
          {
            "name": "currentStart",
            "required": true,
            "in": "query",
            "description": "تاريخ بداية الفترة الحالية",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currentEnd",
            "required": true,
            "in": "query",
            "description": "تاريخ نهاية الفترة الحالية",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "previousStart",
            "required": true,
            "in": "query",
            "description": "تاريخ بداية الفترة السابقة",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "previousEnd",
            "required": true,
            "in": "query",
            "description": "تاريخ نهاية الفترة السابقة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد مقارنة الفترات بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/export/{format}": {
      "get": {
        "operationId": "exportData",
        "summary": "تصدير بيانات التحليلات",
        "description": "تصدير بيانات التحليلات بصيغ مختلفة",
        "parameters": [
          {
            "name": "format",
            "required": true,
            "in": "path",
            "description": "صيغة التصدير",
            "schema": {
              "enum": [
                "csv",
                "json",
                "xlsx"
              ],
              "type": "string"
            }
          },
          {
            "name": "type",
            "required": true,
            "in": "query",
            "description": "نوع البيانات المراد تصديرها (المستخدمين، الطلبات، الإيرادات، إلخ)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم إرجاع رابط ملف التصدير"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/refresh": {
      "post": {
        "operationId": "refreshAnalytics",
        "summary": "تحديث بيانات التحليلات",
        "description": "إجبار تحديث لقطات التحليلات وحساباتها",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم تحديث بيانات التحليلات بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/cache": {
      "delete": {
        "operationId": "clearCache",
        "summary": "مسح ذاكرة التخزين المؤقت للتحليلات",
        "description": "مسح جميع بيانات التحليلات المخزنة مؤقتاً لإجبار قراءة البيانات الجديدة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم مسح ذاكرة التخزين المؤقت بنجاح"
          }
        },
        "tags": [
          "التحليلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/sales": {
      "get": {
        "operationId": "getSalesAnalytics",
        "summary": "الحصول على تحليلات المبيعات",
        "parameters": [
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {}
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تحليلات المبيعات بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/products/performance": {
      "get": {
        "operationId": "getProductPerformance",
        "summary": "الحصول على تحليلات أداء المنتجات",
        "parameters": [
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {}
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد أداء المنتجات بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/customers": {
      "get": {
        "operationId": "getCustomerAnalytics",
        "summary": "الحصول على تحليلات العملاء",
        "parameters": [
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {}
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تحليلات العملاء بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/inventory": {
      "get": {
        "operationId": "getInventoryReport",
        "summary": "الحصول على تقرير المخزون",
        "parameters": [
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {}
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تقرير المخزون بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/financial": {
      "get": {
        "operationId": "getFinancialReport",
        "summary": "الحصول على التقرير المالي",
        "parameters": [
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {}
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد التقرير المالي بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/cart-analytics": {
      "get": {
        "operationId": "getCartAnalytics",
        "summary": "الحصول على تحليلات عربة التسوق",
        "parameters": [
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {}
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تحليلات عربة التسوق بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/marketing": {
      "get": {
        "operationId": "getMarketingReport",
        "summary": "الحصول على التقرير التسويقي",
        "parameters": [
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {}
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد التقرير التسويقي بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/realtime": {
      "get": {
        "operationId": "getRealTimeMetrics",
        "summary": "الحصول على مقاييس الوقت الفعلي",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد مقاييس الوقت الفعلي بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/quick-stats": {
      "get": {
        "operationId": "getQuickStats",
        "summary": "الحصول على الإحصائيات السريعة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات السريعة بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/reports/generate": {
      "post": {
        "operationId": "generateAdvancedReport",
        "summary": "إنشاء تقرير متقدم",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء التقرير بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/reports": {
      "get": {
        "operationId": "listAdvancedReports",
        "summary": "قائمة التقارير المتقدمة",
        "parameters": [
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {}
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {}
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد التقارير بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/reports/{reportId}": {
      "get": {
        "operationId": "getAdvancedReport",
        "summary": "الحصول على التقرير المتقدم بالمعرف",
        "parameters": [
          {
            "name": "reportId",
            "required": true,
            "in": "path",
            "description": "معرف التقرير",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد التقرير بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteReport",
        "summary": "حذف التقرير",
        "parameters": [
          {
            "name": "reportId",
            "required": true,
            "in": "path",
            "description": "معرف التقرير",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف التقرير بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/reports/{reportId}/archive": {
      "post": {
        "operationId": "archiveReport",
        "summary": "أرشفة التقرير",
        "parameters": [
          {
            "name": "reportId",
            "required": true,
            "in": "path",
            "description": "معرف التقرير",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم أرشفة التقرير بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/reports/{reportId}/export": {
      "post": {
        "operationId": "exportReport",
        "summary": "تصدير التقرير",
        "parameters": [
          {
            "name": "reportId",
            "required": true,
            "in": "path",
            "description": "معرف التقرير",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تصدير التقرير بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/export/sales": {
      "get": {
        "operationId": "exportSalesData",
        "summary": "تصدير بيانات المبيعات",
        "parameters": [
          {
            "name": "format",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تصدير بيانات المبيعات بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/export/products": {
      "get": {
        "operationId": "exportProductsData",
        "summary": "تصدير بيانات المنتجات",
        "parameters": [
          {
            "name": "format",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تصدير بيانات المنتجات بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/export/customers": {
      "get": {
        "operationId": "exportCustomersData",
        "summary": "تصدير بيانات العملاء",
        "parameters": [
          {
            "name": "format",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تصدير بيانات العملاء بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/comparison": {
      "get": {
        "operationId": "comparePeriodsAdvanced",
        "summary": "مقارنة الفترات (متقدمة)",
        "parameters": [
          {
            "name": "currentStart",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currentEnd",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "previousStart",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "previousEnd",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد مقارنة الفترات بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/advanced/trends/{metric}": {
      "get": {
        "operationId": "getMetricTrendsAdvanced",
        "summary": "الحصول على اتجاهات المقياس (متقدمة)",
        "parameters": [
          {
            "name": "metric",
            "required": true,
            "in": "path",
            "description": "اسم المقياس",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "groupBy",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد اتجاهات المقياس بنجاح"
          }
        },
        "tags": [
          "التحليلات/متقدمة"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-monitoring/health": {
      "get": {
        "operationId": "getSystemHealth",
        "summary": "الحصول على صحة النظام العامة",
        "description": "استرداد مقاييس صحة النظام الشاملة مع جميع المكونات",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد صحة النظام بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemHealthDto"
                }
              }
            }
          }
        },
        "tags": [
          "مراقبة النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-monitoring/resources": {
      "get": {
        "operationId": "getResourceUsage",
        "summary": "الحصول على استخدام الموارد",
        "description": "استرداد معلومات استخدام CPU والذاكرة والقرص",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد استخدام الموارد بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResourceUsageDto"
                }
              }
            }
          }
        },
        "tags": [
          "مراقبة النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-monitoring/database": {
      "get": {
        "operationId": "getDatabaseMetrics",
        "summary": "الحصول على مقاييس قاعدة البيانات",
        "description": "استرداد معلومات أداء وحالة MongoDB",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد مقاييس قاعدة البيانات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseMetricsDto"
                }
              }
            }
          }
        },
        "tags": [
          "مراقبة النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-monitoring/redis": {
      "get": {
        "operationId": "getRedisMetrics",
        "summary": "الحصول على مقاييس Redis",
        "description": "استرداد معلومات أداء وحالة Redis Cache",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد مقاييس Redis بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RedisMetricsDto"
                }
              }
            }
          }
        },
        "tags": [
          "مراقبة النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-monitoring/api-performance": {
      "get": {
        "operationId": "getApiPerformance",
        "summary": "الحصول على أداء API",
        "description": "استرداد إحصائيات أداء واستجابة API",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد أداء API بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiPerformanceDto"
                }
              }
            }
          }
        },
        "tags": [
          "مراقبة النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-monitoring/metrics/history": {
      "get": {
        "operationId": "getMetricsHistory",
        "summary": "الحصول على تاريخ المقاييس",
        "description": "استرداد البيانات التاريخية للمقاييس المختلفة",
        "parameters": [
          {
            "name": "metricType",
            "required": false,
            "in": "query",
            "description": "نوع المقياس",
            "schema": {
              "enum": [
                "cpu",
                "memory",
                "disk",
                "database",
                "redis",
                "api"
              ],
              "type": "string"
            }
          },
          {
            "name": "timeRange",
            "required": false,
            "in": "query",
            "description": "النطاق الزمني",
            "schema": {
              "enum": [
                "last_hour",
                "last_24_hours",
                "last_7_days",
                "last_30_days",
                "custom"
              ],
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية (صيغة ISO)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية (صيغة ISO)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تاريخ المقاييس بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemMetricsHistoryDto"
                }
              }
            }
          }
        },
        "tags": [
          "مراقبة النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-monitoring/alerts": {
      "get": {
        "operationId": "getSystemAlerts",
        "summary": "الحصول على تنبيهات النظام",
        "description": "استرداد قائمة التنبيهات النشطة والحرجة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد التنبيهات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemAlertsDto"
                }
              }
            }
          }
        },
        "tags": [
          "مراقبة النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-monitoring/alerts/{id}/resolve": {
      "post": {
        "operationId": "resolveAlert",
        "summary": "حل تنبيه",
        "description": "وضع علامة على تنبيه كمحلول",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف التنبيه",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حل التنبيه بنجاح"
          }
        },
        "tags": [
          "مراقبة النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/system-monitoring/overview": {
      "get": {
        "operationId": "getSystemOverview",
        "summary": "الحصول على نظرة عامة شاملة",
        "description": "استرداد جميع المقاييس في استجابة واحدة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد النظرة العامة بنجاح"
          }
        },
        "tags": [
          "مراقبة النظام"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/error-logs": {
      "post": {
        "operationId": "createErrorLog",
        "summary": "إنشاء سجل خطأ جديد",
        "description": "تسجيل خطأ جديد في النظام",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateErrorLogDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء سجل الخطأ بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorLogDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة الأخطاء والسجلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "getErrorLogs",
        "summary": "الحصول على قائمة الأخطاء",
        "description": "استرداد سجلات الأخطاء مع التصفية والترتيب",
        "parameters": [
          {
            "name": "level",
            "required": false,
            "in": "query",
            "description": "مستوى الخطأ",
            "schema": {
              "enum": [
                "error",
                "warn",
                "fatal",
                "debug"
              ],
              "type": "string"
            }
          },
          {
            "name": "category",
            "required": false,
            "in": "query",
            "description": "فئة الخطأ",
            "schema": {
              "enum": [
                "database",
                "api",
                "authentication",
                "validation",
                "business_logic",
                "external_service",
                "system",
                "unknown"
              ],
              "type": "string"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "نص البحث في الرسالة",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية (صيغة ISO)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية (صيغة ISO)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "default": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العناصر في الصفحة",
            "schema": {
              "default": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد سجلات الأخطاء بنجاح"
          }
        },
        "tags": [
          "إدارة الأخطاء والسجلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/error-logs/statistics": {
      "get": {
        "operationId": "getStatistics",
        "summary": "الحصول على إحصائيات الأخطاء",
        "description": "استرداد تحليلات شاملة للأخطاء",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorStatisticsDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة الأخطاء والسجلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/error-logs/trends": {
      "get": {
        "operationId": "getErrorTrend",
        "summary": "الحصول على اتجاهات الأخطاء",
        "description": "تحليل اتجاه الأخطاء عبر الزمن",
        "parameters": [
          {
            "name": "days",
            "required": false,
            "in": "query",
            "description": "عدد الأيام للتحليل",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد اتجاهات الأخطاء بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorTrendDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة الأخطاء والسجلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/error-logs/export": {
      "get": {
        "operationId": "exportLogs",
        "summary": "تصدير سجلات الأخطاء",
        "description": "تصدير السجلات بصيغ مختلفة (JSON, CSV, TXT)",
        "parameters": [
          {
            "name": "format",
            "required": false,
            "in": "query",
            "description": "صيغة التصدير",
            "schema": {
              "enum": [
                "json",
                "csv",
                "txt"
              ],
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "level",
            "required": false,
            "in": "query",
            "description": "مستوى الخطأ",
            "schema": {
              "enum": [
                "error",
                "warn",
                "fatal",
                "debug"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم إنشاء رابط التصدير بنجاح"
          }
        },
        "tags": [
          "إدارة الأخطاء والسجلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/error-logs/system-logs": {
      "get": {
        "operationId": "getSystemLogs",
        "summary": "الحصول على سجلات النظام",
        "description": "استرداد سجلات النظام العامة",
        "parameters": [
          {
            "name": "level",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "context",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد سجلات النظام بنجاح"
          }
        },
        "tags": [
          "إدارة الأخطاء والسجلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/error-logs/{id}": {
      "get": {
        "operationId": "getErrorById",
        "summary": "الحصول على تفاصيل خطأ",
        "description": "استرداد معلومات مفصلة عن خطأ معين",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف سجل الخطأ",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تفاصيل الخطأ بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorLogDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة الأخطاء والسجلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteError",
        "summary": "حذف خطأ",
        "description": "حذف سجل خطأ من قاعدة البيانات",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف سجل الخطأ",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف الخطأ بنجاح"
          }
        },
        "tags": [
          "إدارة الأخطاء والسجلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/error-logs/{id}/resolve": {
      "post": {
        "operationId": "resolveError",
        "summary": "حل خطأ",
        "description": "وضع علامة على خطأ كمحلول",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف سجل الخطأ",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "notes": {
                    "type": "string",
                    "description": "ملاحظات الحل"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم حل الخطأ بنجاح"
          }
        },
        "tags": [
          "إدارة الأخطاء والسجلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/error-logs/cleanup": {
      "post": {
        "operationId": "cleanupOldErrors",
        "summary": "تنظيف السجلات القديمة",
        "description": "حذف سجلات الأخطاء الأقدم من عدد معين من الأيام",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "days": {
                    "type": "number",
                    "description": "عدد الأيام",
                    "default": 30
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تنظيف السجلات بنجاح"
          }
        },
        "tags": [
          "إدارة الأخطاء والسجلات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer": {
      "post": {
        "operationId": "create",
        "summary": "إنشاء طلب خدمة جديد",
        "description": "إنشاء طلب خدمة جديد من قبل العميل",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateServiceRequestDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء طلب الخدمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "_id": "6645e1a5f2f0a02eab4d9c10",
                      "userId": "6637c4ed09d96f1d93f3b712",
                      "title": "إصلاح جهاز تكييف",
                      "type": "maintenance",
                      "description": "الجهاز لا يعمل ويصدر صوتاً مرتفعاً عند التشغيل",
                      "images": [
                        "https://cdn.example.com/uploads/requests/ac-issue-1.jpg"
                      ],
                      "city": "صنعاء",
                      "addressId": "662fa2ab5d97b30a4f8c1234",
                      "status": "OPEN",
                      "scheduledAt": "2024-06-05T09:00:00.000Z",
                      "engineerId": null,
                      "acceptedOffer": null,
                      "rating": {},
                      "location": {
                        "type": "Point",
                        "coordinates": [
                          44.206521,
                          15.353622
                        ]
                      },
                      "createdAt": "2024-06-01T12:30:15.512Z",
                      "updatedAt": "2024-06-01T12:30:15.512Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": [
                      "addressId must be a mongodb id"
                    ],
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer/my": {
      "get": {
        "operationId": "my",
        "summary": "طلباتي",
        "description": "استرداد قائمة بجميع طلبات الخدمات الخاصة بالعميل",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد طلباتك بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": [
                      {
                        "_id": "6645e1a5f2f0a02eab4d9c10",
                        "title": "إصلاح جهاز تكييف",
                        "type": "maintenance",
                        "description": "الجهاز لا يعمل ويصدر صوتاً مرتفعاً عند التشغيل",
                        "images": [
                          "https://cdn.example.com/uploads/requests/ac-issue-1.jpg"
                        ],
                        "city": "صنعاء",
                        "addressId": "662fa2ab5d97b30a4f8c1234",
                        "status": "ASSIGNED",
                        "scheduledAt": "2024-06-05T09:00:00.000Z",
                        "engineerId": "6637d50690fbb31de8d9c445",
                        "acceptedOffer": {
                          "offerId": "6645f731dc490a317ad91884",
                          "amount": 180
                        },
                        "rating": {},
                        "createdAt": "2024-06-01T12:30:15.512Z",
                        "updatedAt": "2024-06-02T08:10:45.004Z"
                      },
                      {
                        "_id": "6640b15457b44bb2d1f5ed98",
                        "title": "تركيب سخان مياه",
                        "type": "installation",
                        "description": "تركيب سخان جديد مع اختبار ضغط المياه",
                        "images": [],
                        "city": "عدن",
                        "addressId": "6640b11c57b44bb2d1f5ed97",
                        "status": "COMPLETED",
                        "scheduledAt": "2024-05-27T13:30:00.000Z",
                        "engineerId": "6637d50690fbb31de8d9c445",
                        "acceptedOffer": {
                          "offerId": "6640b1d057b44bb2d1f5eda0",
                          "amount": 220
                        },
                        "rating": {
                          "score": 5,
                          "comment": "خدمة ممتازة",
                          "at": "2024-05-27T16:02:19.412Z"
                        },
                        "createdAt": "2024-05-25T09:14:03.921Z",
                        "updatedAt": "2024-05-27T16:02:19.412Z"
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer/my/no-offers": {
      "get": {
        "operationId": "myWithoutOffers",
        "summary": "طلباتي بدون عروض",
        "description": "استرداد الطلبات التي لم يتم تقديم عروض عليها بعد",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الطلبات بدون عروض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": [
                      {
                        "_id": "6645e1a5f2f0a02eab4d9c10",
                        "title": "إصلاح جهاز تكييف",
                        "status": "OPEN",
                        "createdAt": "2024-06-01T12:30:15.512Z",
                        "updatedAt": "2024-06-01T12:30:15.512Z"
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer/my/with-offers": {
      "get": {
        "operationId": "myWithOffers",
        "summary": "طلباتي مع عروض قيد المراجعة",
        "description": "استرداد الطلبات التي تحتوي على عروض ولم تُقبل بعد",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الطلبات ذات العروض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": [
                      {
                        "_id": "6645e1a5f2f0a02eab4d9c10",
                        "title": "إصلاح جهاز تكييف",
                        "status": "OFFERS_COLLECTING",
                        "createdAt": "2024-06-01T12:30:15.512Z",
                        "updatedAt": "2024-06-02T08:10:45.004Z"
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer/{requestId}/offers/{offerId}": {
      "get": {
        "operationId": "offerDetails",
        "summary": "تفاصيل عرض مهندس",
        "description": "استرداد تفاصيل عرض محدد مع بيانات المهندس والطلب",
        "parameters": [
          {
            "name": "requestId",
            "required": true,
            "in": "path",
            "description": "معرف طلب الخدمة",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offerId",
            "required": true,
            "in": "path",
            "description": "معرف العرض",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تفاصيل العرض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "offer": {
                        "_id": "6645f731dc490a317ad91884",
                        "amountYER": 9000,
                        "note": "يشمل التركيب الكامل مع قطع الغيار",
                        "status": "OFFERED",
                        "statusLabel": "عرض مقدم",
                        "engineer": {
                          "id": "6637d50690fbb31de8d9c445",
                          "name": "حسن اللقلي",
                          "jobTitle": "مهندس كهرباء",
                          "phone": "777123456",
                          "whatsapp": "https://wa.me/967777123456"
                        }
                      },
                      "request": {
                        "_id": "6645e1a5f2f0a02eab4d9c10",
                        "title": "تركيب منظومة شمسية",
                        "type": "installation",
                        "description": "عرض المشكلة: تركيب منظومة طاقة شمسية كاملة...",
                        "images": [
                          "https://cdn.example.com/uploads/request.jpg"
                        ],
                        "status": "OPEN",
                        "statusLabel": "بانتظار العروض",
                        "scheduledAt": "2025-09-21T09:00:00.000Z",
                        "address": {
                          "label": "المنزل",
                          "line1": "شارع تعز - جوار مستشفى ناصر",
                          "city": "صنعاء"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "لم يتم العثور على الطلب أو العرض",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "error": "REQUEST_NOT_FOUND"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer/my/with-accepted-offer": {
      "get": {
        "operationId": "myWithAcceptedOffer",
        "summary": "طلباتي مع عروض مقبولة",
        "description": "استرداد الطلبات التي تم قبول أحد عروضها",
        "parameters": [
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "فلترة حسب حالة الطلب (ASSIGNED, IN_PROGRESS, COMPLETED, RATED)",
            "schema": {}
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الطلبات ذات العروض المقبولة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": [
                      {
                        "_id": "6645e1a5f2f0a02eab4d9c10",
                        "title": "إصلاح جهاز تكييف",
                        "status": "ASSIGNED",
                        "acceptedOffer": {
                          "offerId": "6645f731dc490a317ad91884",
                          "amount": 180
                        },
                        "createdAt": "2024-06-01T12:30:15.512Z",
                        "updatedAt": "2024-06-02T08:10:45.004Z"
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer/{id}": {
      "get": {
        "operationId": "get",
        "summary": "تفاصيل طلب خدمة",
        "description": "استرداد تفاصيل كاملة لطلب خدمة محدد",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تفاصيل الطلب بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "_id": "6645e1a5f2f0a02eab4d9c10",
                      "userId": "6637c4ed09d96f1d93f3b712",
                      "title": "إصلاح جهاز تكييف",
                      "type": "maintenance",
                      "description": "الجهاز لا يعمل ويصدر صوتاً مرتفعاً عند التشغيل",
                      "images": [
                        "https://cdn.example.com/uploads/requests/ac-issue-1.jpg"
                      ],
                      "city": "صنعاء",
                      "addressId": "662fa2ab5d97b30a4f8c1234",
                      "status": "ASSIGNED",
                      "scheduledAt": "2024-06-05T09:00:00.000Z",
                      "engineerId": "6637d50690fbb31de8d9c445",
                      "acceptedOffer": {
                        "offerId": "6645f731dc490a317ad91884",
                        "amount": 180,
                        "note": "يشمل قطع الغيار"
                      },
                      "rating": {},
                      "location": {
                        "type": "Point",
                        "coordinates": [
                          44.206521,
                          15.353622
                        ]
                      },
                      "createdAt": "2024-06-01T12:30:15.512Z",
                      "updatedAt": "2024-06-02T08:10:45.004Z"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذا الطلب"
          },
          "404": {
            "description": "لم يتم العثور على الطلب",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Service request not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer/{id}/cancel": {
      "post": {
        "operationId": "cancel",
        "summary": "إلغاء طلب خدمة",
        "description": "إلغاء طلب خدمة من قبل العميل",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم إلغاء الطلب بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "ok": true
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "لا يمكن إلغاء هذا الطلب في حالته الحالية",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "error": "CANNOT_CANCEL"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "لم يتم العثور على الطلب",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "error": "NOT_FOUND"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer/{id}/accept-offer": {
      "post": {
        "operationId": "accept",
        "summary": "قبول عرض فني",
        "description": "قبول عرض مقدم من فني لطلب خدمة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AcceptOfferDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم قبول العرض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "ok": true
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "العرض غير متاح أو تم رفضه",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "error": "INVALID_STATUS"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "لم يتم العثور على الطلب أو العرض",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "error": "OFFER_NOT_FOUND"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer/{id}/rate": {
      "post": {
        "operationId": "rate",
        "summary": "تقييم خدمة",
        "description": "تقييم خدمة منجزة وإضافة تعليق",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RateServiceDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إرسال التقييم بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "ok": true
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "الخدمة غير مكتملة أو تم تقييمها مسبقاً",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "error": "NOT_COMPLETED"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "لم يتم العثور على الطلب",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "error": "NOT_FOUND"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/customer/{id}/offers": {
      "get": {
        "operationId": "getOffers",
        "summary": "عروض طلب خدمة",
        "description": "استرداد جميع العروض المقدمة لطلب خدمة محدد",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد العروض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": [
                      {
                        "_id": "6645f731dc490a317ad91884",
                        "requestId": "6645e1a5f2f0a02eab4d9c10",
                        "engineerId": {
                          "_id": "6637d50690fbb31de8d9c445",
                          "firstName": "أحمد",
                          "lastName": "محمد",
                          "phone": "+967711234567",
                          "jobTitle": "مهندس تبريد وتكييف"
                        },
                        "amount": 180,
                        "note": "يشمل قطع الغيار وضمان لمدة شهر",
                        "distanceKm": 4.8,
                        "status": "OFFERED",
                        "createdAt": "2024-06-01T13:05:32.144Z",
                        "updatedAt": "2024-06-01T13:05:32.144Z"
                      },
                      {
                        "_id": "6645f921dc490a317ad9189b",
                        "requestId": "6645e1a5f2f0a02eab4d9c10",
                        "engineerId": {
                          "_id": "6637d54890fbb31de8d9c54a",
                          "firstName": "ليلى",
                          "lastName": "الحسني",
                          "phone": "+967733006677",
                          "jobTitle": "فنية أجهزة كهربائية"
                        },
                        "amount": 200,
                        "note": "يتم إصلاح العطل خلال ساعتين",
                        "distanceKm": 7.1,
                        "status": "OFFERED",
                        "createdAt": "2024-06-01T13:22:01.998Z",
                        "updatedAt": "2024-06-01T13:22:01.998Z"
                      }
                    ]
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذا الطلب"
          },
          "404": {
            "description": "لم يتم العثور على الطلب",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "data": {
                      "error": "REQUEST_NOT_FOUND"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-العملاء"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/engineer/requests/nearby": {
      "get": {
        "operationId": "nearby",
        "summary": "طلبات قريبة من الفني",
        "description": "البحث عن طلبات الخدمات القريبة من موقع الفني الحالي",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم العثور على الطلبات القريبة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "req123",
                            "description": "معرف الطلب"
                          },
                          "title": {
                            "type": "string",
                            "example": "إصلاح جهاز تلفزيون",
                            "description": "عنوان الطلب"
                          },
                          "description": {
                            "type": "string",
                            "example": "شاشة التلفزيون تظهر خطوطاً بيضاء",
                            "description": "وصف المشكلة"
                          },
                          "type": {
                            "type": "string",
                            "example": "repair",
                            "description": "نوع الخدمة"
                          },
                          "location": {
                            "type": "object",
                            "properties": {
                              "address": {
                                "type": "string",
                                "example": "شارع الملك فيصل، صنعاء"
                              },
                              "lat": {
                                "type": "number",
                                "example": 15.3695
                              },
                              "lng": {
                                "type": "number",
                                "example": 44.2019
                              }
                            }
                          },
                          "distance": {
                            "type": "number",
                            "example": 2.5,
                            "description": "المسافة بالكيلومترات"
                          },
                          "customerName": {
                            "type": "string",
                            "example": "محمد أحمد",
                            "description": "اسم العميل"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "خدمات-الفنيين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/engineer/requests/city": {
      "get": {
        "operationId": "listInCity",
        "summary": "طلبات في نفس مدينة الفني",
        "description": "استرداد جميع طلبات الخدمات المتاحة في مدينة الفني دون فلترة حسب المسافة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الطلبات في المدينة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "req123"
                          },
                          "title": {
                            "type": "string",
                            "example": "صيانة مكيف هواء"
                          },
                          "city": {
                            "type": "string",
                            "example": "صنعاء"
                          },
                          "status": {
                            "type": "string",
                            "example": "OPEN"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-الفنيين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/engineer/requests/all": {
      "get": {
        "operationId": "listAll",
        "summary": "جميع طلبات الخدمات المتاحة",
        "description": "استرداد جميع الطلبات المفتوحة أو قيد جمع العروض بدون قيود المدينة أو المسافة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد جميع الطلبات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "req789"
                          },
                          "title": {
                            "type": "string",
                            "example": "تركيب سخان مياه"
                          },
                          "city": {
                            "type": "string",
                            "example": "عدن"
                          },
                          "status": {
                            "type": "string",
                            "example": "OFFERS_COLLECTING"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "خدمات-الفنيين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/engineer/offers": {
      "post": {
        "operationId": "offer",
        "summary": "إرسال عرض للعميل",
        "description": "إرسال عرض سعر لعميل لطلب خدمة محدد",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOfferDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إرسال العرض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "offer123",
                          "description": "معرف العرض الجديد"
                        },
                        "requestId": {
                          "type": "string",
                          "example": "req456",
                          "description": "معرف طلب الخدمة"
                        },
                        "price": {
                          "type": "number",
                          "example": 150,
                          "description": "سعر العرض"
                        },
                        "estimatedHours": {
                          "type": "number",
                          "example": 3,
                          "description": "عدد الساعات المقدرة"
                        },
                        "description": {
                          "type": "string",
                          "example": "سأصلح التلفزيون في غضون 3 ساعات",
                          "description": "وصف العرض"
                        },
                        "status": {
                          "type": "string",
                          "example": "pending",
                          "description": "حالة العرض"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T11:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "بيانات غير صحيحة أو الطلب غير متاح"
          },
          "404": {
            "description": "لم يتم العثور على طلب الخدمة"
          }
        },
        "tags": [
          "خدمات-الفنيين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/engineer/offers/{id}": {
      "patch": {
        "operationId": "updateOffer",
        "summary": "تحديث عرض",
        "description": "تحديث عرض مقدم سابقاً للعميل",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العرض",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateOfferDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث العرض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "offer123"
                        },
                        "price": {
                          "type": "number",
                          "example": 160,
                          "description": "السعر المحدث"
                        },
                        "estimatedHours": {
                          "type": "number",
                          "example": 3.5,
                          "description": "الساعات المقدرة المحدثة"
                        },
                        "description": {
                          "type": "string",
                          "example": "سأصلح التلفزيون في غضون 3.5 ساعات",
                          "description": "الوصف المحدث"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T11:30:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "لا يمكن تحديث هذا العرض في حالته الحالية"
          },
          "403": {
            "description": "غير مصرح لك بتحديث هذا العرض"
          },
          "404": {
            "description": "لم يتم العثور على العرض"
          }
        },
        "tags": [
          "خدمات-الفنيين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteOffer",
        "summary": "حذف عرض",
        "description": "تمكين الفني من حذف عرضه إذا لم يتم قبوله بعد",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العرض",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف العرض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "ok": {
                          "type": "boolean",
                          "example": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "لا يمكن حذف العرض في حالته الحالية"
          },
          "404": {
            "description": "لم يتم العثور على العرض"
          }
        },
        "tags": [
          "خدمات-الفنيين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/engineer/requests/{id}/start": {
      "post": {
        "operationId": "start",
        "summary": "بدء العمل في طلب خدمة",
        "description": "بدء العمل في طلب خدمة مكلف به الفني",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف طلب الخدمة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم بدء العمل بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "req123"
                        },
                        "status": {
                          "type": "string",
                          "example": "in_progress"
                        },
                        "startedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T14:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "لا يمكن بدء العمل في هذا الطلب"
          },
          "403": {
            "description": "غير مصرح لك بالعمل على هذا الطلب"
          },
          "404": {
            "description": "لم يتم العثور على الطلب"
          }
        },
        "tags": [
          "خدمات-الفنيين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/engineer/requests/{id}/complete": {
      "post": {
        "operationId": "complete",
        "summary": "إكمال طلب خدمة",
        "description": "إكمال طلب خدمة منجز من قبل الفني",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف طلب الخدمة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم إكمال الطلب بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "req123"
                        },
                        "status": {
                          "type": "string",
                          "example": "completed"
                        },
                        "completedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T17:00:00Z"
                        },
                        "totalTime": {
                          "type": "number",
                          "example": 3,
                          "description": "إجمالي وقت العمل بالساعات"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "لا يمكن إكمال هذا الطلب في حالته الحالية"
          },
          "403": {
            "description": "غير مصرح لك بإكمال هذا الطلب"
          },
          "404": {
            "description": "لم يتم العثور على الطلب"
          }
        },
        "tags": [
          "خدمات-الفنيين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/engineer/offers/my": {
      "get": {
        "operationId": "myOffers",
        "summary": "عروضي",
        "description": "استرداد جميع العروض المقدمة من قبل الفني",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد عروضك بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "offer123",
                            "description": "معرف العرض"
                          },
                          "requestId": {
                            "type": "string",
                            "example": "req456",
                            "description": "معرف طلب الخدمة"
                          },
                          "requestTitle": {
                            "type": "string",
                            "example": "إصلاح جهاز تلفزيون",
                            "description": "عنوان طلب الخدمة"
                          },
                          "price": {
                            "type": "number",
                            "example": 150,
                            "description": "سعر العرض"
                          },
                          "estimatedHours": {
                            "type": "number",
                            "example": 3,
                            "description": "عدد الساعات المقدرة"
                          },
                          "status": {
                            "type": "string",
                            "example": "pending",
                            "description": "حالة العرض"
                          },
                          "customerName": {
                            "type": "string",
                            "example": "محمد أحمد",
                            "description": "اسم العميل"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T11:00:00Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح لك بالوصول"
          }
        },
        "tags": [
          "خدمات-الفنيين"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/requests": {
      "get": {
        "operationId": "list",
        "summary": "قائمة طلبات الخدمات",
        "description": "استرداد قائمة بجميع طلبات الخدمات مع إمكانية التصفية والترقيم",
        "parameters": [
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "حالة الطلب",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "description": "نوع الخدمة",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "engineerId",
            "required": false,
            "in": "query",
            "description": "معرف الفني",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "معرف العميل",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "dateFrom",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "dateTo",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "نص البحث",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العناصر في الصفحة",
            "schema": {
              "example": "20"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "example": "1"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد قائمة الطلبات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "req123",
                            "description": "معرف الطلب"
                          },
                          "title": {
                            "type": "string",
                            "example": "إصلاح جهاز تلفزيون",
                            "description": "عنوان الطلب"
                          },
                          "description": {
                            "type": "string",
                            "example": "شاشة التلفزيون تظهر خطوطاً بيضاء",
                            "description": "وصف المشكلة"
                          },
                          "status": {
                            "type": "string",
                            "example": "pending",
                            "description": "حالة الطلب"
                          },
                          "type": {
                            "type": "string",
                            "example": "repair",
                            "description": "نوع الخدمة"
                          },
                          "userId": {
                            "type": "string",
                            "example": "user456",
                            "description": "معرف العميل"
                          },
                          "engineerId": {
                            "type": "string",
                            "example": "eng789",
                            "description": "معرف الفني المسؤول"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00Z"
                          }
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "number",
                          "example": 150,
                          "description": "إجمالي العناصر"
                        },
                        "page": {
                          "type": "number",
                          "example": 1,
                          "description": "الصفحة الحالية"
                        },
                        "limit": {
                          "type": "number",
                          "example": 20,
                          "description": "عدد العناصر في الصفحة"
                        },
                        "totalPages": {
                          "type": "number",
                          "example": 8,
                          "description": "إجمالي الصفحات"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذه البيانات"
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/requests/{id}": {
      "get": {
        "operationId": "getRequest",
        "summary": "الحصول على تفاصيل طلب خدمة",
        "description": "استرداد تفاصيل كاملة لطلب خدمة محدد",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف طلب الخدمة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد تفاصيل الطلب بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "req123",
                          "description": "معرف الطلب"
                        },
                        "title": {
                          "type": "string",
                          "example": "إصلاح جهاز تلفزيون",
                          "description": "عنوان الطلب"
                        },
                        "description": {
                          "type": "string",
                          "example": "شاشة التلفزيون تظهر خطوطاً بيضاء",
                          "description": "وصف المشكلة"
                        },
                        "status": {
                          "type": "string",
                          "example": "in_progress",
                          "description": "حالة الطلب"
                        },
                        "type": {
                          "type": "string",
                          "example": "repair",
                          "description": "نوع الخدمة"
                        },
                        "userId": {
                          "type": "string",
                          "example": "user456",
                          "description": "معرف العميل"
                        },
                        "engineerId": {
                          "type": "string",
                          "example": "eng789",
                          "description": "معرف الفني المسؤول"
                        },
                        "location": {
                          "type": "object",
                          "properties": {
                            "address": {
                              "type": "string",
                              "example": "شارع الملك فيصل، صنعاء"
                            },
                            "lat": {
                              "type": "number",
                              "example": 15.3695
                            },
                            "lng": {
                              "type": "number",
                              "example": 44.2019
                            }
                          }
                        },
                        "images": {
                          "type": "array",
                          "items": {
                            "type": "string",
                            "example": "https://example.com/image1.jpg"
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T10:30:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "غير مصرح لك بالوصول إلى هذا الطلب"
          },
          "404": {
            "description": "لم يتم العثور على الطلب"
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/requests/{id}/offers": {
      "get": {
        "operationId": "getRequestOffers",
        "summary": "الحصول على عروض طلب خدمة",
        "description": "استرداد جميع العروض المقدمة لطلب خدمة محدد",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف طلب الخدمة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد العروض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "offer123",
                            "description": "معرف العرض"
                          },
                          "engineerId": {
                            "type": "string",
                            "example": "eng456",
                            "description": "معرف الفني"
                          },
                          "engineerName": {
                            "type": "string",
                            "example": "أحمد محمد",
                            "description": "اسم الفني"
                          },
                          "price": {
                            "type": "number",
                            "example": 150,
                            "description": "سعر العرض"
                          },
                          "estimatedHours": {
                            "type": "number",
                            "example": 3,
                            "description": "عدد الساعات المقدرة"
                          },
                          "description": {
                            "type": "string",
                            "example": "سأصلح التلفزيون في غضون 3 ساعات",
                            "description": "وصف العرض"
                          },
                          "status": {
                            "type": "string",
                            "example": "pending",
                            "description": "حالة العرض"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T11:00:00Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "لم يتم العثور على الطلب"
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/requests/{id}/status": {
      "patch": {
        "operationId": "updateRequestStatus",
        "summary": "تحديث حالة طلب خدمة",
        "description": "تحديث حالة طلب خدمة من قبل الإدارة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف طلب الخدمة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "example": "approved",
                    "description": "الحالة الجديدة"
                  },
                  "note": {
                    "type": "string",
                    "example": "تم الموافقة على الطلب",
                    "description": "ملاحظة إضافية"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث حالة الطلب بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "req123"
                        },
                        "status": {
                          "type": "string",
                          "example": "approved"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T12:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "لم يتم العثور على الطلب"
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/requests/{id}/cancel": {
      "post": {
        "operationId": "cancel",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/requests/{id}/assign-engineer": {
      "post": {
        "operationId": "assignEngineer",
        "summary": "تعيين فني لطلب خدمة",
        "description": "تعيين فني محدد لطلب خدمة من قبل الإدارة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف طلب الخدمة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "engineerId"
                ],
                "properties": {
                  "engineerId": {
                    "type": "string",
                    "example": "eng456",
                    "description": "معرف الفني"
                  },
                  "note": {
                    "type": "string",
                    "example": "تم تعيين الفني أحمد للمهمة",
                    "description": "ملاحظة إضافية"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تعيين الفني بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "req123"
                        },
                        "engineerId": {
                          "type": "string",
                          "example": "eng456"
                        },
                        "status": {
                          "type": "string",
                          "example": "assigned"
                        },
                        "assignedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T12:30:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "لم يتم العثور على الطلب أو الفني"
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/statistics/overview": {
      "get": {
        "operationId": "getOverviewStats",
        "summary": "إحصائيات عامة للخدمات",
        "description": "استرداد إحصائيات شاملة حول جميع الخدمات والطلبات",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalRequests": {
                          "type": "number",
                          "example": 1250,
                          "description": "إجمالي الطلبات"
                        },
                        "pendingRequests": {
                          "type": "number",
                          "example": 45,
                          "description": "الطلبات المعلقة"
                        },
                        "inProgressRequests": {
                          "type": "number",
                          "example": 23,
                          "description": "الطلبات قيد التنفيذ"
                        },
                        "completedRequests": {
                          "type": "number",
                          "example": 1182,
                          "description": "الطلبات المكتملة"
                        },
                        "totalEngineers": {
                          "type": "number",
                          "example": 15,
                          "description": "إجمالي الفنيين"
                        },
                        "activeEngineers": {
                          "type": "number",
                          "example": 12,
                          "description": "الفنيين النشطين"
                        },
                        "averageRating": {
                          "type": "number",
                          "example": 4.3,
                          "description": "متوسط التقييمات"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/statistics/requests": {
      "get": {
        "operationId": "getRequestsStats",
        "summary": "إحصائيات الطلبات",
        "description": "استرداد إحصائيات مفصلة حول الطلبات حسب الفترة الزمنية",
        "parameters": [
          {
            "name": "dateFrom",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية (ISO format)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "dateTo",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية (ISO format)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "groupBy",
            "required": false,
            "in": "query",
            "description": "تجميع البيانات حسب",
            "schema": {
              "enum": [
                "day",
                "week",
                "month"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد إحصائيات الطلبات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "period": {
                            "type": "string",
                            "example": "2024-01-15",
                            "description": "الفترة الزمنية"
                          },
                          "totalRequests": {
                            "type": "number",
                            "example": 25,
                            "description": "إجمالي الطلبات"
                          },
                          "completedRequests": {
                            "type": "number",
                            "example": 22,
                            "description": "الطلبات المكتملة"
                          },
                          "cancelledRequests": {
                            "type": "number",
                            "example": 3,
                            "description": "الطلبات الملغية"
                          },
                          "averageCompletionTime": {
                            "type": "number",
                            "example": 4.5,
                            "description": "متوسط وقت الإنجاز (ساعات)"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/statistics/engineers": {
      "get": {
        "operationId": "getEngineersStats",
        "summary": "إحصائيات الفنيين",
        "description": "استرداد إحصائيات أداء الفنيين خلال فترة زمنية محددة",
        "parameters": [
          {
            "name": "dateFrom",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية (ISO format)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "dateTo",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية (ISO format)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد الفنيين المراد استرجاعهم",
            "schema": {
              "example": "10"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد إحصائيات الفنيين بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "engineerId": {
                            "type": "string",
                            "example": "eng123",
                            "description": "معرف الفني"
                          },
                          "engineerName": {
                            "type": "string",
                            "example": "أحمد محمد",
                            "description": "اسم الفني"
                          },
                          "totalRequests": {
                            "type": "number",
                            "example": 45,
                            "description": "إجمالي الطلبات"
                          },
                          "completedRequests": {
                            "type": "number",
                            "example": 42,
                            "description": "الطلبات المكتملة"
                          },
                          "averageRating": {
                            "type": "number",
                            "example": 4.6,
                            "description": "متوسط التقييمات"
                          },
                          "totalEarnings": {
                            "type": "number",
                            "example": 2250,
                            "description": "إجمالي الأرباح"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/statistics/services-types": {
      "get": {
        "operationId": "getServiceTypesStats",
        "summary": "إحصائيات أنواع الخدمات",
        "description": "استرداد إحصائيات حول أنواع الخدمات المختلفة وتوزيع الطلبات عليها",
        "parameters": [
          {
            "name": "dateFrom",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "dateTo",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد إحصائيات أنواع الخدمات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "serviceType": {
                            "type": "string",
                            "example": "repair",
                            "description": "نوع الخدمة"
                          },
                          "serviceTypeName": {
                            "type": "string",
                            "example": "إصلاح",
                            "description": "اسم نوع الخدمة"
                          },
                          "totalRequests": {
                            "type": "number",
                            "example": 156,
                            "description": "إجمالي الطلبات"
                          },
                          "completedRequests": {
                            "type": "number",
                            "example": 148,
                            "description": "الطلبات المكتملة"
                          },
                          "averagePrice": {
                            "type": "number",
                            "example": 125.5,
                            "description": "متوسط السعر"
                          },
                          "averageRating": {
                            "type": "number",
                            "example": 4.2,
                            "description": "متوسط التقييمات"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/statistics/revenue": {
      "get": {
        "operationId": "getRevenueStats",
        "parameters": [
          {
            "name": "dateFrom",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "dateTo",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "groupBy",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/engineers": {
      "get": {
        "operationId": "getEngineersList",
        "parameters": [
          {
            "name": "search",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/engineers/{id}/statistics": {
      "get": {
        "operationId": "getEngineerStats",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/engineers/{id}/offers": {
      "get": {
        "operationId": "getEngineerOffers",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/engineers/statistics/overview": {
      "get": {
        "operationId": "getEngineersOverviewStatistics",
        "summary": "احصل على إحصائيات عامة للمهندسين",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EngineersOverviewStatisticsDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/offers/statistics": {
      "get": {
        "operationId": "getOffersStatistics",
        "summary": "احصل على إحصائيات العروض",
        "parameters": [
          {
            "name": "dateFrom",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "dateTo",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OffersStatisticsDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/offers": {
      "get": {
        "operationId": "getOffersManagementList",
        "summary": "احصل على قائمة العروض للإدارة",
        "parameters": [
          {
            "name": "status",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "requestId",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "engineerId",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OffersManagementResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/requests/{id}/accept-offer": {
      "post": {
        "operationId": "acceptOfferByAdmin",
        "summary": "قبول عرض من قبل الإدارة",
        "description": "قبول عرض مهندس لطلب خدمة من قبل الإدارة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف طلب الخدمة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "offerId"
                ],
                "properties": {
                  "offerId": {
                    "type": "string",
                    "example": "507f1f77bcf86cd799439011",
                    "description": "معرف العرض"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم قبول العرض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "ok": {
                      "type": "boolean",
                      "example": true
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "حالة غير صالحة"
          },
          "404": {
            "description": "الطلب أو العرض غير موجود"
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/offers/{id}/reject": {
      "post": {
        "operationId": "rejectOfferByAdmin",
        "summary": "رفض عرض من قبل الإدارة",
        "description": "رفض عرض مهندس من قبل الإدارة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العرض",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "reason": {
                    "type": "string",
                    "example": "تم رفض العرض",
                    "description": "سبب الرفض (اختياري)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم رفض العرض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "ok": {
                      "type": "boolean",
                      "example": true
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "العرض غير موجود"
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/services/admin/offers/{id}/cancel": {
      "post": {
        "operationId": "cancelOfferByAdmin",
        "summary": "إلغاء عرض من قبل الإدارة",
        "description": "إلغاء عرض مهندس من قبل الإدارة",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العرض",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "reason": {
                    "type": "string",
                    "example": "تم إلغاء العرض",
                    "description": "سبب الإلغاء (اختياري)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم إلغاء العرض بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "ok": {
                      "type": "boolean",
                      "example": true
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "العرض غير موجود"
          }
        },
        "tags": [
          "إدارة-الخدمات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/search": {
      "get": {
        "operationId": "universalSearch",
        "summary": "بحث شامل في المنتجات، الفئات، والبراندات",
        "description": "البحث في جميع كيانات النظام (منتجات، فئات، علامات تجارية) باستخدام نص بحث واحد",
        "parameters": [
          {
            "name": "q",
            "required": false,
            "in": "query",
            "description": "نص البحث",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "lang",
            "required": false,
            "in": "query",
            "description": "اللغة",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          },
          {
            "name": "entity",
            "required": false,
            "in": "query",
            "description": "نوع الكيانات",
            "schema": {
              "enum": [
                "products",
                "categories",
                "brands",
                "all"
              ],
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "minimum": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد النتائج",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم إجراء البحث بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "products": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "prod123",
                                "description": "معرف المنتج"
                              },
                              "name": {
                                "type": "string",
                                "example": "هاتف ذكي سامسونج",
                                "description": "اسم المنتج"
                              },
                              "price": {
                                "type": "number",
                                "example": 250.99,
                                "description": "السعر"
                              },
                              "category": {
                                "type": "string",
                                "example": "إلكترونيات",
                                "description": "الفئة"
                              },
                              "brand": {
                                "type": "string",
                                "example": "سامسونج",
                                "description": "العلامة التجارية"
                              }
                            }
                          }
                        },
                        "categories": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "cat123",
                                "description": "معرف الفئة"
                              },
                              "name": {
                                "type": "string",
                                "example": "إلكترونيات",
                                "description": "اسم الفئة"
                              },
                              "productCount": {
                                "type": "number",
                                "example": 45,
                                "description": "عدد المنتجات في الفئة"
                              }
                            }
                          }
                        },
                        "brands": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "brand123",
                                "description": "معرف العلامة التجارية"
                              },
                              "name": {
                                "type": "string",
                                "example": "سامسونج",
                                "description": "اسم العلامة التجارية"
                              },
                              "productCount": {
                                "type": "number",
                                "example": 120,
                                "description": "عدد المنتجات للعلامة"
                              }
                            }
                          }
                        },
                        "meta": {
                          "type": "object",
                          "properties": {
                            "totalResults": {
                              "type": "number",
                              "example": 245,
                              "description": "إجمالي النتائج"
                            },
                            "searchTime": {
                              "type": "number",
                              "example": 0.15,
                              "description": "وقت البحث بالثواني"
                            },
                            "query": {
                              "type": "string",
                              "example": "هاتف سامسونج",
                              "description": "نص البحث المستخدم"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "البحث"
        ]
      }
    },
    "/api/v1/search/products": {
      "get": {
        "operationId": "advancedProductSearch",
        "summary": "بحث متقدم في المنتجات مع filters",
        "description": "بحث متقدم في المنتجات مع فلاتر متعددة تشمل الفئات، العلامات التجارية، الأسعار، التصنيفات، والخصائص",
        "parameters": [
          {
            "name": "q",
            "required": false,
            "in": "query",
            "description": "نص البحث",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "lang",
            "required": false,
            "in": "query",
            "description": "اللغة",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          },
          {
            "name": "categoryId",
            "required": false,
            "in": "query",
            "description": "معرف الفئة",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "brandId",
            "required": false,
            "in": "query",
            "description": "معرف البراند",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "الحالة",
            "schema": {
              "enum": [
                "draft",
                "active",
                "out_of_stock",
                "discontinued"
              ],
              "type": "string"
            }
          },
          {
            "name": "isFeatured",
            "required": false,
            "in": "query",
            "description": "منتجات مميزة",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "isNew",
            "required": false,
            "in": "query",
            "description": "منتجات جديدة",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "minPrice",
            "required": false,
            "in": "query",
            "description": "السعر الأدنى",
            "schema": {
              "minimum": 0,
              "type": "number"
            }
          },
          {
            "name": "maxPrice",
            "required": false,
            "in": "query",
            "description": "السعر الأعلى",
            "schema": {
              "minimum": 0,
              "type": "number"
            }
          },
          {
            "name": "minRating",
            "required": false,
            "in": "query",
            "description": "التقييم الأدنى",
            "schema": {
              "minimum": 0,
              "maximum": 5,
              "type": "number"
            }
          },
          {
            "name": "attributes",
            "required": false,
            "in": "query",
            "description": "JSON string",
            "schema": {
              "example": "{\"color\": \"red\", \"size\": \"large\"}",
              "type": "string"
            }
          },
          {
            "name": "tags",
            "required": false,
            "in": "query",
            "description": "الوسوم",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "ترتيب حسب",
            "schema": {
              "enum": [
                "name",
                "price",
                "rating",
                "views",
                "createdAt",
                "relevance"
              ],
              "type": "string"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "اتجاه الترتيب",
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "minimum": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد النتائج",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "type": "number"
            }
          },
          {
            "name": "includeFacets",
            "required": false,
            "in": "query",
            "description": "إرجاع الـ Facets",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم إجراء البحث المتقدم بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "products": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "prod123",
                                "description": "معرف المنتج"
                              },
                              "name": {
                                "type": "string",
                                "example": "هاتف ذكي سامسونج",
                                "description": "اسم المنتج"
                              },
                              "price": {
                                "type": "number",
                                "example": 250.99,
                                "description": "السعر"
                              },
                              "category": {
                                "type": "string",
                                "example": "إلكترونيات",
                                "description": "الفئة"
                              },
                              "brand": {
                                "type": "string",
                                "example": "سامسونج",
                                "description": "العلامة التجارية"
                              },
                              "rating": {
                                "type": "number",
                                "example": 4.5,
                                "description": "التصنيف"
                              },
                              "isFeatured": {
                                "type": "boolean",
                                "example": true,
                                "description": "مميز"
                              },
                              "isNew": {
                                "type": "boolean",
                                "example": false,
                                "description": "جديد"
                              }
                            }
                          }
                        },
                        "facets": {
                          "type": "object",
                          "properties": {
                            "categories": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "example": "cat123"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "إلكترونيات"
                                  },
                                  "count": {
                                    "type": "number",
                                    "example": 45
                                  }
                                }
                              }
                            },
                            "brands": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "example": "brand123"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "سامسونج"
                                  },
                                  "count": {
                                    "type": "number",
                                    "example": 12
                                  }
                                }
                              }
                            },
                            "priceRanges": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "min": {
                                    "type": "number",
                                    "example": 100
                                  },
                                  "max": {
                                    "type": "number",
                                    "example": 500
                                  },
                                  "count": {
                                    "type": "number",
                                    "example": 25
                                  }
                                }
                              }
                            }
                          }
                        },
                        "meta": {
                          "type": "object",
                          "properties": {
                            "total": {
                              "type": "number",
                              "example": 125,
                              "description": "إجمالي النتائج"
                            },
                            "page": {
                              "type": "number",
                              "example": 1,
                              "description": "الصفحة الحالية"
                            },
                            "limit": {
                              "type": "number",
                              "example": 20,
                              "description": "عدد النتائج في الصفحة"
                            },
                            "totalPages": {
                              "type": "number",
                              "example": 7,
                              "description": "إجمالي الصفحات"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "البحث"
        ]
      }
    },
    "/api/v1/search/suggestions": {
      "get": {
        "operationId": "getSuggestions",
        "summary": "اقتراحات البحث (Autocomplete)",
        "description": "استرداد اقتراحات البحث التلقائية أثناء كتابة المستخدم لنص البحث",
        "parameters": [
          {
            "name": "q",
            "required": true,
            "in": "query",
            "description": "نص البحث",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "lang",
            "required": false,
            "in": "query",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الاقتراحات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "text": {
                            "type": "string",
                            "example": "هاتف سامسونج",
                            "description": "نص الاقتراح"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "product",
                              "category",
                              "brand"
                            ],
                            "example": "product",
                            "description": "نوع الاقتراح"
                          },
                          "id": {
                            "type": "string",
                            "example": "prod123",
                            "description": "معرف الكيان"
                          },
                          "relevance": {
                            "type": "number",
                            "example": 0.95,
                            "description": "درجة الصلة"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "البحث"
        ]
      }
    },
    "/api/v1/search/autocomplete": {
      "get": {
        "operationId": "autocomplete",
        "summary": "الإكمال التلقائي للبحث",
        "description": "نفس وظيفة الاقتراحات ولكن باسم بديل للتوافق مع APIs القديمة",
        "parameters": [
          {
            "name": "q",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "lang",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد اقتراحات الإكمال التلقائي بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "text": {
                            "type": "string",
                            "example": "هاتف سامسونج",
                            "description": "نص الاقتراح"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "product",
                              "category",
                              "brand"
                            ],
                            "example": "product",
                            "description": "نوع الاقتراح"
                          },
                          "id": {
                            "type": "string",
                            "example": "prod123",
                            "description": "معرف الكيان"
                          },
                          "relevance": {
                            "type": "number",
                            "example": 0.95,
                            "description": "درجة الصلة"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "البحث"
        ]
      }
    },
    "/api/v1/admin/search/stats": {
      "get": {
        "operationId": "getSearchStats",
        "summary": "إحصائيات البحث الشاملة",
        "description": "استرداد إحصائيات شاملة حول عمليات البحث في النظام",
        "parameters": [
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية (YYYY-MM-DD)",
            "schema": {
              "example": "2024-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية (YYYY-MM-DD)",
            "schema": {
              "example": "2024-12-31",
              "type": "string"
            }
          },
          {
            "name": "language",
            "required": false,
            "in": "query",
            "description": "اللغة",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          },
          {
            "name": "entityType",
            "required": false,
            "in": "query",
            "description": "نوع الكيان",
            "schema": {
              "enum": [
                "products",
                "categories",
                "brands",
                "all"
              ],
              "type": "string"
            }
          },
          {
            "name": "zeroResults",
            "required": false,
            "in": "query",
            "description": "عمليات البحث بدون نتائج فقط",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalSearches": {
                          "type": "number",
                          "example": 15420,
                          "description": "إجمالي عمليات البحث"
                        },
                        "totalUniqueQueries": {
                          "type": "number",
                          "example": 3250,
                          "description": "عدد الاستعلامات الفريدة"
                        },
                        "averageResultsPerSearch": {
                          "type": "number",
                          "example": 8.5,
                          "description": "متوسط النتائج لكل بحث"
                        },
                        "zeroResultSearches": {
                          "type": "number",
                          "example": 420,
                          "description": "عمليات بحث بدون نتائج"
                        },
                        "zeroResultsPercentage": {
                          "type": "number",
                          "example": 2.7,
                          "description": "نسبة البحث بدون نتائج"
                        },
                        "averageResponseTime": {
                          "type": "number",
                          "example": 125,
                          "description": "متوسط وقت الاستجابة (ms)"
                        },
                        "topLanguage": {
                          "type": "string",
                          "example": "ar",
                          "description": "اللغة الأكثر استخداماً"
                        },
                        "topEntityType": {
                          "type": "string",
                          "example": "products",
                          "description": "نوع الكيان الأكثر بحثاً"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-البحث"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/search/top-terms": {
      "get": {
        "operationId": "getTopSearchTerms",
        "summary": "الكلمات المفتاحية الأكثر بحثاً",
        "description": "استرداد قائمة بالكلمات والعبارات الأكثر بحثاً في النظام",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد النتائج",
            "schema": {
              "default": 20,
              "type": "number"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "تاريخ البداية",
            "schema": {
              "example": "2024-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "تاريخ النهاية",
            "schema": {
              "example": "2024-12-31",
              "type": "string"
            }
          },
          {
            "name": "language",
            "required": false,
            "in": "query",
            "description": "اللغة",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الكلمات المفتاحية بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "query": {
                            "type": "string",
                            "example": "هاتف سامسونج",
                            "description": "نص البحث"
                          },
                          "count": {
                            "type": "number",
                            "example": 450,
                            "description": "عدد مرات البحث"
                          },
                          "hasResults": {
                            "type": "boolean",
                            "example": true,
                            "description": "وجود نتائج"
                          },
                          "averageResults": {
                            "type": "number",
                            "example": 12,
                            "description": "متوسط عدد النتائج"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-البحث"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/search/zero-results": {
      "get": {
        "operationId": "getZeroResultSearches",
        "summary": "عمليات البحث بدون نتائج",
        "description": "استرداد قائمة بعمليات البحث التي لم تُرجع أي نتائج (مفيد لتحسين المحتوى)",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد عمليات البحث الفاشلة بنجاح"
          }
        },
        "tags": [
          "إدارة-البحث"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/search/trends": {
      "get": {
        "operationId": "getSearchTrends",
        "summary": "اتجاهات البحث عبر الزمن",
        "description": "تحليل اتجاهات البحث على مدى فترة زمنية محددة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد اتجاهات البحث بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "date": {
                            "type": "string",
                            "example": "2024-01-15",
                            "description": "التاريخ"
                          },
                          "count": {
                            "type": "number",
                            "example": 450,
                            "description": "عدد عمليات البحث"
                          },
                          "uniqueQueries": {
                            "type": "number",
                            "example": 120,
                            "description": "الاستعلامات الفريدة"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-البحث"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/search/logs": {
      "get": {
        "operationId": "getSearchLogs",
        "summary": "سجلات البحث",
        "description": "استرداد سجلات عمليات البحث مع إمكانية الفلترة",
        "parameters": [
          {
            "name": "query",
            "required": false,
            "in": "query",
            "description": "نص البحث للفلترة",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "معرف المستخدم",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "hasResults",
            "required": false,
            "in": "query",
            "description": "وجود نتائج",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "من تاريخ",
            "schema": {
              "example": "2024-01-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "إلى تاريخ",
            "schema": {
              "example": "2024-12-31",
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد النتائج",
            "schema": {
              "default": 20,
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "الصفحة",
            "schema": {
              "default": 1,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد السجلات بنجاح"
          }
        },
        "tags": [
          "إدارة-البحث"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/search/most-searched-products": {
      "get": {
        "operationId": "getMostSearchedProducts",
        "summary": "المنتجات الأكثر ظهوراً في البحث",
        "description": "استرداد قائمة بالمنتجات الأكثر شيوعاً في نتائج البحث",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد النتائج",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد المنتجات الأكثر بحثاً بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "507f1f77bcf86cd799439011"
                          },
                          "name": {
                            "type": "string",
                            "example": "هاتف سامسونج"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Samsung Phone"
                          },
                          "mainImage": {
                            "type": "string",
                            "example": "https://..."
                          },
                          "viewsCount": {
                            "type": "number",
                            "example": 1250
                          },
                          "rating": {
                            "type": "number",
                            "example": 4.5
                          },
                          "reviewsCount": {
                            "type": "number",
                            "example": 85
                          },
                          "isFeatured": {
                            "type": "boolean",
                            "example": true
                          },
                          "category": {
                            "type": "object"
                          },
                          "brand": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-البحث"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/search/most-searched-categories": {
      "get": {
        "operationId": "getMostSearchedCategories",
        "summary": "الفئات الأكثر بحثاً",
        "description": "استرداد قائمة بالفئات الأكثر شيوعاً في عمليات البحث",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الفئات بنجاح"
          }
        },
        "tags": [
          "إدارة-البحث"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/search/most-searched-brands": {
      "get": {
        "operationId": "getMostSearchedBrands",
        "summary": "العلامات التجارية الأكثر بحثاً",
        "description": "استرداد قائمة بالعلامات التجارية الأكثر شيوعاً في البحث",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد العلامات التجارية بنجاح"
          }
        },
        "tags": [
          "إدارة-البحث"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/search/performance": {
      "get": {
        "operationId": "getPerformanceMetrics",
        "summary": "مؤشرات أداء البحث",
        "description": "استرداد مؤشرات الأداء ومعلومات النظام للبحث",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد مؤشرات الأداء بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "indexedData": {
                          "type": "object",
                          "properties": {
                            "totalProducts": {
                              "type": "number",
                              "example": 1250
                            },
                            "activeProducts": {
                              "type": "number",
                              "example": 1180
                            },
                            "totalCategories": {
                              "type": "number",
                              "example": 45
                            },
                            "totalBrands": {
                              "type": "number",
                              "example": 32
                            }
                          }
                        },
                        "cacheStatus": {
                          "type": "object",
                          "properties": {
                            "searchCacheTTL": {
                              "type": "number",
                              "example": 300
                            },
                            "suggestionsCacheTTL": {
                              "type": "number",
                              "example": 1800
                            },
                            "facetsCacheTTL": {
                              "type": "number",
                              "example": 600
                            }
                          }
                        },
                        "systemHealth": {
                          "type": "string",
                          "example": "healthy"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-البحث"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/search/clear-cache": {
      "post": {
        "operationId": "clearCache",
        "summary": "مسح ذاكرة التخزين المؤقت للبحث",
        "description": "مسح جميع بيانات الكاش الخاصة بالبحث (للصيانة أو التحديثات)",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم مسح الكاش بنجاح"
          }
        },
        "tags": [
          "إدارة-البحث"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/brands": {
      "post": {
        "operationId": "createBrand",
        "summary": "إنشاء علامة تجارية جديدة",
        "description": "إنشاء علامة تجارية جديدة في النظام. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-العلامات-التجارية"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "بيانات العلامة التجارية الجديدة",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateBrandDto"
              },
              "examples": {
                "samsung": {
                  "summary": "إنشاء علامة سامسونج",
                  "value": {
                    "name": "سامسونج",
                    "nameEn": "Samsung",
                    "description": "شركة تقنية كورية جنوبية متخصصة في الإلكترونيات",
                    "logoUrl": "https://example.com/samsung-logo.png",
                    "website": "https://samsung.com"
                  }
                },
                "apple": {
                  "summary": "إنشاء علامة آبل",
                  "value": {
                    "name": "آبل",
                    "nameEn": "Apple",
                    "description": "شركة تقنية أمريكية متخصصة في الإلكترونيات والحاسوب",
                    "logoUrl": "https://example.com/apple-logo.png",
                    "website": "https://apple.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء العلامة التجارية بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "تم إنشاء العلامة التجارية بنجاح"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "سامسونج"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Samsung"
                        },
                        "slug": {
                          "type": "string",
                          "example": "samsung"
                        },
                        "description": {
                          "type": "string",
                          "example": "شركة تقنية كورية جنوبية"
                        },
                        "logoUrl": {
                          "type": "string",
                          "example": "https://example.com/samsung-logo.png"
                        },
                        "website": {
                          "type": "string",
                          "example": "https://samsung.com"
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "listBrands",
        "summary": "الحصول على قائمة العلامات التجارية",
        "description": "الحصول على قائمة بجميع العلامات التجارية مع إمكانية التصفية والترقيم. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-العلامات-التجارية"
        ],
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العناصر في الصفحة",
            "schema": {
              "example": 10,
              "type": "number"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "البحث في أسماء العلامات التجارية",
            "schema": {
              "example": "سامسونج",
              "type": "string"
            }
          },
          {
            "name": "language",
            "required": false,
            "in": "query",
            "schema": {
              "example": "en",
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          },
          {
            "name": "isActive",
            "required": false,
            "in": "query",
            "description": "تصفية العلامات التجارية النشطة",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "schema": {
              "example": "name",
              "enum": [
                "name",
                "createdAt",
                "sortOrder"
              ],
              "type": "string"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "schema": {
              "example": "asc",
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على قائمة العلامات التجارية بنجاح"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/brands/stats/summary": {
      "get": {
        "operationId": "getStats",
        "summary": "إحصائيات العلامات التجارية",
        "description": "الحصول على إحصائيات شاملة عن العلامات التجارية في النظام. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-العلامات-التجارية"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم الحصول على الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "number",
                          "example": 50,
                          "description": "إجمالي عدد العلامات التجارية"
                        },
                        "active": {
                          "type": "number",
                          "example": 45,
                          "description": "عدد العلامات التجارية النشطة"
                        },
                        "inactive": {
                          "type": "number",
                          "example": 5,
                          "description": "عدد العلامات التجارية غير النشطة"
                        },
                        "withProducts": {
                          "type": "number",
                          "example": 35,
                          "description": "عدد العلامات التجارية التي لديها منتجات"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "غير مصرح - مطلوب تسجيل دخول"
          },
          "403": {
            "description": "ممنوع - مطلوب صلاحيات إدارية"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/brands/{id}": {
      "get": {
        "operationId": "getBrand",
        "summary": "الحصول على علامة تجارية بواسطة المعرف",
        "description": "الحصول على تفاصيل علامة تجارية محددة باستخدام المعرف (ObjectId). يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-العلامات-التجارية"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العلامة التجارية (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على العلامة التجارية بنجاح"
          },
          "404": {
            "description": "العلامة التجارية غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "patch": {
        "operationId": "updateBrand",
        "summary": "تحديث علامة تجارية",
        "description": "تحديث بيانات علامة تجارية موجودة. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-العلامات-التجارية"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العلامة التجارية (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "البيانات المحدثة للعلامة التجارية",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateBrandDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث العلامة التجارية بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "تم تحديث العلامة التجارية بنجاح"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "سامسونج المحدث"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Updated Samsung"
                        },
                        "slug": {
                          "type": "string",
                          "example": "updated-samsung"
                        },
                        "description": {
                          "type": "string",
                          "example": "شركة تقنية كورية جنوبية محدثة"
                        },
                        "logoUrl": {
                          "type": "string",
                          "example": "https://example.com/updated-samsung-logo.png"
                        },
                        "website": {
                          "type": "string",
                          "example": "https://samsung.com"
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "العلامة التجارية غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteBrand",
        "summary": "حذف علامة تجارية",
        "description": "حذف علامة تجارية من النظام. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-العلامات-التجارية"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العلامة التجارية (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف العلامة التجارية بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "تم حذف العلامة التجارية بنجاح"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "العلامة التجارية غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/brands/{id}/toggle-status": {
      "patch": {
        "operationId": "toggleBrandStatus",
        "summary": "تبديل حالة العلامة التجارية",
        "description": "تفعيل أو إلغاء تفعيل علامة تجارية. يتطلب صلاحيات إدارية.",
        "tags": [
          "إدارة-العلامات-التجارية"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العلامة التجارية (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم تبديل حالة العلامة التجارية بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "تم تفعيل العلامة التجارية بنجاح"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "سامسونج"
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "العلامة التجارية غير موجودة"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/brands": {
      "get": {
        "operationId": "getActiveBrands",
        "summary": "الحصول على قائمة العلامات التجارية النشطة",
        "description": "يُرجع قائمة بجميع العلامات التجارية النشطة مع إمكانية التصفية والترقيم. هذا endpoint عام ولا يتطلب مصادقة.",
        "tags": [
          "العلامات-التجارية"
        ],
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "رقم الصفحة",
            "schema": {
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "عدد العناصر في الصفحة",
            "schema": {
              "example": 10,
              "type": "number"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "البحث في أسماء العلامات التجارية",
            "schema": {
              "example": "سامسونج",
              "type": "string"
            }
          },
          {
            "name": "language",
            "required": false,
            "in": "query",
            "schema": {
              "example": "en",
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          },
          {
            "name": "isActive",
            "required": false,
            "in": "query",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "ترتيب النتائج",
            "schema": {
              "enum": [
                "name",
                "createdAt",
                "updatedAt"
              ],
              "type": "string"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "اتجاه الترتيب",
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على قائمة العلامات التجارية بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "64a1b2c3d4e5f6789abcdef0"
                          },
                          "name": {
                            "type": "string",
                            "example": "سامسونج"
                          },
                          "nameEn": {
                            "type": "string",
                            "example": "Samsung"
                          },
                          "slug": {
                            "type": "string",
                            "example": "samsung"
                          },
                          "description": {
                            "type": "string",
                            "example": "شركة تقنية كورية جنوبية"
                          },
                          "logoUrl": {
                            "type": "string",
                            "example": "https://example.com/samsung-logo.png"
                          },
                          "website": {
                            "type": "string",
                            "example": "https://samsung.com"
                          },
                          "isActive": {
                            "type": "boolean",
                            "example": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "number",
                          "example": 1
                        },
                        "limit": {
                          "type": "number",
                          "example": 10
                        },
                        "total": {
                          "type": "number",
                          "example": 50
                        },
                        "totalPages": {
                          "type": "number",
                          "example": 5
                        },
                        "hasNext": {
                          "type": "boolean",
                          "example": true
                        },
                        "hasPrev": {
                          "type": "boolean",
                          "example": false
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/brands/slug/{slug}": {
      "get": {
        "operationId": "getBrandBySlug",
        "summary": "الحصول على علامة تجارية بواسطة الـ slug",
        "description": "يُرجع تفاصيل علامة تجارية محددة باستخدام الـ slug. هذا endpoint عام ولا يتطلب مصادقة.",
        "tags": [
          "العلامات-التجارية"
        ],
        "parameters": [
          {
            "name": "slug",
            "required": true,
            "in": "path",
            "description": "الـ slug الخاص بالعلامة التجارية",
            "schema": {
              "example": "samsung",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على العلامة التجارية بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "سامسونج"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Samsung"
                        },
                        "slug": {
                          "type": "string",
                          "example": "samsung"
                        },
                        "description": {
                          "type": "string",
                          "example": "شركة تقنية كورية جنوبية"
                        },
                        "logoUrl": {
                          "type": "string",
                          "example": "https://example.com/samsung-logo.png"
                        },
                        "website": {
                          "type": "string",
                          "example": "https://samsung.com"
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "العلامة التجارية غير موجودة",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "العلامة التجارية غير موجودة"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/brands/{id}": {
      "get": {
        "operationId": "getBrandById",
        "summary": "الحصول على علامة تجارية بواسطة المعرف",
        "description": "يُرجع تفاصيل علامة تجارية محددة باستخدام المعرف (ObjectId). هذا endpoint عام ولا يتطلب مصادقة.",
        "tags": [
          "العلامات-التجارية"
        ],
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "معرف العلامة التجارية (ObjectId)",
            "schema": {
              "example": "64a1b2c3d4e5f6789abcdef0",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم الحصول على العلامة التجارية بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "64a1b2c3d4e5f6789abcdef0"
                        },
                        "name": {
                          "type": "string",
                          "example": "سامسونج"
                        },
                        "nameEn": {
                          "type": "string",
                          "example": "Samsung"
                        },
                        "slug": {
                          "type": "string",
                          "example": "samsung"
                        },
                        "description": {
                          "type": "string",
                          "example": "شركة تقنية كورية جنوبية"
                        },
                        "logoUrl": {
                          "type": "string",
                          "example": "https://example.com/samsung-logo.png"
                        },
                        "website": {
                          "type": "string",
                          "example": "https://samsung.com"
                        },
                        "isActive": {
                          "type": "boolean",
                          "example": true
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "العلامة التجارية غير موجودة",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "العلامة التجارية غير موجودة"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/audit/logs": {
      "get": {
        "operationId": "getAuditLogs",
        "summary": "الحصول على سجلات التدقيق مع التصفية",
        "description": "استرداد سجلات التدقيق مع خيارات التصفية المتنوعة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد سجلات التدقيق بنجاح"
          }
        },
        "tags": [
          "التدقيق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/audit/stats": {
      "get": {
        "operationId": "getAuditStats",
        "summary": "الحصول على إحصائيات التدقيق",
        "description": "الحصول على إحصائيات حول سجلات التدقيق",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "التدقيق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/audit/actions": {
      "get": {
        "operationId": "getAuditActions",
        "summary": "الحصول على إجراءات التدقيق المتاحة",
        "description": "الحصول على قائمة بجميع إجراءات التدقيق المتاحة",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "التدقيق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/audit/resources": {
      "get": {
        "operationId": "getAuditResources",
        "summary": "الحصول على موارد التدقيق المتاحة",
        "description": "الحصول على قائمة بجميع موارد التدقيق المتاحة",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "التدقيق"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/i18n/public/translations/{lang}": {
      "get": {
        "operationId": "getPublicTranslations",
        "summary": "الحصول على جميع الترجمات للغة معينة (عام)",
        "description": "يستخدم من قبل Frontend لتحميل الترجمات",
        "parameters": [
          {
            "name": "lang",
            "required": true,
            "in": "path",
            "description": "اللغة",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          },
          {
            "name": "namespace",
            "required": false,
            "in": "query",
            "description": "تحديد مساحة معينة (اختياري)",
            "schema": {
              "enum": [
                "common",
                "auth",
                "products",
                "orders",
                "services",
                "users",
                "settings",
                "errors",
                "validation",
                "notifications"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الترجمات بنجاح"
          }
        },
        "tags": [
          "إدارة نصوص التعريب"
        ]
      }
    },
    "/api/v1/i18n/public/all": {
      "get": {
        "operationId": "getAllPublicTranslations",
        "summary": "الحصول على جميع الترجمات مجمعة (عام)",
        "description": "جميع الترجمات مجمعة حسب المساحة واللغة",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الترجمات بنجاح"
          }
        },
        "tags": [
          "إدارة نصوص التعريب"
        ]
      }
    },
    "/api/v1/i18n": {
      "post": {
        "operationId": "createTranslation",
        "summary": "إنشاء ترجمة جديدة",
        "description": "إضافة ترجمة جديدة للنظام",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTranslationDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء الترجمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TranslationDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة نصوص التعريب"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "get": {
        "operationId": "getTranslations",
        "summary": "الحصول على قائمة الترجمات",
        "description": "استرداد الترجمات مع التصفية",
        "parameters": [
          {
            "name": "namespace",
            "required": false,
            "in": "query",
            "description": "المساحة/الوحدة",
            "schema": {
              "enum": [
                "common",
                "auth",
                "products",
                "orders",
                "services",
                "users",
                "settings",
                "errors",
                "validation",
                "notifications"
              ],
              "type": "string"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "البحث في المفتاح أو النص",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "missingOnly",
            "required": false,
            "in": "query",
            "description": "إظهار الترجمات المفقودة فقط",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "missingLanguage",
            "required": false,
            "in": "query",
            "description": "اللغة المفقودة",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الترجمات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TranslationDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة نصوص التعريب"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/i18n/statistics": {
      "get": {
        "operationId": "getStatistics",
        "summary": "الحصول على إحصائيات الترجمات",
        "description": "تحليلات شاملة عن الترجمات ونسبة الاكتمال",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TranslationStatsDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة نصوص التعريب"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/i18n/bulk-import": {
      "post": {
        "operationId": "bulkImport",
        "summary": "استيراد ترجمات بالجملة",
        "description": "استيراد ملف JSON يحتوي على ترجمات متعددة",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkImportDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم الاستيراد بنجاح"
          }
        },
        "tags": [
          "إدارة نصوص التعريب"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/i18n/export": {
      "get": {
        "operationId": "exportTranslations",
        "summary": "تصدير الترجمات",
        "description": "تصدير الترجمات بصيغ مختلفة (JSON, CSV)",
        "parameters": [
          {
            "name": "namespace",
            "required": false,
            "in": "query",
            "description": "المساحة/الوحدة للتصدير",
            "schema": {
              "enum": [
                "common",
                "auth",
                "products",
                "orders",
                "services",
                "users",
                "settings",
                "errors",
                "validation",
                "notifications"
              ],
              "type": "string"
            }
          },
          {
            "name": "format",
            "required": false,
            "in": "query",
            "description": "صيغة التصدير",
            "schema": {
              "enum": [
                "json",
                "csv"
              ],
              "type": "string"
            }
          },
          {
            "name": "language",
            "required": false,
            "in": "query",
            "description": "اللغة للتصدير (أو كلاهما)",
            "schema": {
              "enum": [
                "ar",
                "en",
                "both"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم التصدير بنجاح"
          }
        },
        "tags": [
          "إدارة نصوص التعريب"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/i18n/{key}": {
      "get": {
        "operationId": "getTranslationByKey",
        "summary": "الحصول على ترجمة بالمفتاح",
        "description": "استرداد تفاصيل ترجمة معينة",
        "parameters": [
          {
            "name": "key",
            "required": true,
            "in": "path",
            "description": "مفتاح الترجمة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الترجمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TranslationDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة نصوص التعريب"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "put": {
        "operationId": "updateTranslation",
        "summary": "تحديث ترجمة",
        "description": "تعديل ترجمة موجودة",
        "parameters": [
          {
            "name": "key",
            "required": true,
            "in": "path",
            "description": "مفتاح الترجمة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTranslationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث الترجمة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TranslationDto"
                }
              }
            }
          }
        },
        "tags": [
          "إدارة نصوص التعريب"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteTranslation",
        "summary": "حذف ترجمة",
        "description": "حذف ترجمة من النظام",
        "parameters": [
          {
            "name": "key",
            "required": true,
            "in": "path",
            "description": "مفتاح الترجمة",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف الترجمة بنجاح"
          }
        },
        "tags": [
          "إدارة نصوص التعريب"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/policies": {
      "get": {
        "operationId": "getAllPolicies",
        "summary": "جلب جميع السياسات",
        "description": "الحصول على جميع السياسات (للأدمن)",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب السياسات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PolicyResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "إدارة-السياسات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "post": {
        "operationId": "createPolicy",
        "summary": "إنشاء سياسة جديدة",
        "description": "إنشاء سياسة جديدة من لوحة التحكم (terms أو privacy)",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePolicyDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء السياسة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PolicyResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "سياسة من نفس النوع موجودة بالفعل"
          }
        },
        "tags": [
          "إدارة-السياسات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/policies/{type}": {
      "get": {
        "operationId": "getPolicyByType",
        "summary": "جلب سياسة حسب النوع",
        "description": "الحصول على سياسة معينة حسب النوع (terms أو privacy)",
        "parameters": [
          {
            "name": "type",
            "required": true,
            "in": "path",
            "description": "نوع السياسة",
            "schema": {
              "enum": [
                "terms",
                "privacy"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب السياسة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PolicyResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "السياسة غير موجودة"
          }
        },
        "tags": [
          "إدارة-السياسات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      },
      "put": {
        "operationId": "updatePolicy",
        "summary": "تحديث سياسة",
        "description": "تحديث سياسة معينة حسب النوع",
        "parameters": [
          {
            "name": "type",
            "required": true,
            "in": "path",
            "description": "نوع السياسة",
            "schema": {
              "enum": [
                "terms",
                "privacy"
              ],
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePolicyDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث السياسة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PolicyResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "السياسة غير موجودة"
          }
        },
        "tags": [
          "إدارة-السياسات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/admin/policies/{type}/toggle": {
      "post": {
        "operationId": "togglePolicy",
        "summary": "تفعيل/تعطيل سياسة",
        "description": "تفعيل أو تعطيل سياسة معينة",
        "parameters": [
          {
            "name": "type",
            "required": true,
            "in": "path",
            "description": "نوع السياسة",
            "schema": {
              "enum": [
                "terms",
                "privacy"
              ],
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TogglePolicyDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث حالة السياسة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PolicyResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "السياسة غير موجودة"
          }
        },
        "tags": [
          "إدارة-السياسات"
        ],
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/api/v1/policies/public/terms": {
      "get": {
        "operationId": "getTermsAndConditions",
        "summary": "جلب الأحكام والشروط",
        "description": "الحصول على سياسة الأحكام والشروط النشطة (عام - بدون مصادقة)",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب الأحكام والشروط بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PolicyResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "لا توجد سياسة نشطة"
          }
        },
        "tags": [
          "السياسات-العامة"
        ]
      }
    },
    "/api/v1/policies/public/privacy": {
      "get": {
        "operationId": "getPrivacyPolicy",
        "summary": "جلب سياسة الخصوصية",
        "description": "الحصول على سياسة الخصوصية النشطة (عام - بدون مصادقة)",
        "parameters": [],
        "responses": {
          "200": {
            "description": "تم جلب سياسة الخصوصية بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PolicyResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "لا توجد سياسة نشطة"
          }
        },
        "tags": [
          "السياسات-العامة"
        ]
      }
    },
    "/api/v1/policies/public/{type}": {
      "get": {
        "operationId": "getPolicyByType",
        "summary": "جلب سياسة حسب النوع",
        "description": "الحصول على سياسة معينة حسب النوع (عام - بدون مصادقة)",
        "parameters": [
          {
            "name": "type",
            "required": true,
            "in": "path",
            "description": "نوع السياسة",
            "schema": {
              "enum": [
                "terms",
                "privacy"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم جلب السياسة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PolicyResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "لا توجد سياسة نشطة"
          }
        },
        "tags": [
          "السياسات-العامة"
        ]
      }
    },
    "/api/v1/health": {
      "get": {
        "operationId": "check",
        "parameters": [],
        "responses": {
          "200": {
            "description": "The Health Check is successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {},
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "The Health Check is not successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        },
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/simple": {
      "get": {
        "operationId": "simple",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/api/v1/health/ready": {
      "get": {
        "operationId": "ready",
        "parameters": [],
        "responses": {
          "200": {
            "description": "The Health Check is successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {},
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "The Health Check is not successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        },
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/live": {
      "get": {
        "operationId": "live",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    }
  },
  "info": {
    "title": "Tagadod API",
    "description": "Complete e-commerce platform for solar products with advanced analytics and multi-language support",
    "version": "1.0",
    "contact": {}
  },
  "tags": [
    {
      "name": "auth",
      "description": "Authentication and authorization endpoints"
    },
    {
      "name": "users",
      "description": "User management and profiles"
    },
    {
      "name": "products",
      "description": "Product catalog and management"
    },
    {
      "name": "categories",
      "description": "Product categories and organization"
    },
    {
      "name": "brands",
      "description": "Brand management"
    },
    {
      "name": "attributes",
      "description": "Product attributes and specifications"
    },
    {
      "name": "cart",
      "description": "Shopping cart operations"
    },
    {
      "name": "checkout",
      "description": "Order processing and checkout"
    },
    {
      "name": "orders",
      "description": "Order management and tracking"
    },
    {
      "name": "analytics",
      "description": "Analytics and reporting"
    },
    {
      "name": "marketing",
      "description": "Marketing campaigns and promotions"
    },
    {
      "name": "notifications",
      "description": "Notification system"
    },
    {
      "name": "support",
      "description": "Customer support and tickets"
    },
    {
      "name": "services",
      "description": "Service requests and management"
    },
    {
      "name": "favorites",
      "description": "User favorites and wishlist"
    },
    {
      "name": "addresses",
      "description": "Address management"
    },
    {
      "name": "exchange-rates",
      "description": "Currency conversion and exchange rates"
    },
    {
      "name": "search",
      "description": "Product search and filtering"
    },
    {
      "name": "upload",
      "description": "File upload and media management"
    }
  ],
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    },
    {
      "url": "https://tagdod-project.onrender.com",
      "description": "Production server"
    }
  ],
  "components": {
    "securitySchemes": {
      "JWT-auth": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http",
        "name": "JWT",
        "description": "Enter JWT token",
        "in": "header"
      }
    },
    "schemas": {
      "SendOtpDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم الهاتف لإرسال كود التحقق إليه",
            "example": "+966501234567",
            "pattern": "^\\+?[1-9]\\d{1,14}$",
            "minLength": 10,
            "maxLength": 15
          },
          "context": {
            "type": "string",
            "description": "سياق إرسال كود التحقق",
            "enum": [
              "register",
              "reset"
            ],
            "example": "register",
            "default": "register"
          }
        },
        "required": [
          "phone"
        ]
      },
      "VerifyOtpDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم الهاتف المرتبط بكود التحقق",
            "example": "+966501234567",
            "pattern": "^\\+?[1-9]\\d{1,14}$",
            "minLength": 10,
            "maxLength": 15
          },
          "code": {
            "type": "string",
            "description": "كود التحقق المرسل عبر الرسائل النصية",
            "example": "123456",
            "minLength": 6,
            "maxLength": 6,
            "pattern": "^[0-9]{6}$"
          },
          "firstName": {
            "type": "string",
            "description": "الاسم الأول للمستخدم (للتسجيل)",
            "example": "أحمد",
            "minLength": 2,
            "maxLength": 50
          },
          "lastName": {
            "type": "string",
            "description": "الاسم الأخير للمستخدم (للتسجيل)",
            "example": "محمد",
            "minLength": 2,
            "maxLength": 50
          },
          "gender": {
            "type": "string",
            "description": "الجنس",
            "enum": [
              "male",
              "female",
              "other"
            ],
            "example": "male"
          },
          "city": {
            "type": "string",
            "description": "المدينة",
            "example": "صنعاء",
            "minLength": 2,
            "maxLength": 50
          },
          "capabilityRequest": {
            "type": "string",
            "description": "نوع القدرة المطلوبة",
            "enum": [
              "engineer",
              "merchant"
            ],
            "example": "engineer"
          },
          "jobTitle": {
            "type": "string",
            "description": "المسمى الوظيفي للمهندس (مطلوب إذا كان capabilityRequest = \"engineer\")",
            "example": "مهندس ميكانيكي",
            "minLength": 3,
            "maxLength": 100
          },
          "deviceId": {
            "type": "string",
            "description": "معرف الجهاز للمزامنة التلقائية للمفضلات",
            "example": "device_123456789",
            "minLength": 10,
            "maxLength": 50
          }
        },
        "required": [
          "phone",
          "code"
        ]
      },
      "SetPasswordDto": {
        "type": "object",
        "properties": {
          "password": {
            "type": "string",
            "description": "كلمة المرور الجديدة",
            "example": "SecurePassword123!",
            "minLength": 8,
            "maxLength": 128,
            "format": "password"
          }
        },
        "required": [
          "password"
        ]
      },
      "Currency": {
        "type": "string",
        "description": "العملة المفضلة للمستخدم",
        "enum": [
          "USD",
          "YER",
          "SAR"
        ]
      },
      "UpdatePreferredCurrencyDto": {
        "type": "object",
        "properties": {
          "currency": {
            "example": "SAR",
            "$ref": "#/components/schemas/Currency"
          }
        },
        "required": [
          "currency"
        ]
      },
      "ForgotPasswordDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم الهاتف المرتبط بالحساب",
            "example": "+966501234567",
            "pattern": "^\\+?[1-9]\\d{1,14}$",
            "minLength": 10,
            "maxLength": 15
          }
        },
        "required": [
          "phone"
        ]
      },
      "ResetPasswordDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم الهاتف المرتبط بالحساب",
            "example": "+966501234567",
            "pattern": "^\\+?[1-9]\\d{1,14}$",
            "minLength": 10,
            "maxLength": 15
          },
          "code": {
            "type": "string",
            "description": "كود التحقق المرسل عبر الرسائل النصية",
            "example": "123456",
            "minLength": 6,
            "maxLength": 6,
            "pattern": "^[0-9]{6}$"
          },
          "newPassword": {
            "type": "string",
            "description": "كلمة المرور الجديدة",
            "example": "NewSecurePassword123!",
            "minLength": 8,
            "maxLength": 128
          }
        },
        "required": [
          "phone",
          "code",
          "newPassword"
        ]
      },
      "DeleteAccountDto": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "description": "سبب حذف الحساب (ملاحظة)",
            "example": "لا أستخدم التطبيق بعد الآن",
            "minLength": 5,
            "maxLength": 500
          }
        },
        "required": [
          "reason"
        ]
      },
      "AdminLoginDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم هاتف الأدمن",
            "example": "0501234567"
          },
          "password": {
            "type": "string",
            "description": "كلمة المرور",
            "example": "SecurePassword123!",
            "minLength": 6
          }
        },
        "required": [
          "phone",
          "password"
        ]
      },
      "UserSignupDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم هاتف المستخدم",
            "example": "0501234567"
          },
          "password": {
            "type": "string",
            "description": "كلمة المرور",
            "example": "MySecurePassword123!",
            "minLength": 6
          },
          "firstName": {
            "type": "string",
            "description": "الاسم الأول",
            "example": "أحمد",
            "minLength": 2,
            "maxLength": 50
          },
          "lastName": {
            "type": "string",
            "description": "الاسم الأخير",
            "example": "محمد",
            "minLength": 2,
            "maxLength": 50
          },
          "gender": {
            "type": "string",
            "description": "الجنس",
            "enum": [
              "male",
              "female",
              "other"
            ],
            "example": "male"
          },
          "city": {
            "type": "string",
            "description": "المدينة",
            "example": "صنعاء",
            "minLength": 2,
            "maxLength": 50
          },
          "capabilityRequest": {
            "type": "string",
            "description": "نوع القدرة المطلوبة",
            "enum": [
              "engineer",
              "merchant"
            ],
            "example": "engineer"
          },
          "jobTitle": {
            "type": "string",
            "description": "المسمى الوظيفي للمهندس (مطلوب إذا كان capabilityRequest = \"engineer\")",
            "example": "مهندس كهرباء",
            "minLength": 3,
            "maxLength": 100
          },
          "deviceId": {
            "type": "string",
            "description": "معرف الجهاز للمزامنة التلقائية للمفضلات",
            "example": "device_123456789",
            "minLength": 10,
            "maxLength": 50
          }
        },
        "required": [
          "phone",
          "password",
          "firstName",
          "lastName",
          "gender"
        ]
      },
      "BiometricRegisterChallengeDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم هاتف المستخدم المرتبط بالحساب",
            "example": "0501234567"
          },
          "deviceName": {
            "type": "string",
            "description": "اسم الجهاز أو معرف ودي لعرضه في لوحة التحكم",
            "example": "iPhone 15 Pro"
          },
          "userAgent": {
            "type": "string",
            "description": "قيمة User-Agent الخاصة بالجهاز"
          }
        },
        "required": [
          "phone"
        ]
      },
      "BiometricRegisterVerifyDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم هاتف المستخدم المرتبط بالحساب",
            "example": "0501234567"
          },
          "response": {
            "type": "object",
            "description": "استجابة WebAuthn من الجهاز"
          },
          "deviceName": {
            "type": "string",
            "description": "اسم ودي للجهاز لتسجيله في الحساب",
            "example": "MacBook Pro M3"
          },
          "userAgent": {
            "type": "string",
            "description": "قيمة User-Agent الخاصة بالجهاز"
          }
        },
        "required": [
          "phone",
          "response"
        ]
      },
      "BiometricLoginChallengeDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم هاتف المستخدم",
            "example": "0501234567"
          },
          "userAgent": {
            "type": "string",
            "description": "قيمة User-Agent للجهاز الحالي"
          }
        },
        "required": [
          "phone"
        ]
      },
      "BiometricLoginVerifyDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم هاتف المستخدم",
            "example": "0501234567"
          },
          "response": {
            "type": "object",
            "description": "استجابة WebAuthn من الجهاز"
          },
          "userAgent": {
            "type": "string",
            "description": "قيمة User-Agent للجهاز الحالي"
          }
        },
        "required": [
          "phone",
          "response"
        ]
      },
      "UserLoginDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم هاتف المستخدم",
            "example": "0501234567"
          },
          "password": {
            "type": "string",
            "description": "كلمة المرور",
            "example": "MyPassword123!",
            "minLength": 6
          }
        },
        "required": [
          "phone",
          "password"
        ]
      },
      "AddFavoriteDto": {
        "type": "object",
        "properties": {}
      },
      "RemoveFavoriteDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateFavoriteDto": {
        "type": "object",
        "properties": {}
      },
      "SyncFavoritesDto": {
        "type": "object",
        "properties": {}
      },
      "GuestAddFavoriteDto": {
        "type": "object",
        "properties": {}
      },
      "GuestRemoveFavoriteDto": {
        "type": "object",
        "properties": {}
      },
      "CreateProductDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateProductDto": {
        "type": "object",
        "properties": {}
      },
      "CreateVariantDto": {
        "type": "object",
        "properties": {}
      },
      "GenerateVariantsDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateVariantDto": {
        "type": "object",
        "properties": {}
      },
      "AttributeType": {
        "type": "string",
        "description": "نوع السمة",
        "enum": [
          "select",
          "multiselect",
          "text",
          "number",
          "boolean",
          "color"
        ]
      },
      "CreateAttributeDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "اسم السمة باللغة العربية",
            "example": "اللون",
            "minLength": 1,
            "maxLength": 100
          },
          "nameEn": {
            "type": "string",
            "description": "اسم السمة باللغة الإنجليزية",
            "example": "Color",
            "minLength": 1,
            "maxLength": 100
          },
          "type": {
            "example": "select",
            "$ref": "#/components/schemas/AttributeType"
          },
          "description": {
            "type": "string",
            "description": "وصف السمة",
            "example": "لون المنتج",
            "maxLength": 500
          },
          "order": {
            "type": "number",
            "description": "ترتيب العرض (للتنظيم)",
            "example": 1,
            "minimum": 0,
            "default": 0
          },
          "isFilterable": {
            "type": "boolean",
            "description": "هل السمة قابلة للفلترة في الواجهة؟",
            "example": true,
            "default": true
          },
          "isRequired": {
            "type": "boolean",
            "description": "هل السمة إلزامية عند إنشاء منتج؟",
            "example": false,
            "default": false
          },
          "showInFilters": {
            "type": "boolean",
            "description": "هل تظهر السمة في الفلاتر الجانبية؟",
            "example": true,
            "default": false
          },
          "groupId": {
            "type": "string",
            "description": "معرف مجموعة السمات (للتنظيم)",
            "example": "64a1b2c3d4e5f6789abcdef1"
          }
        },
        "required": [
          "name",
          "nameEn",
          "type"
        ]
      },
      "UpdateAttributeDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "اسم السمة باللغة العربية",
            "example": "اللون المحدث",
            "minLength": 1,
            "maxLength": 100
          },
          "nameEn": {
            "type": "string",
            "description": "اسم السمة باللغة الإنجليزية",
            "example": "Updated Color",
            "minLength": 1,
            "maxLength": 100
          },
          "type": {
            "example": "select",
            "$ref": "#/components/schemas/AttributeType"
          },
          "description": {
            "type": "string",
            "description": "وصف السمة",
            "example": "لون المنتج المحدث",
            "maxLength": 500
          },
          "order": {
            "type": "number",
            "description": "ترتيب العرض (للتنظيم)",
            "example": 2,
            "minimum": 0
          },
          "isActive": {
            "type": "boolean",
            "description": "هل السمة نشطة؟",
            "example": true,
            "default": true
          },
          "isFilterable": {
            "type": "boolean",
            "description": "هل السمة قابلة للفلترة في الواجهة؟",
            "example": true
          },
          "isRequired": {
            "type": "boolean",
            "description": "هل السمة إلزامية عند إنشاء منتج؟",
            "example": false
          },
          "showInFilters": {
            "type": "boolean",
            "description": "هل تظهر السمة في الفلاتر الجانبية؟",
            "example": true
          },
          "groupId": {
            "type": "string",
            "description": "معرف مجموعة السمات (للتنظيم)",
            "example": "64a1b2c3d4e5f6789abcdef1"
          }
        }
      },
      "CreateAttributeValueDto": {
        "type": "object",
        "properties": {
          "value": {
            "type": "string",
            "description": "القيمة باللغة العربية",
            "example": "أحمر",
            "minLength": 1,
            "maxLength": 100
          },
          "valueEn": {
            "type": "string",
            "description": "القيمة باللغة الإنجليزية",
            "example": "Red",
            "maxLength": 100
          },
          "hexCode": {
            "type": "string",
            "description": "كود اللون (Hex Code) - للألوان",
            "example": "#FF0000",
            "pattern": "^#[0-9A-Fa-f]{6}$"
          },
          "imageUrl": {
            "type": "string",
            "description": "رابط الصورة",
            "example": "https://example.com/images/red-color.jpg",
            "format": "uri"
          },
          "imageId": {
            "type": "string",
            "description": "معرف الصورة في النظام",
            "example": "img_123456789"
          },
          "description": {
            "type": "string",
            "description": "وصف القيمة",
            "example": "اللون الأحمر الفاتح",
            "maxLength": 500
          },
          "order": {
            "type": "number",
            "description": "ترتيب العرض",
            "example": 1,
            "minimum": 0,
            "default": 0
          }
        },
        "required": [
          "value"
        ]
      },
      "UpdateAttributeValueDto": {
        "type": "object",
        "properties": {
          "value": {
            "type": "string",
            "description": "القيمة باللغة العربية",
            "example": "أحمر داكن",
            "minLength": 1,
            "maxLength": 100
          },
          "valueEn": {
            "type": "string",
            "description": "القيمة باللغة الإنجليزية",
            "example": "Dark Red",
            "maxLength": 100
          },
          "hexCode": {
            "type": "string",
            "description": "كود اللون (Hex Code) - للألوان",
            "example": "#CC0000",
            "pattern": "^#[0-9A-Fa-f]{6}$"
          },
          "imageUrl": {
            "type": "string",
            "description": "رابط الصورة",
            "example": "https://example.com/images/dark-red-color.jpg",
            "format": "uri"
          },
          "imageId": {
            "type": "string",
            "description": "معرف الصورة في النظام",
            "example": "img_987654321"
          },
          "description": {
            "type": "string",
            "description": "وصف القيمة",
            "example": "اللون الأحمر الداكن",
            "maxLength": 500
          },
          "order": {
            "type": "number",
            "description": "ترتيب العرض",
            "example": 2,
            "minimum": 0
          },
          "isActive": {
            "type": "boolean",
            "description": "هل القيمة نشطة؟",
            "example": true,
            "default": true
          }
        }
      },
      "CreateCategoryDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateCategoryDto": {
        "type": "object",
        "properties": {}
      },
      "ConvertCurrencyDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateExchangeRateDto": {
        "type": "object",
        "properties": {}
      },
      "MarkAsReadDto": {
        "type": "object",
        "properties": {}
      },
      "CreateNotificationDto": {
        "type": "object",
        "properties": {}
      },
      "UserInfoDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم الهاتف"
          },
          "firstName": {
            "type": "string",
            "description": "الاسم الأول"
          },
          "lastName": {
            "type": "string",
            "description": "الاسم الأخير"
          },
          "status": {
            "type": "string",
            "description": "حالة الحساب",
            "enum": [
              "active",
              "suspended",
              "pending",
              "deleted"
            ]
          },
          "roles": {
            "description": "أدوار المستخدم",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "تاريخ إنشاء الحساب"
          },
          "lastLogin": {
            "format": "date-time",
            "type": "string",
            "description": "آخر تسجيل دخول"
          }
        },
        "required": [
          "phone",
          "status",
          "roles",
          "createdAt"
        ]
      },
      "OrderStatsDto": {
        "type": "object",
        "properties": {
          "total": {
            "type": "number",
            "description": "إجمالي الطلبات"
          },
          "completed": {
            "type": "number",
            "description": "الطلبات المكتملة"
          },
          "pending": {
            "type": "number",
            "description": "الطلبات المعلقة"
          },
          "cancelled": {
            "type": "number",
            "description": "الطلبات الملغية"
          },
          "totalSpent": {
            "type": "number",
            "description": "إجمالي المبلغ المنفق"
          },
          "averageOrderValue": {
            "type": "number",
            "description": "متوسط قيمة الطلب"
          },
          "firstOrderDate": {
            "format": "date-time",
            "type": "string",
            "description": "تاريخ أول طلب"
          },
          "lastOrderDate": {
            "format": "date-time",
            "type": "string",
            "description": "تاريخ آخر طلب"
          },
          "favoriteCategories": {
            "description": "الفئات المفضلة",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "total",
          "completed",
          "pending",
          "cancelled",
          "totalSpent",
          "averageOrderValue",
          "favoriteCategories"
        ]
      },
      "FavoriteStatsDto": {
        "type": "object",
        "properties": {
          "total": {
            "type": "number",
            "description": "إجمالي المفضلة"
          },
          "categories": {
            "description": "الفئات في المفضلة",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "recentFavorites": {
            "description": "آخر المفضلة المضافة",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "total",
          "categories",
          "recentFavorites"
        ]
      },
      "SupportStatsDto": {
        "type": "object",
        "properties": {
          "totalTickets": {
            "type": "number",
            "description": "إجمالي تذاكر الدعم"
          },
          "openTickets": {
            "type": "number",
            "description": "التذاكر المفتوحة"
          },
          "resolvedTickets": {
            "type": "number",
            "description": "التذاكر المحلولة"
          },
          "averageResponseTime": {
            "type": "number",
            "description": "متوسط وقت الاستجابة (بالدقائق)"
          }
        },
        "required": [
          "totalTickets",
          "openTickets",
          "resolvedTickets"
        ]
      },
      "UserScoreDto": {
        "type": "object",
        "properties": {
          "loyaltyScore": {
            "type": "number",
            "description": "نقاط الولاء (0-100)"
          },
          "valueScore": {
            "type": "number",
            "description": "نقاط القيمة المالية (0-100)"
          },
          "activityScore": {
            "type": "number",
            "description": "نقاط النشاط (0-100)"
          },
          "supportScore": {
            "type": "number",
            "description": "نقاط خدمة العملاء (0-100)"
          },
          "overallScore": {
            "type": "number",
            "description": "النقاط الإجمالية (0-100)"
          },
          "rank": {
            "type": "number",
            "description": "الترتيب بين العملاء"
          }
        },
        "required": [
          "loyaltyScore",
          "valueScore",
          "activityScore",
          "supportScore",
          "overallScore",
          "rank"
        ]
      },
      "UserBehaviorDto": {
        "type": "object",
        "properties": {
          "preferredPaymentMethod": {
            "type": "string",
            "description": "طريقة الدفع المفضلة"
          },
          "averageOrderFrequency": {
            "type": "number",
            "description": "متوسط تكرار الطلبات (بالأيام)"
          },
          "seasonalPatterns": {
            "description": "الأنماط الموسمية",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "productPreferences": {
            "description": "تفضيلات المنتجات",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "preferredPaymentMethod",
          "averageOrderFrequency",
          "seasonalPatterns",
          "productPreferences"
        ]
      },
      "UserPredictionsDto": {
        "type": "object",
        "properties": {
          "churnRisk": {
            "type": "string",
            "description": "مخاطر فقدان العميل",
            "enum": [
              "low",
              "medium",
              "high"
            ]
          },
          "nextPurchaseProbability": {
            "type": "number",
            "description": "احتمالية الشراء القادم (0-1)"
          },
          "estimatedLifetimeValue": {
            "type": "number",
            "description": "القيمة المتوقعة للعميل"
          },
          "recommendedActions": {
            "description": "التوصيات المقترحة",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "churnRisk",
          "nextPurchaseProbability",
          "estimatedLifetimeValue",
          "recommendedActions"
        ]
      },
      "UserDetailedStatsDto": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "description": "معرف المستخدم"
          },
          "userInfo": {
            "description": "معلومات المستخدم الأساسية",
            "allOf": [
              {
                "$ref": "#/components/schemas/UserInfoDto"
              }
            ]
          },
          "orders": {
            "description": "إحصائيات الطلبات",
            "allOf": [
              {
                "$ref": "#/components/schemas/OrderStatsDto"
              }
            ]
          },
          "favorites": {
            "description": "إحصائيات المفضلة",
            "allOf": [
              {
                "$ref": "#/components/schemas/FavoriteStatsDto"
              }
            ]
          },
          "support": {
            "description": "إحصائيات الدعم",
            "allOf": [
              {
                "$ref": "#/components/schemas/SupportStatsDto"
              }
            ]
          },
          "score": {
            "description": "نقاط التقييم",
            "allOf": [
              {
                "$ref": "#/components/schemas/UserScoreDto"
              }
            ]
          },
          "behavior": {
            "description": "تحليل السلوك",
            "allOf": [
              {
                "$ref": "#/components/schemas/UserBehaviorDto"
              }
            ]
          },
          "predictions": {
            "description": "التنبؤات والتوصيات",
            "allOf": [
              {
                "$ref": "#/components/schemas/UserPredictionsDto"
              }
            ]
          }
        },
        "required": [
          "userId",
          "userInfo",
          "orders",
          "favorites",
          "support",
          "score",
          "behavior",
          "predictions"
        ]
      },
      "CustomerRankingDto": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "description": "معرف المستخدم"
          },
          "userInfo": {
            "type": "object",
            "description": "معلومات المستخدم"
          },
          "totalSpent": {
            "type": "number",
            "description": "إجمالي المبلغ المنفق"
          },
          "totalOrders": {
            "type": "number",
            "description": "إجمالي الطلبات"
          },
          "rank": {
            "type": "number",
            "description": "الترتيب"
          },
          "score": {
            "type": "number",
            "description": "النقاط الإجمالية"
          }
        },
        "required": [
          "userId",
          "userInfo",
          "totalSpent",
          "totalOrders",
          "rank",
          "score"
        ]
      },
      "OverallUserAnalyticsDto": {
        "type": "object",
        "properties": {
          "totalUsers": {
            "type": "number",
            "description": "إجمالي المستخدمين"
          },
          "activeUsers": {
            "type": "number",
            "description": "المستخدمين النشطين"
          },
          "newUsersThisMonth": {
            "type": "number",
            "description": "المستخدمين الجدد هذا الشهر"
          },
          "topSpenders": {
            "description": "أعلى العملاء إنفاقاً",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "userGrowth": {
            "description": "نمو المستخدمين",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "averageOrderValue": {
            "type": "number",
            "description": "متوسط قيمة الطلب"
          },
          "customerLifetimeValue": {
            "type": "number",
            "description": "القيمة المتوقعة للعميل"
          }
        },
        "required": [
          "totalUsers",
          "activeUsers",
          "newUsersThisMonth",
          "topSpenders",
          "userGrowth",
          "averageOrderValue",
          "customerLifetimeValue"
        ]
      },
      "UserStatsFilterDto": {
        "type": "object",
        "properties": {
          "minScore": {
            "type": "number",
            "description": "تصفية حسب النقاط الدنيا"
          },
          "maxScore": {
            "type": "number",
            "description": "تصفية حسب النقاط العليا"
          },
          "churnRisk": {
            "type": "string",
            "description": "تصفية حسب مخاطر فقدان العميل",
            "enum": [
              "low",
              "medium",
              "high"
            ]
          },
          "status": {
            "type": "string",
            "description": "تصفية حسب حالة الحساب",
            "enum": [
              "active",
              "suspended",
              "pending",
              "deleted"
            ]
          },
          "roles": {
            "description": "تصفية حسب الدور",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "PaginatedUserStatsDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "بيانات المستخدمين",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "meta": {
            "type": "object",
            "description": "معلومات الصفحة"
          }
        },
        "required": [
          "data",
          "meta"
        ]
      },
      "CheckoutPreviewDto": {
        "type": "object",
        "properties": {
          "currency": {
            "type": "string",
            "example": "YER",
            "enum": [
              "YER",
              "SAR",
              "USD"
            ]
          },
          "couponCode": {
            "type": "string",
            "description": "كوبون واحد (للسهولة والتوافق مع الإصدارات القديمة)"
          },
          "couponCodes": {
            "description": "مصفوفة كوبونات متعددة (يتم تطبيقها تراكمياً)",
            "example": [
              "COUPON10",
              "COUPON5"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "currency"
        ]
      },
      "CheckoutConfirmDto": {
        "type": "object",
        "properties": {
          "deliveryAddressId": {
            "type": "string",
            "example": "65abc123def456789"
          },
          "currency": {
            "type": "string",
            "example": "YER"
          },
          "paymentMethod": {
            "type": "string",
            "example": "COD",
            "enum": [
              "COD",
              "BANK_TRANSFER"
            ]
          },
          "paymentProvider": {
            "type": "string"
          },
          "localPaymentAccountId": {
            "type": "string"
          },
          "paymentReference": {
            "type": "string"
          },
          "shippingMethod": {
            "type": "string",
            "example": "standard",
            "enum": [
              "standard",
              "express",
              "same_day",
              "pickup"
            ]
          },
          "customerNotes": {
            "type": "string"
          },
          "couponCode": {
            "type": "string",
            "description": "كوبون واحد (للسهولة والتوافق مع الإصدارات القديمة)"
          },
          "couponCodes": {
            "description": "مصفوفة كوبونات متعددة (يتم تطبيقها تراكمياً)",
            "example": [
              "COUPON10",
              "COUPON5"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "deliveryAddressId",
          "currency",
          "paymentMethod"
        ]
      },
      "CancelOrderDto": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "example": "تغيير رأيي في المنتج"
          }
        },
        "required": [
          "reason"
        ]
      },
      "RateOrderDto": {
        "type": "object",
        "properties": {
          "rating": {
            "type": "number",
            "example": 5,
            "minimum": 1,
            "maximum": 5
          },
          "review": {
            "type": "string"
          }
        },
        "required": [
          "rating"
        ]
      },
      "AddOrderNotesDto": {
        "type": "object",
        "properties": {
          "notes": {
            "type": "string",
            "example": "ملاحظات إضافية للطلب"
          },
          "type": {
            "type": "string",
            "example": "internal"
          }
        },
        "required": [
          "notes"
        ]
      },
      "UpdateOrderStatusDto": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "pending_payment",
              "confirmed",
              "processing",
              "shipped",
              "delivered",
              "completed",
              "on_hold",
              "cancelled",
              "returned",
              "refunded"
            ]
          },
          "notes": {
            "type": "string"
          }
        },
        "required": [
          "status"
        ]
      },
      "ShipOrderDto": {
        "type": "object",
        "properties": {
          "shippingCompany": {
            "type": "string",
            "example": "DHL"
          },
          "trackingNumber": {
            "type": "string",
            "example": "DHL123456789"
          },
          "trackingUrl": {
            "type": "string"
          },
          "estimatedDeliveryDate": {
            "type": "string"
          },
          "notes": {
            "type": "string"
          }
        },
        "required": [
          "shippingCompany",
          "trackingNumber"
        ]
      },
      "RefundOrderDto": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "number",
            "example": 50000
          },
          "reason": {
            "type": "string",
            "example": "عطل في المنتج"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "amount",
          "reason"
        ]
      },
      "VerifyPaymentDto": {
        "type": "object",
        "properties": {
          "verifiedAmount": {
            "type": "number",
            "example": 50000,
            "description": "المبلغ المطابق"
          },
          "verifiedCurrency": {
            "type": "string",
            "example": "YER",
            "enum": [
              "YER",
              "SAR",
              "USD"
            ],
            "description": "العملة المطابقة"
          },
          "notes": {
            "type": "string",
            "description": "ملاحظات المطابقة"
          }
        },
        "required": [
          "verifiedAmount",
          "verifiedCurrency"
        ]
      },
      "BulkOrderUpdateDto": {
        "type": "object",
        "properties": {
          "orderIds": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "pending_payment",
              "confirmed",
              "processing",
              "shipped",
              "delivered",
              "completed",
              "on_hold",
              "cancelled",
              "returned",
              "refunded"
            ]
          },
          "notes": {
            "type": "string"
          }
        },
        "required": [
          "orderIds",
          "status"
        ]
      },
      "WebhookDto": {
        "type": "object",
        "properties": {
          "intentId": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "SUCCESS",
              "FAILED"
            ]
          },
          "amount": {
            "type": "string"
          },
          "signature": {
            "type": "string"
          }
        },
        "required": [
          "intentId",
          "status",
          "amount",
          "signature"
        ]
      },
      "AddItemDto": {
        "type": "object",
        "properties": {
          "variantId": {
            "type": "string",
            "example": "65abc123def456789"
          },
          "productId": {
            "type": "string",
            "example": "65abc123def456780"
          },
          "qty": {
            "type": "number",
            "example": 1,
            "default": 1
          },
          "currency": {
            "type": "string",
            "example": "YER",
            "enum": [
              "YER",
              "SAR",
              "USD"
            ]
          },
          "accountType": {
            "type": "string",
            "example": "retail",
            "enum": [
              "retail",
              "merchant",
              "engineer"
            ]
          }
        },
        "required": [
          "qty"
        ]
      },
      "UpdateItemDto": {
        "type": "object",
        "properties": {
          "qty": {
            "type": "number",
            "example": 2
          }
        },
        "required": [
          "qty"
        ]
      },
      "DeviceDto": {
        "type": "object",
        "properties": {
          "deviceId": {
            "type": "string",
            "example": "device_unique_id_123"
          }
        },
        "required": [
          "deviceId"
        ]
      },
      "PreviewDto": {
        "type": "object",
        "properties": {
          "currency": {
            "type": "string",
            "example": "YER",
            "enum": [
              "YER",
              "SAR",
              "USD"
            ]
          },
          "couponCode": {
            "type": "string"
          }
        },
        "required": [
          "currency"
        ]
      },
      "UpdateCartSettingsDto": {
        "type": "object",
        "properties": {
          "currency": {
            "type": "string",
            "example": "YER",
            "enum": [
              "YER",
              "SAR",
              "USD"
            ]
          },
          "accountType": {
            "type": "string",
            "example": "retail",
            "enum": [
              "retail",
              "merchant",
              "engineer"
            ]
          },
          "metadata": {
            "type": "object"
          }
        }
      },
      "ApplyCouponDto": {
        "type": "object",
        "properties": {
          "couponCode": {
            "type": "string",
            "example": "SUMMER20"
          }
        },
        "required": [
          "couponCode"
        ]
      },
      "GuestAddItemDto": {
        "type": "object",
        "properties": {
          "variantId": {
            "type": "string",
            "example": "65abc123def456789"
          },
          "productId": {
            "type": "string",
            "example": "65abc123def456780"
          },
          "qty": {
            "type": "number",
            "example": 1,
            "default": 1
          },
          "currency": {
            "type": "string",
            "example": "YER",
            "enum": [
              "YER",
              "SAR",
              "USD"
            ]
          },
          "accountType": {
            "type": "string",
            "example": "retail",
            "enum": [
              "retail",
              "merchant",
              "engineer"
            ]
          },
          "deviceId": {
            "type": "string",
            "example": "device_unique_id_123"
          },
          "metadata": {
            "type": "object"
          }
        },
        "required": [
          "qty",
          "deviceId"
        ]
      },
      "GuestUpdateItemDto": {
        "type": "object",
        "properties": {
          "qty": {
            "type": "number",
            "example": 2
          },
          "deviceId": {
            "type": "string",
            "example": "device_unique_id_123"
          }
        },
        "required": [
          "qty",
          "deviceId"
        ]
      },
      "GuestPreviewDto": {
        "type": "object",
        "properties": {
          "currency": {
            "type": "string",
            "example": "YER",
            "enum": [
              "YER",
              "SAR",
              "USD"
            ]
          },
          "couponCode": {
            "type": "string"
          },
          "deviceId": {
            "type": "string",
            "example": "device_unique_id_123"
          }
        },
        "required": [
          "currency",
          "deviceId"
        ]
      },
      "CreatePriceRuleDto": {
        "type": "object",
        "properties": {}
      },
      "UpdatePriceRuleDto": {
        "type": "object",
        "properties": {}
      },
      "PreviewPriceRuleDto": {
        "type": "object",
        "properties": {}
      },
      "CreateCouponDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateCouponDto": {
        "type": "object",
        "properties": {}
      },
      "ValidateCouponDto": {
        "type": "object",
        "properties": {}
      },
      "CreateBannerDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateBannerDto": {
        "type": "object",
        "properties": {}
      },
      "CoordsDto": {
        "type": "object",
        "properties": {
          "lat": {
            "type": "number",
            "example": 15.3694
          },
          "lng": {
            "type": "number",
            "example": 44.191
          }
        },
        "required": [
          "lat",
          "lng"
        ]
      },
      "CreateAddressDto": {
        "type": "object",
        "properties": {
          "label": {
            "type": "string",
            "example": "المنزل",
            "description": "تسمية العنوان"
          },
          "line1": {
            "type": "string",
            "example": "شارع الستين، بجوار مطعم السلطان"
          },
          "city": {
            "type": "string",
            "example": "صنعاء"
          },
          "coords": {
            "description": "الإحداثيات (إجباري)",
            "allOf": [
              {
                "$ref": "#/components/schemas/CoordsDto"
              }
            ]
          },
          "notes": {
            "type": "string",
            "example": "يرجى الاتصال عند الوصول"
          },
          "isDefault": {
            "type": "boolean",
            "default": false
          }
        },
        "required": [
          "label",
          "line1",
          "city",
          "coords"
        ]
      },
      "UpdateAddressDto": {
        "type": "object",
        "properties": {
          "label": {
            "type": "string"
          },
          "line1": {
            "type": "string"
          },
          "city": {
            "type": "string"
          },
          "coords": {
            "$ref": "#/components/schemas/CoordsDto"
          },
          "notes": {
            "type": "string"
          },
          "isDefault": {
            "type": "boolean"
          },
          "isActive": {
            "type": "boolean"
          }
        }
      },
      "CreateSettingDto": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string",
            "description": "مفتاح الإعداد",
            "example": "site_name"
          },
          "value": {
            "type": "object",
            "description": "قيمة الإعداد"
          },
          "category": {
            "type": "string",
            "description": "الفئة",
            "enum": [
              "general",
              "email",
              "payment",
              "shipping",
              "security",
              "notifications",
              "seo",
              "advanced"
            ],
            "default": "general"
          },
          "type": {
            "type": "string",
            "description": "نوع البيانات",
            "enum": [
              "string",
              "number",
              "boolean",
              "object",
              "array"
            ]
          },
          "description": {
            "type": "string",
            "description": "وصف الإعداد"
          },
          "isPublic": {
            "type": "boolean",
            "description": "هل هذا الإعداد عام (يمكن للمستخدمين رؤيته)؟"
          }
        },
        "required": [
          "key",
          "value",
          "category"
        ]
      },
      "SettingDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "معرف الإعداد"
          },
          "key": {
            "type": "string",
            "description": "مفتاح الإعداد"
          },
          "value": {
            "type": "object",
            "description": "قيمة الإعداد"
          },
          "category": {
            "type": "string",
            "description": "الفئة",
            "enum": [
              "general",
              "email",
              "payment",
              "shipping",
              "security",
              "notifications",
              "seo",
              "advanced"
            ]
          },
          "type": {
            "type": "string",
            "description": "نوع البيانات"
          },
          "description": {
            "type": "string",
            "description": "الوصف"
          },
          "isPublic": {
            "type": "boolean",
            "description": "هل عام؟"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "آخر تحديث"
          },
          "updatedBy": {
            "type": "string",
            "description": "آخر من قام بالتحديث"
          }
        },
        "required": [
          "id",
          "key",
          "value",
          "category",
          "type",
          "description",
          "isPublic",
          "updatedAt",
          "updatedBy"
        ]
      },
      "BulkUpdateSettingsDto": {
        "type": "object",
        "properties": {
          "settings": {
            "type": "object",
            "description": "الإعدادات المراد تحديثها",
            "example": {
              "site_name": "TagDoD",
              "site_description": "منصة الطاقة الشمسية",
              "maintenance_mode": false
            }
          }
        },
        "required": [
          "settings"
        ]
      },
      "MediaReferenceDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "64f9c0b5c1a2b3d4e5f67890"
          },
          "url": {
            "type": "string",
            "example": "https://cdn.example.com/images/bank-icon.png"
          },
          "name": {
            "type": "string",
            "example": "أيقونة بنك الكريمي"
          }
        },
        "required": [
          "id",
          "url"
        ]
      },
      "ProviderAccountItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439011"
          },
          "currency": {
            "type": "string",
            "example": "YER"
          },
          "accountNumber": {
            "type": "string",
            "example": "1234567890"
          },
          "isActive": {
            "type": "boolean",
            "default": true
          },
          "displayOrder": {
            "type": "number",
            "default": 0
          },
          "notes": {
            "type": "string"
          },
          "isOverride": {
            "type": "boolean",
            "default": false
          }
        },
        "required": [
          "id",
          "currency",
          "accountNumber",
          "isActive",
          "displayOrder",
          "isOverride"
        ]
      },
      "LocalPaymentAccountResponseDto": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439011"
          },
          "providerName": {
            "type": "string",
            "example": "الكريمي"
          },
          "icon": {
            "$ref": "#/components/schemas/MediaReferenceDto"
          },
          "iconMediaId": {
            "type": "string",
            "example": "64f9c0b5c1a2b3d4e5f67890"
          },
          "type": {
            "type": "string",
            "enum": [
              "bank",
              "wallet"
            ]
          },
          "numberingMode": {
            "type": "string",
            "enum": [
              "shared",
              "per_currency"
            ]
          },
          "supportedCurrencies": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "YER",
                "SAR",
                "USD"
              ]
            }
          },
          "sharedAccountNumber": {
            "type": "string",
            "example": "1234567890"
          },
          "accounts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProviderAccountItemDto"
            }
          },
          "isActive": {
            "type": "boolean",
            "default": true
          },
          "notes": {
            "type": "string"
          },
          "displayOrder": {
            "type": "number",
            "default": 0
          },
          "updatedBy": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "_id",
          "providerName",
          "type",
          "numberingMode",
          "supportedCurrencies",
          "accounts",
          "isActive",
          "displayOrder",
          "createdAt",
          "updatedAt"
        ]
      },
      "GroupedPaymentAccountItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439011"
          },
          "currency": {
            "type": "string",
            "example": "YER"
          },
          "accountNumber": {
            "type": "string",
            "example": "1234567890"
          },
          "isActive": {
            "type": "boolean",
            "default": true
          },
          "displayOrder": {
            "type": "number",
            "default": 0
          },
          "notes": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "currency",
          "accountNumber",
          "isActive",
          "displayOrder"
        ]
      },
      "GroupedPaymentAccountDto": {
        "type": "object",
        "properties": {
          "providerId": {
            "type": "string",
            "example": "507f1f77bcf86cd799439011"
          },
          "providerName": {
            "type": "string",
            "example": "الكريمي"
          },
          "icon": {
            "description": "بيانات الوسائط المرتبطة بالأيقونة",
            "allOf": [
              {
                "$ref": "#/components/schemas/MediaReferenceDto"
              }
            ]
          },
          "type": {
            "type": "string",
            "enum": [
              "bank",
              "wallet"
            ]
          },
          "numberingMode": {
            "type": "string",
            "enum": [
              "shared",
              "per_currency"
            ]
          },
          "supportedCurrencies": {
            "type": "array",
            "description": "العملات المدعومة في وضع shared أو أي حسابات متاحة",
            "items": {
              "type": "string",
              "enum": [
                "YER",
                "SAR",
                "USD"
              ]
            }
          },
          "sharedAccountNumber": {
            "type": "string",
            "example": "1234567890",
            "description": "رقم الحساب المشترك (في وضع shared)"
          },
          "accounts": {
            "description": "تفاصيل الحسابات لكل عملة",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/GroupedPaymentAccountItemDto"
            }
          }
        },
        "required": [
          "providerId",
          "providerName",
          "type",
          "numberingMode",
          "supportedCurrencies",
          "accounts"
        ]
      },
      "ProviderCurrencyAccountDto": {
        "type": "object",
        "properties": {
          "currency": {
            "type": "string",
            "enum": [
              "YER",
              "SAR",
              "USD"
            ],
            "example": "YER"
          },
          "accountNumber": {
            "type": "string",
            "example": "1234567890",
            "description": "رقم الحساب"
          },
          "isActive": {
            "type": "boolean",
            "default": true
          },
          "displayOrder": {
            "type": "number",
            "default": 0
          },
          "notes": {
            "type": "string"
          }
        },
        "required": [
          "currency",
          "accountNumber"
        ]
      },
      "CreateLocalPaymentAccountDto": {
        "type": "object",
        "properties": {
          "providerName": {
            "type": "string",
            "example": "الكريمي",
            "description": "اسم البنك أو المحفظة"
          },
          "iconMediaId": {
            "type": "object",
            "example": "64f9c0b5c1a2b3d4e5f67890",
            "description": "معرف الوسائط للأيقونة"
          },
          "type": {
            "type": "string",
            "enum": [
              "bank",
              "wallet"
            ],
            "example": "bank"
          },
          "numberingMode": {
            "type": "string",
            "enum": [
              "shared",
              "per_currency"
            ],
            "example": "shared"
          },
          "sharedAccountNumber": {
            "type": "string",
            "example": "1234567890",
            "description": "رقم حساب مشترك لكل العملات (في وضع shared)"
          },
          "supportedCurrencies": {
            "type": "array",
            "description": "العملات المدعومة عندما يكون الحساب مشتركاً",
            "items": {
              "type": "string",
              "enum": [
                "YER",
                "SAR",
                "USD"
              ]
            }
          },
          "accounts": {
            "description": "الحسابات لكل عملة (في وضع per_currency أو عند وجود استثناءات)",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProviderCurrencyAccountDto"
            }
          },
          "isActive": {
            "type": "boolean",
            "default": true
          },
          "notes": {
            "type": "string"
          },
          "displayOrder": {
            "type": "number",
            "default": 0
          }
        },
        "required": [
          "providerName",
          "type",
          "numberingMode"
        ]
      },
      "UpdateLocalPaymentAccountDto": {
        "type": "object",
        "properties": {
          "providerName": {
            "type": "string"
          },
          "iconMediaId": {
            "type": "object"
          },
          "type": {
            "type": "string",
            "enum": [
              "bank",
              "wallet"
            ]
          },
          "numberingMode": {
            "type": "string",
            "enum": [
              "shared",
              "per_currency"
            ]
          },
          "sharedAccountNumber": {
            "type": "string"
          },
          "supportedCurrencies": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "YER",
                "SAR",
                "USD"
              ]
            }
          },
          "accounts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProviderCurrencyAccountDto"
            }
          },
          "isActive": {
            "type": "boolean"
          },
          "notes": {
            "type": "string"
          },
          "displayOrder": {
            "type": "number"
          }
        }
      },
      "UpdateSettingDto": {
        "type": "object",
        "properties": {
          "value": {
            "type": "object",
            "description": "قيمة الإعداد"
          },
          "description": {
            "type": "string",
            "description": "الوصف"
          }
        },
        "required": [
          "value"
        ]
      },
      "CreateSupportTicketDto": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "عنوان المشكلة",
            "example": "مشكلة في لوحة الطاقة الشمسية"
          },
          "description": {
            "type": "string",
            "description": "وصف تفصيلي للمشكلة",
            "example": "اللوحة لا تعمل بشكل صحيح منذ يومين"
          },
          "category": {
            "type": "string",
            "description": "تصنيف المشكلة",
            "enum": [
              "technical",
              "billing",
              "products",
              "services",
              "account",
              "other"
            ],
            "example": "technical"
          },
          "priority": {
            "type": "string",
            "description": "أولوية المشكلة",
            "enum": [
              "low",
              "medium",
              "high",
              "urgent"
            ],
            "example": "medium"
          },
          "attachments": {
            "description": "روابط الملفات المرفوعة",
            "example": [
              "https://cdn.bunny.net/uploads/image1.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "object",
            "description": "بيانات إضافية (مثل رقم الطلب أو رقم المنتج)",
            "example": {
              "orderId": "12345",
              "productId": "67890"
            }
          }
        },
        "required": [
          "title",
          "description"
        ]
      },
      "AddSupportMessageDto": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "محتوى الرسالة",
            "example": "شكراً لك على الإبلاغ عن المشكلة. سنعمل على حلها في أقرب وقت ممكن."
          },
          "attachments": {
            "description": "روابط الملفات المرفوعة مع الرسالة",
            "example": [
              "https://cdn.bunny.net/uploads/solution.pdf"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isInternal": {
            "type": "boolean",
            "description": "رسالة داخلية (للمشرفين فقط)",
            "example": false
          },
          "metadata": {
            "type": "object",
            "description": "بيانات إضافية",
            "example": {
              "action": "escalated"
            }
          }
        },
        "required": [
          "content"
        ]
      },
      "RateTicketDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateSupportTicketDto": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "description": "حالة التذكرة",
            "enum": [
              "open",
              "in_progress",
              "waiting_for_user",
              "resolved",
              "closed"
            ],
            "example": "in_progress"
          },
          "priority": {
            "type": "string",
            "description": "أولوية التذكرة",
            "enum": [
              "low",
              "medium",
              "high",
              "urgent"
            ],
            "example": "high"
          },
          "category": {
            "type": "string",
            "description": "تصنيف التذكرة",
            "enum": [
              "technical",
              "billing",
              "products",
              "services",
              "account",
              "other"
            ],
            "example": "technical"
          },
          "assignedTo": {
            "type": "string",
            "description": "معرف المشرف المسؤول",
            "example": "507f1f77bcf86cd799439011"
          },
          "resolvedAt": {
            "format": "date-time",
            "type": "string",
            "description": "تاريخ الحل (يتم تعيينه تلقائياً عند تغيير الحالة إلى RESOLVED)"
          },
          "closedAt": {
            "format": "date-time",
            "type": "string",
            "description": "تاريخ الإغلاق (يتم تعيينه تلقائياً عند تغيير الحالة إلى CLOSED)"
          },
          "firstResponseAt": {
            "format": "date-time",
            "type": "string",
            "description": "تاريخ أول رد (يتم تعيينه تلقائياً عند تغيير الحالة إلى IN_PROGRESS)"
          }
        }
      },
      "CreateCannedResponseDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateCannedResponseDto": {
        "type": "object",
        "properties": {}
      },
      "CreateAdminDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "رقم هاتف الأدمن",
            "example": "+966501234567"
          },
          "firstName": {
            "type": "string",
            "description": "الاسم الأول",
            "example": "أحمد"
          },
          "lastName": {
            "type": "string",
            "description": "الاسم الأخير",
            "example": "محمد"
          },
          "gender": {
            "type": "string",
            "description": "الجنس",
            "enum": [
              "male",
              "female",
              "other"
            ],
            "example": "male"
          },
          "roles": {
            "type": "array",
            "description": "الأدوار الممنوحة للأدمن",
            "example": [
              "admin"
            ],
            "items": {
              "type": "string",
              "enum": [
                "user",
                "admin",
                "super_admin",
                "merchant",
                "engineer"
              ]
            }
          },
          "permissions": {
            "type": "array",
            "description": "الصلاحيات المخصصة للأدمن",
            "example": [
              "users.read",
              "products.read",
              "orders.read",
              "admin.access"
            ],
            "items": {
              "type": "string",
              "enum": [
                "users.read",
                "users.create",
                "users.update",
                "users.delete",
                "users.suspend",
                "users.activate",
                "users.restore",
                "roles.read",
                "roles.create",
                "roles.update",
                "roles.delete",
                "roles.assign",
                "roles.revoke",
                "products.read",
                "products.create",
                "products.update",
                "products.delete",
                "products.publish",
                "products.unpublish",
                "categories.read",
                "categories.create",
                "categories.update",
                "categories.delete",
                "brands.read",
                "brands.create",
                "brands.update",
                "brands.delete",
                "attributes.read",
                "attributes.create",
                "attributes.update",
                "attributes.delete",
                "orders.read",
                "orders.update",
                "orders.cancel",
                "orders.refund",
                "orders.status_update",
                "carts.read",
                "carts.update",
                "carts.delete",
                "carts.convert_to_order",
                "carts.send_reminders",
                "carts.bulk_actions",
                "services.read",
                "services.update",
                "services.cancel",
                "services.assign",
                "support.read",
                "support.update",
                "support.assign",
                "support.close",
                "marketing.read",
                "marketing.create",
                "marketing.update",
                "marketing.delete",
                "marketing.publish",
                "marketing.analyze",
                "analytics.read",
                "analytics.export",
                "reports.generate",
                "reports.schedule",
                "settings.read",
                "settings.update",
                "system.maintenance",
                "system.backup",
                "system.logs",
                "admin.access",
                "super_admin.access",
                "capabilities.read",
                "capabilities.update",
                "capabilities.approve",
                "capabilities.reject",
                "exchange_rates.read",
                "exchange_rates.update",
                "exchange_rates.manual_update",
                "favorites.read",
                "favorites.manage",
                "addresses.read",
                "addresses.manage",
                "addresses.analytics",
                "upload.manage",
                "upload.delete",
                "media.manage",
                "media.delete",
                "audit.read",
                "audit.manage",
                "audit.delete",
                "notifications.read",
                "notifications.create",
                "notifications.update",
                "notifications.delete",
                "notifications.send",
                "notifications.manage"
              ]
            }
          },
          "temporaryPassword": {
            "type": "string",
            "description": "كلمة مرور مؤقتة (سيتم تغييرها عند أول تسجيل دخول)",
            "example": "TempPass123!"
          },
          "activateImmediately": {
            "type": "boolean",
            "description": "تفعيل الحساب فوراً",
            "example": true,
            "default": true
          },
          "description": {
            "type": "string",
            "description": "وصف الدور والمسؤوليات",
            "example": "أدمن المنتجات والمبيعات"
          }
        },
        "required": [
          "phone",
          "firstName",
          "roles",
          "permissions"
        ]
      },
      "CreateRoleBasedAdminDto": {
        "type": "object",
        "properties": {
          "adminType": {
            "type": "string",
            "description": "نوع الأدمن المطلوب",
            "enum": [
              "full_admin",
              "product_manager",
              "sales_manager",
              "support_manager",
              "marketing_manager",
              "content_manager",
              "view_only"
            ],
            "example": "product_manager"
          },
          "phone": {
            "type": "string",
            "description": "رقم هاتف الأدمن",
            "example": "+966501234567"
          },
          "firstName": {
            "type": "string",
            "description": "الاسم الأول",
            "example": "أحمد"
          },
          "lastName": {
            "type": "string",
            "description": "الاسم الأخير",
            "example": "محمد"
          },
          "gender": {
            "type": "string",
            "description": "الجنس",
            "enum": [
              "male",
              "female",
              "other"
            ],
            "example": "male"
          },
          "additionalPermissions": {
            "type": "array",
            "description": "صلاحيات إضافية للدور المحدد",
            "example": [
              "system.logs"
            ],
            "items": {
              "type": "string",
              "enum": [
                "users.read",
                "users.create",
                "users.update",
                "users.delete",
                "users.suspend",
                "users.activate",
                "users.restore",
                "roles.read",
                "roles.create",
                "roles.update",
                "roles.delete",
                "roles.assign",
                "roles.revoke",
                "products.read",
                "products.create",
                "products.update",
                "products.delete",
                "products.publish",
                "products.unpublish",
                "categories.read",
                "categories.create",
                "categories.update",
                "categories.delete",
                "brands.read",
                "brands.create",
                "brands.update",
                "brands.delete",
                "attributes.read",
                "attributes.create",
                "attributes.update",
                "attributes.delete",
                "orders.read",
                "orders.update",
                "orders.cancel",
                "orders.refund",
                "orders.status_update",
                "carts.read",
                "carts.update",
                "carts.delete",
                "carts.convert_to_order",
                "carts.send_reminders",
                "carts.bulk_actions",
                "services.read",
                "services.update",
                "services.cancel",
                "services.assign",
                "support.read",
                "support.update",
                "support.assign",
                "support.close",
                "marketing.read",
                "marketing.create",
                "marketing.update",
                "marketing.delete",
                "marketing.publish",
                "marketing.analyze",
                "analytics.read",
                "analytics.export",
                "reports.generate",
                "reports.schedule",
                "settings.read",
                "settings.update",
                "system.maintenance",
                "system.backup",
                "system.logs",
                "admin.access",
                "super_admin.access",
                "capabilities.read",
                "capabilities.update",
                "capabilities.approve",
                "capabilities.reject",
                "exchange_rates.read",
                "exchange_rates.update",
                "exchange_rates.manual_update",
                "favorites.read",
                "favorites.manage",
                "addresses.read",
                "addresses.manage",
                "addresses.analytics",
                "upload.manage",
                "upload.delete",
                "media.manage",
                "media.delete",
                "audit.read",
                "audit.manage",
                "audit.delete",
                "notifications.read",
                "notifications.create",
                "notifications.update",
                "notifications.delete",
                "notifications.send",
                "notifications.manage"
              ]
            }
          },
          "description": {
            "type": "string",
            "description": "وصف الدور والمسؤوليات",
            "example": "أدمن المنتجات مع صلاحيات النظام"
          }
        },
        "required": [
          "adminType",
          "phone",
          "firstName"
        ]
      },
      "CreateUserAdminDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateUserAdminDto": {
        "type": "object",
        "properties": {}
      },
      "SuspendUserDto": {
        "type": "object",
        "properties": {}
      },
      "ApproveVerificationDto": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "description": "سبب الرفض (اختياري - يظهر فقط عند الرفض)",
            "example": "الوثائق غير واضحة أو غير مكتملة",
            "maxLength": 500
          }
        }
      },
      "UpdateCapabilityStatusDto": {
        "type": "object",
        "properties": {}
      },
      "AdminResetPasswordDto": {
        "type": "object",
        "properties": {}
      },
      "UploadFileDto": {
        "type": "object",
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "description": "File to upload"
          },
          "folder": {
            "type": "string",
            "description": "Folder to upload to",
            "example": "products"
          },
          "customFilename": {
            "type": "string",
            "description": "Custom filename (optional)",
            "example": "my-image.jpg"
          }
        },
        "required": [
          "file"
        ]
      },
      "DeleteFileDto": {
        "type": "object",
        "properties": {
          "filePath": {
            "type": "string",
            "description": "Path of the file to delete",
            "example": "uploads/my-image.jpg"
          }
        },
        "required": [
          "filePath"
        ]
      },
      "UploadMediaDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateMediaDto": {
        "type": "object",
        "properties": {}
      },
      "PerformanceMetricsDto": {
        "type": "object",
        "properties": {
          "apiResponseTime": {
            "type": "number",
            "description": "متوسط وقت استجابة API",
            "example": 245
          },
          "errorRate": {
            "type": "number",
            "description": "معدل الأخطاء",
            "example": 0.02
          },
          "uptime": {
            "type": "number",
            "description": "نسبة التشغيل",
            "example": 99.9
          },
          "concurrentUsers": {
            "type": "number",
            "description": "المستخدمون المتزامنون",
            "example": 1250
          },
          "memoryUsage": {
            "type": "number",
            "description": "ذاكرة النظام المستخدمة",
            "example": 75.5
          },
          "cpuUsage": {
            "type": "number",
            "description": "استخدام المعالج",
            "example": 45.2
          },
          "diskUsage": {
            "type": "number",
            "description": "مساحة القرص المستخدمة",
            "example": 68.3
          },
          "activeConnections": {
            "type": "number",
            "description": "عدد قواعد البيانات النشطة",
            "example": 5
          },
          "slowestEndpoints": {
            "description": "أبطأ نقاط النهاية",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "databaseStats": {
            "type": "object",
            "description": "إحصائيات قاعدة البيانات"
          }
        },
        "required": [
          "apiResponseTime",
          "errorRate",
          "uptime",
          "concurrentUsers",
          "memoryUsage",
          "cpuUsage",
          "diskUsage",
          "activeConnections",
          "slowestEndpoints",
          "databaseStats"
        ]
      },
      "ReportGenerationDto": {
        "type": "object",
        "properties": {
          "reportType": {
            "type": "string",
            "description": "نوع التقرير",
            "enum": [
              "daily_summary",
              "weekly_report",
              "monthly_report",
              "revenue_report",
              "user_activity",
              "product_performance",
              "service_analytics",
              "support_metrics",
              "custom_report"
            ],
            "example": "monthly_report"
          },
          "formats": {
            "type": "array",
            "description": "تنسيقات التقرير",
            "example": [
              "pdf",
              "excel"
            ],
            "items": {
              "type": "string",
              "enum": [
                "pdf",
                "excel",
                "csv",
                "json",
                "html"
              ]
            }
          },
          "startDate": {
            "type": "string",
            "description": "تاريخ البداية",
            "example": "2023-01-01"
          },
          "endDate": {
            "type": "string",
            "description": "تاريخ النهاية",
            "example": "2023-12-31"
          },
          "filters": {
            "type": "object",
            "description": "فلاتر إضافية",
            "example": {
              "category": "solar_panels",
              "status": "active"
            }
          },
          "includeCharts": {
            "type": "boolean",
            "description": "تضمين الرسوم البيانية",
            "example": true
          },
          "includeRawData": {
            "type": "boolean",
            "description": "تضمين البيانات الأولية",
            "example": false
          }
        },
        "required": [
          "reportType"
        ]
      },
      "DashboardDataDto": {
        "type": "object",
        "properties": {
          "overview": {
            "type": "object",
            "description": "بيانات لوحة التحكم الرئيسية"
          },
          "revenueCharts": {
            "type": "object",
            "description": "مخططات الإيرادات"
          },
          "userCharts": {
            "type": "object",
            "description": "مخططات المستخدمين"
          },
          "productCharts": {
            "type": "object",
            "description": "مخططات المنتجات"
          },
          "serviceCharts": {
            "type": "object",
            "description": "مخططات الخدمات"
          },
          "supportCharts": {
            "type": "object",
            "description": "مخططات الدعم"
          },
          "kpis": {
            "type": "object",
            "description": "المؤشرات الرئيسية"
          }
        },
        "required": [
          "overview",
          "revenueCharts",
          "userCharts",
          "productCharts",
          "serviceCharts",
          "supportCharts",
          "kpis"
        ]
      },
      "AnalyticsReportDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "معرف التقرير",
            "example": "507f1f77bcf86cd799439011"
          },
          "type": {
            "type": "string",
            "description": "نوع التقرير",
            "enum": [
              "daily_summary",
              "weekly_report",
              "monthly_report",
              "revenue_report",
              "user_activity",
              "product_performance",
              "service_analytics",
              "support_metrics",
              "custom_report"
            ],
            "example": "monthly_report"
          },
          "period": {
            "type": "string",
            "description": "فترة التقرير",
            "example": "يناير 2024"
          },
          "generatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "تاريخ إنشاء التقرير",
            "example": "2024-01-31T23:59:59Z"
          },
          "data": {
            "description": "البيانات التحليلية",
            "allOf": [
              {
                "$ref": "#/components/schemas/DashboardDataDto"
              }
            ]
          },
          "insights": {
            "description": "التوصيات والملاحظات",
            "example": [
              "الإيرادات زادت بنسبة 15%",
              "تحتاج إلى تحسين خدمة العملاء"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "fileUrls": {
            "description": "روابط ملفات التقرير",
            "example": [
              "https://cdn.example.com/reports/monthly-2024-01.pdf"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "id",
          "type",
          "period",
          "generatedAt",
          "data"
        ]
      },
      "CreateReportScheduleDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "اسم التقرير المجدول",
            "example": "تقرير المبيعات الأسبوعي"
          },
          "description": {
            "type": "string",
            "description": "وصف التقرير",
            "example": "تقرير شامل للمبيعات والإيرادات الأسبوعية"
          },
          "reportType": {
            "type": "string",
            "description": "نوع التقرير",
            "enum": [
              "daily_summary",
              "weekly_report",
              "monthly_report",
              "revenue_report",
              "user_activity",
              "product_performance",
              "service_analytics",
              "support_metrics",
              "custom_report"
            ],
            "example": "weekly_report"
          },
          "frequency": {
            "type": "string",
            "description": "التكرار",
            "enum": [
              "daily",
              "weekly",
              "monthly",
              "quarterly"
            ],
            "example": "weekly"
          },
          "formats": {
            "type": "array",
            "description": "تنسيقات التقرير",
            "example": [
              "pdf"
            ],
            "items": {
              "type": "string",
              "enum": [
                "pdf",
                "excel",
                "csv",
                "json",
                "html"
              ]
            }
          },
          "recipients": {
            "description": "عناوين البريد الإلكتروني للمستلمين",
            "example": [
              "admin@example.com",
              "manager@example.com"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "filters": {
            "type": "object",
            "description": "فلاتر إضافية",
            "example": {
              "includeCharts": true,
              "dateRange": {
                "months": 3
              }
            }
          },
          "config": {
            "type": "object",
            "description": "إعدادات إضافية",
            "example": {
              "includeCharts": true,
              "branding": {
                "companyName": "شركة الطاقة الشمسية"
              }
            }
          }
        },
        "required": [
          "name",
          "description",
          "reportType",
          "frequency"
        ]
      },
      "SystemHealthDto": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "description": "حالة النظام العامة"
          },
          "uptime": {
            "type": "number",
            "description": "وقت التشغيل بالثواني"
          },
          "cpuUsage": {
            "type": "number",
            "description": "استخدام CPU (نسبة مئوية)"
          },
          "memoryUsage": {
            "type": "number",
            "description": "استخدام الذاكرة (نسبة مئوية)"
          },
          "diskUsage": {
            "type": "number",
            "description": "استخدام القرص (نسبة مئوية)"
          },
          "databaseStatus": {
            "type": "object",
            "description": "حالة قاعدة البيانات"
          },
          "redisStatus": {
            "type": "object",
            "description": "حالة Redis Cache"
          },
          "avgApiResponseTime": {
            "type": "number",
            "description": "متوسط وقت استجابة API (ms)"
          },
          "activeRequests": {
            "type": "number",
            "description": "عدد الطلبات النشطة"
          },
          "errorRate": {
            "type": "number",
            "description": "معدل الأخطاء (نسبة مئوية)"
          },
          "lastUpdated": {
            "format": "date-time",
            "type": "string",
            "description": "وقت آخر تحديث"
          }
        },
        "required": [
          "status",
          "uptime",
          "cpuUsage",
          "memoryUsage",
          "diskUsage",
          "databaseStatus",
          "redisStatus",
          "avgApiResponseTime",
          "activeRequests",
          "errorRate",
          "lastUpdated"
        ]
      },
      "ResourceUsageDto": {
        "type": "object",
        "properties": {
          "timestamp": {
            "format": "date-time",
            "type": "string",
            "description": "الطابع الزمني"
          },
          "cpu": {
            "type": "object",
            "description": "استخدام CPU"
          },
          "memory": {
            "type": "object",
            "description": "استخدام الذاكرة"
          },
          "disk": {
            "type": "object",
            "description": "استخدام القرص"
          }
        },
        "required": [
          "timestamp",
          "cpu",
          "memory",
          "disk"
        ]
      },
      "DatabaseMetricsDto": {
        "type": "object",
        "properties": {
          "connected": {
            "type": "boolean",
            "description": "حالة الاتصال"
          },
          "responseTime": {
            "type": "number",
            "description": "وقت الاستجابة (ms)"
          },
          "collectionsCount": {
            "type": "number",
            "description": "عدد المجموعات"
          },
          "totalDocuments": {
            "type": "number",
            "description": "إجمالي عدد الوثائق"
          },
          "databaseSize": {
            "type": "number",
            "description": "حجم قاعدة البيانات (bytes)"
          },
          "indexSize": {
            "type": "number",
            "description": "حجم الفهارس (bytes)"
          },
          "activeOperations": {
            "type": "number",
            "description": "العمليات النشطة"
          },
          "slowQueries": {
            "description": "قائمة بأبطأ الاستعلامات",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "connected",
          "responseTime",
          "collectionsCount",
          "totalDocuments",
          "databaseSize",
          "indexSize",
          "activeOperations",
          "slowQueries"
        ]
      },
      "RedisMetricsDto": {
        "type": "object",
        "properties": {
          "connected": {
            "type": "boolean",
            "description": "حالة الاتصال"
          },
          "responseTime": {
            "type": "number",
            "description": "وقت الاستجابة (ms)"
          },
          "memoryUsage": {
            "type": "number",
            "description": "استخدام الذاكرة (bytes)"
          },
          "maxMemory": {
            "type": "number",
            "description": "الذاكرة القصوى (bytes)"
          },
          "memoryUsagePercentage": {
            "type": "number",
            "description": "نسبة استخدام الذاكرة (%)"
          },
          "keysCount": {
            "type": "number",
            "description": "عدد المفاتيح"
          },
          "hitRate": {
            "type": "number",
            "description": "معدل الإصابة (%)"
          },
          "missRate": {
            "type": "number",
            "description": "معدل الفشل (%)"
          },
          "operationsPerSecond": {
            "type": "number",
            "description": "العمليات في الثانية"
          }
        },
        "required": [
          "connected",
          "responseTime",
          "memoryUsage",
          "maxMemory",
          "memoryUsagePercentage",
          "keysCount",
          "hitRate",
          "missRate",
          "operationsPerSecond"
        ]
      },
      "ApiPerformanceDto": {
        "type": "object",
        "properties": {
          "totalRequests": {
            "type": "number",
            "description": "إجمالي عدد الطلبات"
          },
          "successfulRequests": {
            "type": "number",
            "description": "الطلبات الناجحة"
          },
          "failedRequests": {
            "type": "number",
            "description": "الطلبات الفاشلة"
          },
          "avgResponseTime": {
            "type": "number",
            "description": "متوسط وقت الاستجابة (ms)"
          },
          "minResponseTime": {
            "type": "number",
            "description": "أدنى وقت استجابة (ms)"
          },
          "maxResponseTime": {
            "type": "number",
            "description": "أقصى وقت استجابة (ms)"
          },
          "requestsPerMinute": {
            "type": "number",
            "description": "عدد الطلبات في الدقيقة"
          },
          "errorRate": {
            "type": "number",
            "description": "معدل الأخطاء (%)"
          },
          "slowestEndpoints": {
            "description": "أبطأ نقاط النهاية",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "totalRequests",
          "successfulRequests",
          "failedRequests",
          "avgResponseTime",
          "minResponseTime",
          "maxResponseTime",
          "requestsPerMinute",
          "errorRate",
          "slowestEndpoints"
        ]
      },
      "SystemMetricsHistoryDto": {
        "type": "object",
        "properties": {
          "metricType": {
            "type": "string",
            "description": "نوع المقياس"
          },
          "data": {
            "description": "البيانات التاريخية",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "statistics": {
            "type": "object",
            "description": "الإحصائيات"
          }
        },
        "required": [
          "metricType",
          "data",
          "statistics"
        ]
      },
      "SystemAlertsDto": {
        "type": "object",
        "properties": {
          "alerts": {
            "description": "قائمة التنبيهات",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "activeAlertsCount": {
            "type": "number",
            "description": "عدد التنبيهات النشطة"
          },
          "criticalAlertsCount": {
            "type": "number",
            "description": "عدد التنبيهات الحرجة"
          }
        },
        "required": [
          "alerts",
          "activeAlertsCount",
          "criticalAlertsCount"
        ]
      },
      "CreateErrorLogDto": {
        "type": "object",
        "properties": {
          "level": {
            "type": "string",
            "description": "مستوى الخطأ",
            "enum": [
              "error",
              "warn",
              "fatal",
              "debug"
            ]
          },
          "category": {
            "type": "string",
            "description": "فئة الخطأ",
            "enum": [
              "database",
              "api",
              "authentication",
              "validation",
              "business_logic",
              "external_service",
              "system",
              "unknown"
            ]
          },
          "message": {
            "type": "string",
            "description": "رسالة الخطأ"
          },
          "stack": {
            "type": "string",
            "description": "Stack trace"
          },
          "metadata": {
            "type": "object",
            "description": "معلومات إضافية"
          },
          "userId": {
            "type": "string",
            "description": "معرف المستخدم (إن وجد)"
          },
          "endpoint": {
            "type": "string",
            "description": "مسار الطلب (endpoint)"
          },
          "method": {
            "type": "string",
            "description": "طريقة HTTP"
          },
          "statusCode": {
            "type": "number",
            "description": "رمز حالة HTTP"
          }
        },
        "required": [
          "level",
          "category",
          "message"
        ]
      },
      "ErrorLogDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "معرف السجل"
          },
          "level": {
            "type": "string",
            "description": "مستوى الخطأ",
            "enum": [
              "error",
              "warn",
              "fatal",
              "debug"
            ]
          },
          "category": {
            "type": "string",
            "description": "فئة الخطأ",
            "enum": [
              "database",
              "api",
              "authentication",
              "validation",
              "business_logic",
              "external_service",
              "system",
              "unknown"
            ]
          },
          "message": {
            "type": "string",
            "description": "رسالة الخطأ"
          },
          "stack": {
            "type": "string",
            "description": "Stack trace"
          },
          "metadata": {
            "type": "object",
            "description": "معلومات إضافية"
          },
          "userId": {
            "type": "string",
            "description": "معرف المستخدم"
          },
          "endpoint": {
            "type": "string",
            "description": "مسار الطلب"
          },
          "method": {
            "type": "string",
            "description": "طريقة HTTP"
          },
          "statusCode": {
            "type": "number",
            "description": "رمز حالة HTTP"
          },
          "occurrences": {
            "type": "number",
            "description": "عدد التكرارات"
          },
          "firstOccurrence": {
            "format": "date-time",
            "type": "string",
            "description": "أول ظهور"
          },
          "lastOccurrence": {
            "format": "date-time",
            "type": "string",
            "description": "آخر ظهور"
          },
          "resolved": {
            "type": "boolean",
            "description": "هل تم الحل؟"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "تاريخ الإنشاء"
          }
        },
        "required": [
          "id",
          "level",
          "category",
          "message",
          "stack",
          "metadata",
          "userId",
          "endpoint",
          "method",
          "statusCode",
          "occurrences",
          "firstOccurrence",
          "lastOccurrence",
          "resolved",
          "createdAt"
        ]
      },
      "ErrorStatisticsDto": {
        "type": "object",
        "properties": {
          "totalErrors": {
            "type": "number",
            "description": "إجمالي الأخطاء"
          },
          "last24Hours": {
            "type": "number",
            "description": "الأخطاء في آخر 24 ساعة"
          },
          "last7Days": {
            "type": "number",
            "description": "الأخطاء في آخر 7 أيام"
          },
          "errorRate": {
            "type": "number",
            "description": "معدل الأخطاء (نسبة مئوية)"
          },
          "byLevel": {
            "type": "object",
            "description": "الأخطاء حسب المستوى"
          },
          "byCategory": {
            "type": "object",
            "description": "الأخطاء حسب الفئة"
          },
          "topErrors": {
            "description": "أكثر الأخطاء تكراراً",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "byEndpoint": {
            "description": "الأخطاء حسب نقطة النهاية",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "totalErrors",
          "last24Hours",
          "last7Days",
          "errorRate",
          "byLevel",
          "byCategory",
          "topErrors",
          "byEndpoint"
        ]
      },
      "ErrorTrendDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "البيانات التاريخية",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "trend": {
            "type": "string",
            "description": "الاتجاه"
          },
          "changePercentage": {
            "type": "number",
            "description": "نسبة التغيير (%)"
          }
        },
        "required": [
          "data",
          "trend",
          "changePercentage"
        ]
      },
      "CreateServiceRequestDto": {
        "type": "object",
        "properties": {}
      },
      "AcceptOfferDto": {
        "type": "object",
        "properties": {}
      },
      "RateServiceDto": {
        "type": "object",
        "properties": {}
      },
      "CreateOfferDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateOfferDto": {
        "type": "object",
        "properties": {}
      },
      "EngineersOverviewStatisticsDto": {
        "type": "object",
        "properties": {}
      },
      "OffersStatisticsDto": {
        "type": "object",
        "properties": {}
      },
      "OffersManagementResponseDto": {
        "type": "object",
        "properties": {}
      },
      "CreateBrandDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "Apple",
            "description": "Brand name"
          },
          "nameEn": {
            "type": "string",
            "example": "Apple",
            "description": "Brand name in English"
          },
          "image": {
            "type": "string",
            "example": "https://example.com/apple-logo.png",
            "description": "Brand image URL"
          },
          "description": {
            "type": "string",
            "example": "Leading technology company"
          },
          "descriptionEn": {
            "type": "string",
            "example": "Leading technology company"
          },
          "isActive": {
            "type": "boolean",
            "example": true
          },
          "sortOrder": {
            "type": "number",
            "example": 0
          },
          "metadata": {
            "type": "object"
          }
        },
        "required": [
          "name",
          "nameEn",
          "image"
        ]
      },
      "UpdateBrandDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "Apple"
          },
          "nameEn": {
            "type": "string",
            "example": "Apple"
          },
          "image": {
            "type": "string",
            "example": "https://example.com/apple-logo.png"
          },
          "description": {
            "type": "string",
            "example": "Leading technology company"
          },
          "descriptionEn": {
            "type": "string",
            "example": "Leading technology company"
          },
          "isActive": {
            "type": "boolean",
            "example": true
          },
          "sortOrder": {
            "type": "number",
            "example": 0
          },
          "metadata": {
            "type": "object"
          }
        }
      },
      "CreateTranslationDto": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string",
            "description": "مفتاح الترجمة",
            "example": "auth.welcome"
          },
          "ar": {
            "type": "string",
            "description": "النص بالعربية"
          },
          "en": {
            "type": "string",
            "description": "النص بالإنجليزية"
          },
          "namespace": {
            "type": "string",
            "description": "المساحة/الوحدة",
            "enum": [
              "common",
              "auth",
              "products",
              "orders",
              "services",
              "users",
              "settings",
              "errors",
              "validation",
              "notifications"
            ],
            "default": "common"
          },
          "description": {
            "type": "string",
            "description": "وصف/ملاحظة"
          }
        },
        "required": [
          "key",
          "ar",
          "en"
        ]
      },
      "TranslationDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "المعرف"
          },
          "key": {
            "type": "string",
            "description": "مفتاح الترجمة"
          },
          "ar": {
            "type": "string",
            "description": "النص بالعربية"
          },
          "en": {
            "type": "string",
            "description": "النص بالإنجليزية"
          },
          "namespace": {
            "type": "string",
            "description": "المساحة/الوحدة",
            "enum": [
              "common",
              "auth",
              "products",
              "orders",
              "services",
              "users",
              "settings",
              "errors",
              "validation",
              "notifications"
            ]
          },
          "description": {
            "type": "string",
            "description": "الوصف"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "تاريخ الإنشاء"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "تاريخ آخر تحديث"
          },
          "updatedBy": {
            "type": "string",
            "description": "آخر من قام بالتحديث"
          }
        },
        "required": [
          "id",
          "key",
          "ar",
          "en",
          "namespace",
          "description",
          "createdAt",
          "updatedAt",
          "updatedBy"
        ]
      },
      "TranslationStatsDto": {
        "type": "object",
        "properties": {
          "totalTranslations": {
            "type": "number",
            "description": "إجمالي الترجمات"
          },
          "byNamespace": {
            "type": "object",
            "description": "الترجمات حسب المساحة"
          },
          "missingArabic": {
            "type": "number",
            "description": "الترجمات المفقودة بالعربية"
          },
          "missingEnglish": {
            "type": "number",
            "description": "الترجمات المفقودة بالإنجليزية"
          },
          "arabicCompleteness": {
            "type": "number",
            "description": "نسبة الاكتمال بالعربية (%)"
          },
          "englishCompleteness": {
            "type": "number",
            "description": "نسبة الاكتمال بالإنجليزية (%)"
          },
          "recentUpdates": {
            "description": "آخر التحديثات",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "totalTranslations",
          "byNamespace",
          "missingArabic",
          "missingEnglish",
          "arabicCompleteness",
          "englishCompleteness",
          "recentUpdates"
        ]
      },
      "BulkImportDto": {
        "type": "object",
        "properties": {
          "translations": {
            "type": "object",
            "description": "ملف JSON للاستيراد",
            "example": {
              "auth.welcome": {
                "ar": "مرحبا",
                "en": "Welcome"
              },
              "auth.login": {
                "ar": "تسجيل الدخول",
                "en": "Login"
              }
            }
          },
          "namespace": {
            "type": "string",
            "description": "المساحة/الوحدة",
            "enum": [
              "common",
              "auth",
              "products",
              "orders",
              "services",
              "users",
              "settings",
              "errors",
              "validation",
              "notifications"
            ]
          },
          "overwrite": {
            "type": "boolean",
            "description": "استبدال الترجمات الموجودة",
            "default": false
          }
        },
        "required": [
          "translations"
        ]
      },
      "UpdateTranslationDto": {
        "type": "object",
        "properties": {
          "ar": {
            "type": "string",
            "description": "النص بالعربية"
          },
          "en": {
            "type": "string",
            "description": "النص بالإنجليزية"
          },
          "namespace": {
            "type": "string",
            "description": "المساحة/الوحدة",
            "enum": [
              "common",
              "auth",
              "products",
              "orders",
              "services",
              "users",
              "settings",
              "errors",
              "validation",
              "notifications"
            ]
          },
          "description": {
            "type": "string",
            "description": "وصف/ملاحظة"
          }
        }
      },
      "PolicyResponseDto": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "terms",
              "privacy"
            ]
          },
          "titleAr": {
            "type": "string"
          },
          "titleEn": {
            "type": "string"
          },
          "contentAr": {
            "type": "string"
          },
          "contentEn": {
            "type": "string"
          },
          "isActive": {
            "type": "boolean"
          },
          "lastUpdatedBy": {
            "type": "string"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "_id",
          "type",
          "titleAr",
          "titleEn",
          "contentAr",
          "contentEn",
          "isActive",
          "lastUpdatedBy",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreatePolicyDto": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "terms",
              "privacy"
            ],
            "description": "نوع السياسة"
          },
          "titleAr": {
            "type": "string",
            "description": "العنوان بالعربية"
          },
          "titleEn": {
            "type": "string",
            "description": "العنوان بالإنجليزية"
          },
          "contentAr": {
            "type": "string",
            "description": "المحتوى بالعربية (HTML)"
          },
          "contentEn": {
            "type": "string",
            "description": "المحتوى بالإنجليزية (HTML)"
          },
          "isActive": {
            "type": "boolean",
            "description": "حالة النشر",
            "default": true
          }
        },
        "required": [
          "type",
          "titleAr",
          "titleEn",
          "contentAr",
          "contentEn"
        ]
      },
      "UpdatePolicyDto": {
        "type": "object",
        "properties": {
          "titleAr": {
            "type": "string",
            "description": "العنوان بالعربية"
          },
          "titleEn": {
            "type": "string",
            "description": "العنوان بالإنجليزية"
          },
          "contentAr": {
            "type": "string",
            "description": "المحتوى بالعربية (HTML)"
          },
          "contentEn": {
            "type": "string",
            "description": "المحتوى بالإنجليزية (HTML)"
          },
          "isActive": {
            "type": "boolean",
            "description": "حالة النشر"
          }
        }
      },
      "TogglePolicyDto": {
        "type": "object",
        "properties": {
          "isActive": {
            "type": "boolean",
            "description": "حالة النشر"
          }
        },
        "required": [
          "isActive"
        ]
      }
    }
  }
}