# ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช - Tagadodo

> ๐ฏ **ูุธุงู ุฅุฏุงุฑุฉ ุดุงูู ููุชูุงูู ูููุณุชุฎุฏููู ูุน ุตูุงุญูุงุช ูุชูุฏูุฉ**

## ๐ ุงููููุงุช ูุงููุซุงุฆู

| ุงูููู | ุงููุตู | ูุชู ุชุณุชุฎุฏูู |
|------|-------|-------------|
| **ADMIN_QUICK_START.md** | ๐ฅ ุงูุจุฏุก ุงูุณุฑูุน | ุงุจุฏุฃ ููุง! |
| **ADMIN_USERS_MANAGEMENT_SYSTEM.md** | ๐ ุงูุฏููู ุงูุดุงูู | ููููู ุงูุนููู |
| **ADMIN_API_EXAMPLES.md** | ๐งช ุฃูุซูุฉ ุนูููุฉ | ููุงุฎุชุจุงุฑ ูุงูุชุทุจูู |
| **ADMIN_SYSTEM_README.md** | ๐ ูุฐุง ุงูููู | ูุธุฑุฉ ุนุงูุฉ |

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุธุงู ุงูุตูุงุญูุงุช ุงููุชูุฏู

```typescript
// ุงูุฃุฏูุงุฑ (Roles)
enum UserRole {
  USER = 'user',               // ูุณุชุฎุฏู ุนุงุฏู
  MODERATOR = 'moderator',     // ูุดุฑู
  ADMIN = 'admin',             // ูุฏูุฑ
  SUPER_ADMIN = 'super_admin', // ูุฏูุฑ ุฃุนูู
}

// ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ (Permissions)
permissions: ['manage_users', 'approve_capabilities', 'view_analytics', ...]
```

### 2. ุฅุฏุงุฑุฉ ุดุงููุฉ ูููุณุชุฎุฏููู

โ **CRUD ูุงูู** ูุน Pagination  
โ **ุงูุจุญุซ ูุงูููุชุฑุฉ** ุงููุชูุฏูุฉ  
โ **Soft Delete** ูุน ุฅููุงููุฉ ุงูุงุณุชุนุงุฏุฉ  
โ **Hard Delete** ููุญุฐู ุงูููุงุฆู  
โ **ุฅููุงู/ุชูุนูู** ุงูุญุณุงุจุงุช  
โ **ุฅุญุตุงุฆูุงุช** ูู ุงูููุช ุงููุนูู  

### 3. ุฅูุดุงุก ุงููุณุชุฎุฏููู

ูููู ููุฃุฏูู ุฅูุดุงุก ุฃู ููุน ูู ุงููุณุชุฎุฏููู:
- โ ูุณุชุฎุฏู ุนุงุฏู
- โ ูููุฏุณ (ูุน ุงูููุงููุฉ ุงูุชููุงุฆูุฉ)
- โ ุชุงุฌุฑ (ูุน ูุณุจุฉ ุฎุตู)
- โ ูุดุฑู (Moderator)
- โ ูุฏูุฑ (Admin) - Super Admin ููุท

### 4. ุงูููุงููุฉ ูุงูุฑูุถ

ูููููุฏุณูู ูุงูุชุฌุงุฑ:
- โ ุงูููุงููุฉ ุงูุชููุงุฆูุฉ ุนูุฏ ุงูุฅูุดุงุก ูู ุงูุฃุฏูู
- โ ุงูููุงููุฉ/ุงูุฑูุถ ูุทูุจุงุช ุงููุณุชุฎุฏููู
- โ ุชุญุฏูุฏ ูุณุจุฉ ุงูุฎุตู ููุชุงุฌุฑ

### 5. ุญุฐู ุขูู

- โ **Soft Delete**: ุญุฐู ูุคูุช ูุน ุฅููุงููุฉ ุงูุงุณุชุนุงุฏุฉ
- โ **Hard Delete**: ุญุฐู ููุงุฆู (Super Admin ููุท)
- โ ุชุณุฌูู ูู ูุงู ุจุงูุญุฐู ููุชู
- โ ุญูุงูุฉ Super Admin ูู ุงูุญุฐู

---

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### 1. ุงููููุงุช ุงููุถุงูุฉ/ุงููุนุฏูุฉ

#### Schemas:
```
backend/src/modules/users/schemas/user.schema.ts
  โโ ุฅุถุงูุฉ: roles, permissions, status, deletedAt, suspendedAt
```

#### DTOs:
```
backend/src/modules/users/admin/dto/
  โโ create-user-admin.dto.ts
  โโ update-user-admin.dto.ts
  โโ list-users.dto.ts
  โโ suspend-user.dto.ts
```

#### Guards & Decorators:
```
backend/src/shared/
  โโ guards/
  โ   โโ roles.guard.ts
  โโ decorators/
      โโ roles.decorator.ts
      โโ permissions.decorator.ts
```

#### Controllers:
```
backend/src/modules/users/admin/
  โโ users.admin.controller.ts  (CRUD ูุงูู)
  โโ users.admin.module.ts
```

---

## ๐ ูุธุงู ุงูุตูุงุญูุงุช

### ุฌุฏูู ุงูุตูุงุญูุงุช:

| ุงูุนูููุฉ | User | Moderator | Admin | Super Admin |
|---------|------|-----------|-------|-------------|
| **ุงูุดุฑุงุก ูุงูุชุตูุญ** | โ | โ | โ | โ |
| **ุฅุฏุงุฑุฉ ุงููุญุชูู** | โ | โ | โ | โ |
| **ุนุฑุถ ุงููุณุชุฎุฏููู** | โ | โ | โ | โ |
| **ุฅูุดุงุก ูุณุชุฎุฏููู** | โ | โ | โ | โ |
| **ุชุนุฏูู ูุณุชุฎุฏููู** | โ | โ | โ | โ |
| **ุญุฐู ูุคูุช** | โ | โ | โ | โ |
| **ุฅูุดุงุก Admins** | โ | โ | โ | โ |
| **ุญุฐู ููุงุฆู** | โ | โ | โ | โ |

---

## ๐ ุงูุงุณุชุฎุฏุงู ุงูุณุฑูุน

### 1. ูุงุฆูุฉ ุงููุณุชุฎุฏููู:

```http
GET /admin/users?page=1&limit=20
Authorization: Bearer <admin_token>
```

### 2. ุฅูุดุงุก ูุณุชุฎุฏู:

```http
POST /admin/users
Authorization: Bearer <admin_token>
Content-Type: application/json

{
  "phone": "0555111111",
  "firstName": "ุฃุญูุฏ",
  "password": "SecurePass123"
}
```

### 3. ุงูุจุญุซ:

```http
GET /admin/users?search=0555
Authorization: Bearer <admin_token>
```

### 4. ุฅููุงู:

```http
POST /admin/users/{id}/suspend
Authorization: Bearer <admin_token>
Content-Type: application/json

{
  "reason": "ุณุจุจ ุงูุฅููุงู"
}
```

### 5. ุญุฐู ูุคูุช:

```http
DELETE /admin/users/{id}
Authorization: Bearer <admin_token>
```

---

## ๐ Endpoints ุงููุงููุฉ

| Endpoint | Method | ุงููุตู | ุงูุญูุงูุฉ |
|---------|--------|-------|---------|
| `/admin/users` | GET | ูุงุฆูุฉ ุงููุณุชุฎุฏููู (pagination) | Admin+ |
| `/admin/users/:id` | GET | ุนุฑุถ ูุณุชุฎุฏู ูุงุญุฏ | Admin+ |
| `/admin/users` | POST | ุฅูุดุงุก ูุณุชุฎุฏู | Admin+ |
| `/admin/users/:id` | PATCH | ุชุญุฏูุซ ูุณุชุฎุฏู | Admin+ |
| `/admin/users/:id/suspend` | POST | ุฅููุงู ูุณุชุฎุฏู | Admin+ |
| `/admin/users/:id/activate` | POST | ุชูุนูู ูุณุชุฎุฏู | Admin+ |
| `/admin/users/:id` | DELETE | ุญุฐู ูุคูุช (soft) | Admin+ |
| `/admin/users/:id/restore` | POST | ุงุณุชุนุงุฏุฉ ูุญุฐูู | Admin+ |
| `/admin/users/:id/permanent` | DELETE | ุญุฐู ููุงุฆู (hard) | Super Admin |
| `/admin/users/stats/summary` | GET | ุฅุญุตุงุฆูุงุช | Admin+ |

---

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### ุญุงูุฉ 1: ุฅุฏุงุฑุฉ ูุณุชุฎุฏู ูุณูุก

```
1. ุชููู ุจูุงุบ โ GET /admin/users/{id}
2. ุฅููุงู ูุคูุช โ POST /admin/users/{id}/suspend
3. ูุฑุงุฌุนุฉ โ GET /admin/users?status=suspended
4ุฃ. ุฎุทุฃ โ POST /admin/users/{id}/activate
4ุจ. ุตุญูุญ โ DELETE /admin/users/{id}
```

### ุญุงูุฉ 2: ุฅูุดุงุก ูุฑูู ุฅุฏุงุฑุฉ

```
1. Super Admin ููุดุฆ Admin
2. Admin ููุดุฆ Moderators
3. Moderators ูุฏูุฑูู ุงููุญุชูู
```

### ุญุงูุฉ 3: ุชุฏููู ูุญุฐู

```
1. ุนุฑุถ ุงููุญุฐูููู โ GET /admin/users?includeDeleted=true
2. ูุฑุงุฌุนุฉ ุงูุญุณุงุจุงุช
3. ุงุณุชุนุงุฏุฉ ุฅู ูุฒู โ POST /admin/users/{id}/restore
4. ุญุฐู ููุงุฆู โ DELETE /admin/users/{id}/permanent
```

---

## ๐ก๏ธ ุงูุฃูุงู

### ุงูุชุญููุงุช ุงูุฃูููุฉ:

โ **JWT Authentication** - ูู ุงูุทูุจุงุช ูุญููุฉ  
โ **RolesGuard** - ุงูุชุญูู ูู ุงูุฃุฏูุงุฑ  
โ **Permissions Check** - ุงูุชุญูู ูู ุงูุตูุงุญูุงุช  
โ **Super Admin Protection** - ูุง ูููู ุญุฐูู  
โ **Audit Trail** - ุชุณุฌูู ุฌููุน ุงูุนูููุงุช  
โ **Soft Delete** - ุญูุงูุฉ ูู ุงูุญุฐู ุงูุฎุงุทุฆ  
โ **Status Check** - ููุน ุงููุตูู ููููููููู/ุงููุญุฐูููู  

### Guards ุงููุณุชุฎุฏูุฉ:

```typescript
@UseGuards(JwtAuthGuard, RolesGuard)
@Roles(UserRole.ADMIN, UserRole.SUPER_ADMIN)
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

```http
GET /admin/users/stats/summary
```

**Response:**
```json
{
  "total": 1500,      // ุฅุฌูุงูู ุงููุณุชุฎุฏููู
  "active": 1200,     // ุงููุดุทูู
  "suspended": 50,    // ุงูููููููู
  "deleted": 250,     // ุงููุญุฐูููู
  "admins": 10,       // ุงููุฏูุฑูู
  "engineers": 150,   // ุงููููุฏุณูู
  "wholesale": 80     // ุงูุชุฌุงุฑ
}
```

---

## ๐ง ุงูุชูุงูู

### ูุน ูุธุงู ุงูุชุงุฌุฑ ูุงููููุฏุณ:

โ ูููู ููุฃุฏูู ุฅูุดุงุก ูููุฏุณูู ูุจุงุดุฑุฉ  
โ ูููู ููุฃุฏูู ุฅูุดุงุก ุชุฌุงุฑ ูุน ูุณุจุฉ ุงูุฎุตู  
โ ุงูููุงููุฉ ุงูุชููุงุฆูุฉ ุนูุฏ ุงูุฅูุดุงุก  
โ ูุชูุงูู ูุน ูุธุงู ุงูุฑุฏูุฏ ุงูููุญุฏ  

### ูุน ุจุงูู ุงูุฃูุธูุฉ:

โ ูุชูุงูู ูุน `JwtAuthGuard` ุงูุญุงูู  
โ ูุชูุงูู ูุน `AdminGuard` ุงูุญุงูู  
โ ูุถูู `RolesGuard` ููุตูุงุญูุงุช ุงููุชูุฏูุฉ  
โ Backward compatible - ูุง ููุณุฑ ุงูููุฏ ุงูููุฌูุฏ  

---

## ๐ ุงูุชูุซูู ุงููุงูู

### ููุจุฏุก ุงูุณุฑูุน:
๐ [`ADMIN_QUICK_START.md`](./ADMIN_QUICK_START.md)

### ููุฏููู ุงูุดุงูู:
๐ [`ADMIN_USERS_MANAGEMENT_SYSTEM.md`](./ADMIN_USERS_MANAGEMENT_SYSTEM.md)

### ููุฃูุซูุฉ ุงูุนูููุฉ:
๐ [`ADMIN_API_EXAMPLES.md`](./ADMIN_API_EXAMPLES.md)

### ุฃูุธูุฉ ุฃุฎุฑู:
- [`WHOLESALE_AND_ENGINEER_SYSTEM.md`](./WHOLESALE_AND_ENGINEER_SYSTEM.md)
- [`API_EXAMPLES_WHOLESALE_ENGINEER.md`](./API_EXAMPLES_WHOLESALE_ENGINEER.md)
- [`RESPONSE_ERROR_SYSTEM.md`](./RESPONSE_ERROR_SYSTEM.md)

---

## โ Checklist ุงูุชุทุจูู

### ูููุทูุฑูู:
- [ ] ููู ูุธุงู ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช
- [ ] ูุฑุงุฌุนุฉ User Schema ุงูุฌุฏูุฏ
- [ ] ููู RolesGuard ูุขููุฉ ุนููู
- [ ] ุงุฎุชุจุงุฑ ุฌููุน ุงูู endpoints
- [ ] ุงุฎุชุจุงุฑ ุงูุญูุงูุงุช ูุงูุฃูุงู

### ููุงุฎุชุจุงุฑ:
- [ ] CRUD ุงูุฃุณุงุณูุฉ
- [ ] Pagination ูุงูููุชุฑุฉ
- [ ] ุงูุจุญุซ
- [ ] ุงูุตูุงุญูุงุช (Admin vs Super Admin)
- [ ] Soft Delete ูุงูุงุณุชุนุงุฏุฉ
- [ ] Hard Delete
- [ ] ููุน ุญุฐู Super Admin
- [ ] ุงูุฅุญุตุงุฆูุงุช

### ููุฅูุชุงุฌ:
- [ ] ุฅูุดุงุก Super Admin ุงูุฃูู
- [ ] ุชุนููู ุตูุงุญูุงุช ุงููุฑูู
- [ ] ุฅุนุฏุงุฏ ุงููุฑุงูุจุฉ ูุงูุชุณุฌูู
- [ ] ุงุฎุชุจุงุฑ ุงูุฃูุงู
- [ ] ูุฑุงุฌุนุฉ ุงูุฃุฏุงุก

---

## ๐ ุงูููุงููู ุงูุฃุณุงุณูุฉ

### 1. Roles vs Permissions

**Roles (ุงูุฃุฏูุงุฑ):**
- ูุฌููุนุฉ ูุญุฏุฏุฉ ูุณุจูุงู
- `user`, `moderator`, `admin`, `super_admin`

**Permissions (ุงูุตูุงุญูุงุช):**
- ูุฎุตุตุฉ ููุงุจูุฉ ููุฅุถุงูุฉ
- `manage_users`, `approve_capabilities`, `view_analytics`, ...

### 2. Soft Delete vs Hard Delete

**Soft Delete:**
- ุญุฐู ูุคูุช
- ูุถุน `deletedAt` timestamp
- ูุงุจู ููุงุณุชุนุงุฏุฉ
- ุงูุฃูุงู: ุนุงูู

**Hard Delete:**
- ุญุฐู ููุงุฆู
- ูุญุฐู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุบูุฑ ูุงุจู ููุงุณุชุนุงุฏุฉ
- ููุท Super Admin

### 3. User Status

```typescript
enum UserStatus {
  ACTIVE = 'active',       // ูุดุท
  SUSPENDED = 'suspended', // ููููู
  PENDING = 'pending',     // ููุฏ ุงูุงูุชุธุงุฑ
}
```

---

## ๐ก ูุตุงุฆุญ ูููุฉ

1. **ุงุจุฏุฃ ุจุงูุจุฏุก ุงูุณุฑูุน** - [`ADMIN_QUICK_START.md`](./ADMIN_QUICK_START.md)
2. **ุงุณุชุฎุฏู Soft Delete** - ูููู ุงูุงุณุชุนุงุฏุฉ ูุงุญูุงู
3. **ุณุฌู ุงูุฃุณุจุงุจ** - ุนูุฏ ุงูุฅููุงู ุฃู ุงูุญุฐู
4. **Super Admin ูุญูู** - ูุง ูููู ุญุฐูู ุฃู ุชุนุฏููู
5. **Pagination ุฏุงุฆูุงู** - ูุง ุชุญูู ุฌููุน ุงููุณุชุฎุฏููู
6. **ุงูุฃูุงู ุฃููุงู** - ุงุณุชุฎุฏู ุงูุญูุงูุงุช ุงูููุงุณุจุฉ

---

## ๐ ุงูุฎูุงุตุฉ

โ **ูุธุงู ุฅุฏุงุฑุฉ ุดุงูู** ูููุณุชุฎุฏููู  
โ **ุตูุงุญูุงุช ูุชูุฏูุฉ** (Roles & Permissions)  
โ **Pagination & Filtering** ุงุญุชุฑุงูู  
โ **Soft/Hard Delete** ุขูู  
โ **ุชูุซูู ูุงูู** ูุน ุฃูุซูุฉ  
โ **ูุชูุงูู** ูุน ุงูุฃูุธูุฉ ุงูููุฌูุฏุฉ  
โ **ุฌุงูุฒ ููุฅูุชุงุฌ** ๐  

---

**ุชู ุจูุงุณุทุฉ:** Claude Sonnet 4.5  
**ุงูุชุงุฑูุฎ:** 13 ุฃูุชูุจุฑ 2025  
**ุงููุดุฑูุน:** Tagadodo  
**ุงูุฅุตุฏุงุฑ:** 1.0.0

---

**ููุฏุนู ูุงูุฃุณุฆูุฉ:**  
ุฑุงุฌุน ุงููููุงุช ุงูููุซูุฉ ุฃู ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

