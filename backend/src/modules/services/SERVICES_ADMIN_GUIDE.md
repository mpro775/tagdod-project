# دليل إدارة الخدمات المتقدم

## نظرة عامة

تم تطوير نظام إدارة الخدمات ليكون شاملاً ومتقدماً، يوفر للأدمن إمكانيات إدارية كاملة لجميع جوانب نظام الخدمات.

## الميزات الجديدة

### 1. إحصائيات شاملة
- **نظرة عامة**: إحصائيات فورية لجميع جوانب النظام
- **اتجاهات الطلبات**: تتبع الطلبات عبر الزمن (يومي/أسبوعي/شهري)
- **أداء المهندسين**: إحصائيات مفصلة لكل مهندس
- **أنواع الخدمات**: تحليل حسب نوع الخدمة
- **الإيرادات**: تتبع الإيرادات والأرباح

### 2. إدارة متقدمة للطلبات
- **فلترة متقدمة**: حسب الحالة، النوع، المهندس، العميل، التاريخ
- **بحث ذكي**: في العنوان، الوصف، النوع
- **تعديل الحالات**: تغيير حالة الطلبات مع إضافة ملاحظات
- **تعيين مهندسين**: تعيين مهندس يدوياً للطلب
- **إلغاء إداري**: إلغاء الطلبات مع ذكر السبب

### 3. إدارة المهندسين
- **قائمة شاملة**: جميع المهندسين مع إحصائياتهم
- **تقييم الأداء**: معدل الإنجاز، التقييم المتوسط، الإيرادات
- **تفاصيل مفصلة**: معلومات شخصية وإحصائيات مفصلة لكل مهندس
- **عروض المهندس**: جميع عروض المهندس مع تفاصيلها

### 4. إدارة العروض
- **عرض شامل**: جميع العروض في النظام
- **فلترة متقدمة**: حسب الحالة، المهندس، الطلب
- **إحصائيات سريعة**: عدد العروض، القيمة الإجمالية، المتوسط

## API Endpoints الجديدة

### إدارة الطلبات
```
GET /admin/services/requests - قائمة الطلبات مع فلاتر متقدمة
GET /admin/services/requests/:id - تفاصيل طلب معين
GET /admin/services/requests/:id/offers - عروض طلب معين
PATCH /admin/services/requests/:id/status - تحديث حالة الطلب
POST /admin/services/requests/:id/cancel - إلغاء الطلب
POST /admin/services/requests/:id/assign-engineer - تعيين مهندس
```

### الإحصائيات
```
GET /admin/services/statistics/overview - إحصائيات عامة
GET /admin/services/statistics/requests - إحصائيات الطلبات
GET /admin/services/statistics/engineers - إحصائيات المهندسين
GET /admin/services/statistics/services-types - إحصائيات أنواع الخدمات
GET /admin/services/statistics/revenue - إحصائيات الإيرادات
```

### إدارة المهندسين
```
GET /admin/services/engineers - قائمة المهندسين
GET /admin/services/engineers/:id/statistics - إحصائيات مهندس معين
GET /admin/services/engineers/:id/offers - عروض مهندس معين
```

### إدارة العروض
```
GET /admin/services/offers - قائمة العروض
```

## واجهة المستخدم الجديدة

### 1. صفحة النظرة العامة (`/services`)
- إحصائيات فورية شاملة
- مؤشرات الأداء الرئيسية
- مخططات بصرية للبيانات

### 2. صفحة إدارة الطلبات (`/services/requests`)
- جدول متقدم مع فلاتر
- إجراءات سريعة لكل طلب
- حوارات تفاعلية للتفاصيل والإجراءات

### 3. صفحة إدارة المهندسين (`/services/engineers`)
- قائمة المهندسين مع إحصائيات
- تفاصيل مفصلة لكل مهندس
- تقييم الأداء البصري

### 4. صفحة إدارة العروض (`/services/offers`)
- عرض شامل للعروض
- فلاتر متقدمة
- إحصائيات سريعة

### 5. صفحة التحليلات (`/services/analytics`)
- تبويبات منظمة للبيانات
- فلاتر زمنية متقدمة
- عرض بصري للاتجاهات

## الفلاتر المتاحة

### فلاتر الطلبات
- **الحالة**: OPEN, OFFERS_COLLECTING, ASSIGNED, IN_PROGRESS, COMPLETED, RATED, CANCELLED
- **النوع**: نوع الخدمة
- **المهندس**: مهندس معين
- **العميل**: عميل معين
- **التاريخ**: من وإلى تاريخ
- **البحث**: في العنوان، الوصف، النوع

### فلاتر العروض
- **الحالة**: OFFERED, ACCEPTED, REJECTED, CANCELLED
- **المهندس**: مهندس معين
- **الطلب**: طلب معين

### فلاتر التحليلات
- **الفترة الزمنية**: يومي، أسبوعي، شهري
- **نطاق التاريخ**: من وإلى تاريخ
- **الحد الأقصى**: عدد النتائج

## الإحصائيات المتاحة

### إحصائيات عامة
- إجمالي الطلبات والعروض والمهندسين
- معدل إنجاز الطلبات
- التقييم المتوسط
- إجمالي الإيرادات

### إحصائيات الطلبات
- الطلبات حسب الفترة (يومي/أسبوعي/شهري)
- الطلبات المكتملة والملغية
- اتجاهات النمو

### إحصائيات المهندسين
- عدد الطلبات لكل مهندس
- معدل الإنجاز
- التقييم المتوسط
- إجمالي الإيرادات

### إحصائيات أنواع الخدمات
- عدد الطلبات لكل نوع
- معدل الإنجاز
- متوسط السعر

### إحصائيات الإيرادات
- الإيرادات حسب الفترة
- عدد الطلبات المدفوعة
- متوسط قيمة الطلب

## الميزات المتقدمة

### 1. التحديث الفوري
- جميع الإجراءات تحدث البيانات فوراً
- إعادة تحميل تلقائية للجداول
- إشعارات النجاح والخطأ

### 2. واجهة متجاوبة
- تصميم متجاوب لجميع الشاشات
- جداول قابلة للتخصيص
- أيقونات بصرية واضحة

### 3. تجربة مستخدم محسنة
- حوارات تفاعلية
- تأكيدات للأعمال الحساسة
- رسائل خطأ واضحة

### 4. أداء محسن
- استعلامات محسنة
- فهرسة قاعدة البيانات
- تحميل تدريجي للبيانات

## الأمان والصلاحيات

- جميع endpoints محمية بـ JWT و AdminGuard
- التحقق من صحة البيانات
- معالجة الأخطاء الشاملة
- تسجيل العمليات الإدارية

## الاستخدام

### للوصول للنظام:
1. تسجيل الدخول كأدمن
2. الانتقال إلى قسم "الخدمات" في القائمة الجانبية
3. اختيار الصفحة المطلوبة:
   - **نظرة عامة**: للرؤية الشاملة
   - **طلبات الخدمات**: لإدارة الطلبات
   - **إدارة المهندسين**: لإدارة المهندسين
   - **إدارة العروض**: لإدارة العروض
   - **تحليلات الخدمات**: للتحليلات المتقدمة

### للاستفادة من الفلاتر:
1. استخدام فلاتر البحث للعثور على البيانات المطلوبة
2. تطبيق الفلاتر الزمنية للتحليلات
3. تصدير التقارير عند الحاجة

## التطوير المستقبلي

- إضافة المزيد من المخططات البصرية
- تطوير نظام إشعارات متقدم
- إضافة تقارير قابلة للتخصيص
- تطوير نظام تقييم أكثر تفصيلاً
- إضافة نظام مكافآت للمهندسين

---

**تم التطوير بواسطة**: فريق التطوير  
**التاريخ**: ديسمبر 2024  
**الإصدار**: 2.0.0
