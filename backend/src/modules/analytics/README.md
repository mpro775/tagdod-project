# Analytics Module (ูุธุงู ุงูุชุญูููุงุช ูุงูุชูุงุฑูุฑ ุงูุงุญุชุฑุงููุฉ)

ูุธุงู ุชุญูููุงุช ูุชูุงุฑูุฑ ุงุญุชุฑุงูู ุดุงูู ูุชุทุจูู ุฎุฏูุงุช ุงูุทุงูุฉ ุงูุดูุณูุฉ ูุน ููุญุงุช ุชุญูู ุชูุงุนููุฉ ูุชูุงุฑูุฑ ููุตูุฉ.

## ุงูููุฒุงุช

- โ **ููุญุฉ ุชุญูู ุดุงููุฉ**: ูุคุดุฑุงุช KPI ููุฎุทุทุงุช ูู ุงูููุช ุงููุนูู
- โ **ุชุญูููุงุช ูุชุนุฏุฏุฉ ุงูุฃุจุนุงุฏ**: ูููุณุชุฎุฏูููุ ุงูููุชุฌุงุชุ ุงูุทูุจุงุชุ ุงูุฎุฏูุงุชุ ูุงูุฏุนู
- โ **ุชูุงุฑูุฑ ุงุญุชุฑุงููุฉ**: PDFุ Excelุ CSVุ JSON ูุน ุชุตููู ูุฎุตุต
- โ **ุฌุฏููุฉ ุชููุงุฆูุฉ**: ุชูุงุฑูุฑ ููููุฉุ ุฃุณุจูุนูุฉุ ูุดูุฑูุฉ
- โ **ููุงุฑูุงุช ุฒูููุฉ**: ุชุญููู ุงูุงุชุฌุงูุงุช ูููุงุฑูุฉ ุงููุชุฑุงุช
- โ **ูุคุดุฑุงุช ุงูุฃุฏุงุก**: KPI ุดุงูู ูุน ุญุณุงุจุงุช ูุชูุฏูุฉ
- โ **ุชุญูููุงุช ุฌุบุฑุงููุฉ**: ุฎุฑุงุฆุท ูุชูุฒูุน ุญุณุจ ุงูููุงุทู
- โ **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**: ุงุณุชุฌุงุจุฉ ุงููุธุงู ูุญุงูุฉ ุงูุฎุฏูุงุช
- โ **ุชุตุฏูุฑ ูุชูุฏู**: ุจุตูุบ ูุชุนุฏุฏุฉ ููุชุญููู ุงูุฎุงุฑุฌู
- โ **ุชูุจููุงุช ุฐููุฉ**: ุฅุดุนุงุฑุงุช ูููุคุดุฑุงุช ุงููููุฉ

## ุงูุจูุงูุงุช ุงููุญููุฉ

### ๐ ูุคุดุฑุงุช KPI ุงูุฑุฆูุณูุฉ
- **ูุนุฏู ุงูุชุญููู**: ูุณุจุฉ ุงูุฒูุงุฑ ุงูุฐูู ูุตุจุญูู ุนููุงุก
- **ูููุฉ ุงูุนููู ูุฏู ุงูุญูุงุฉ**: ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช ูู ุงูุนููู
- **ูุนุฏู ุงูุงุญุชูุงุธ**: ูุณุจุฉ ุงูุนููุงุก ุงููุญุชูุธ ุจูู
- **ุชูููุฉ ุงูุชุณุงุจ ุงูุนููู**: ุงูุชูููุฉ ูุฌุฐุจ ุนููู ุฌุฏูุฏ
- **ูุนุฏู ุงูุงุฑุชุฏุงุฏ**: ูุณุจุฉ ุงูุนููุงุก ุงูุฐูู ูุชููููู
- **ุฏุฑุฌุฉ ุฑุถุง ุงูุนููุงุก**: NPS ููุนุฏูุงุช ุงูุฑุถุง

### ๐ ุงูุชุญูููุงุช ุงููุชุงุญุฉ

#### ุชุญูููุงุช ุงููุณุชุฎุฏููู
- ุฅุญุตุงุฆูุงุช ุงูุชุณุฌูู ูุงููุดุงุท
- ุชูุฒูุน ุงูุฃุฏูุงุฑ (ุนููุงุกุ ูููุฏุณููุ ูุดุฑููู)
- ูุนุฏูุงุช ุงูุงุญุชูุงุธ ูุงูุงุฑุชุฏุงุฏ
- ุงูุชุญููู ุงูุฌุบุฑุงูู ูููุณุชุฎุฏููู

#### ุชุญูููุงุช ุงูููุชุฌุงุช
- ุฃุฏุงุก ุงููุจูุนุงุช ููู ููุชุฌ
- ุงูููุชุฌุงุช ุงูุฃูุซุฑ ุดุนุจูุฉ
- ูุนุฏูุงุช ุงูุชูููู ูุงููุฑุงุฌุนุงุช
- ุชุญููู ุงููุฎุฒูู ูููุงุท ุฅุนุงุฏุฉ ุงูุทูุจ

#### ุชุญูููุงุช ุงูุทูุจุงุช ูุงููุจูุนุงุช
- ุฅุญุตุงุฆูุงุช ุงูุทูุจุงุช (ููุชููุฉุ ูุนููุฉุ ููุบูุฉ)
- ูุชูุณุท ูููุฉ ุงูุทูุจ
- ุชุญููู ุงูุฅูุฑุงุฏุงุช ุญุณุจ ุงููุชุฑุฉ ุงูุฒูููุฉ
- ุฃุฏุงุก ุทุฑู ุงูุฏูุน ุงููุฎุชููุฉ

#### ุชุญูููุงุช ุงูุฎุฏูุงุช
- ุฅุญุตุงุฆูุงุช ุทูุจุงุช ุงูุฎุฏูุงุช
- ุฃุฏุงุก ุงููููุฏุณูู (ููุช ุงูุงุณุชุฌุงุจุฉุ ูุนุฏู ุงูุฅูุฌุงุฒ)
- ุชููููุงุช ุงูุฎุฏูุงุช ูุฌูุฏุฉ ุงูุนูู
- ุชุญููู ุฃููุงุน ุงูุฎุฏูุงุช ุงููุทููุจุฉ

#### ุชุญูููุงุช ุงูุฏุนู ุงูููู
- ุฅุญุตุงุฆูุงุช ุงูุชุฐุงูุฑ (ููุชูุญุฉุ ูุบููุฉุ ููุฏ ุงููุฑุงุฌุนุฉ)
- ุฃููุงุช ุญู ุงููุดุงูู
- ุฑุถุง ุงูุนููุงุก ุนู ุงูุฏุนู
- ุฃุฏุงุก ููุซูู ุงูุฏุนู

#### ุชุญูููุงุช ุงูุฃุฏุงุก ุงูุชููู
- ุฃููุงุช ุงุณุชุฌุงุจุฉ API
- ูุนุฏูุงุช ุงูุฃุฎุทุงุก ูุงูุชููุฑ
- ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ (CPUุ ุฐุงูุฑุฉุ ูุงุนุฏุฉ ุจูุงูุงุช)
- ููุงุท ุงูููุงูุฉ ุงูุฃุจุทุฃ

## API Endpoints

### ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ

#### ุงูุญุตูู ุนูู ุจูุงูุงุช ููุญุฉ ุงูุชุญูู
```http
GET /analytics/dashboard?period=monthly&startDate=2024-01-01&endDate=2024-12-31&compareWithPrevious=true
Authorization: Bearer {admin-token}
```

**Parameters:**
- `period`: `daily`, `weekly`, `monthly`, `quarterly`, `yearly`
- `startDate`: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ (ISO format)
- `endDate`: ุชุงุฑูุฎ ุงูููุงูุฉ (ISO format)
- `compareWithPrevious`: ููุงุฑูุฉ ูุน ุงููุชุฑุฉ ุงูุณุงุจูุฉ

**Response:**
```json
{
  "overview": {
    "totalUsers": 1250,
    "totalRevenue": 450000,
    "totalOrders": 890,
    "activeServices": 45,
    "openSupportTickets": 12,
    "systemHealth": 98.5
  },
  "revenueCharts": {
    "daily": [...],
    "monthly": [...],
    "byCategory": [...]
  },
  "userCharts": {...},
  "productCharts": {...},
  "serviceCharts": {...},
  "supportCharts": {...},
  "kpis": {
    "revenueGrowth": 15.5,
    "customerSatisfaction": 4.6,
    "orderConversion": 12.5,
    "serviceEfficiency": 94.2,
    "supportResolution": 85.3,
    "systemUptime": 99.9
  }
}
```

### ุงูุชุญูููุงุช ุงูุชูุตูููุฉ

#### ุชุญูููุงุช ุงููุณุชุฎุฏููู
```http
GET /analytics/users?period=monthly&startDate=2024-01-01&endDate=2024-12-31
```

#### ุชุญูููุงุช ุงูููุชุฌุงุช
```http
GET /analytics/products?period=monthly&startDate=2024-01-01&endDate=2024-12-31
```

#### ุชุญูููุงุช ุงูุฅูุฑุงุฏุงุช
```http
GET /analytics/revenue?period=monthly&startDate=2024-01-01&endDate=2024-12-31
```

#### ุชุญูููุงุช ุงูุฎุฏูุงุช
```http
GET /analytics/services?period=monthly&startDate=2024-01-01&endDate=2024-12-31
```

#### ุชุญูููุงุช ุงูุฏุนู
```http
GET /analytics/support?period=monthly&startDate=2024-01-01&endDate=2024-12-31
```

#### ูุคุดุฑุงุช ุงูุฃุฏุงุก
```http
GET /analytics/kpis?period=monthly
```

### ุฅูุดุงุก ุงูุชูุงุฑูุฑ

#### ุชูุฑูุฑ ูุฎุตุต
```http
POST /analytics/reports/generate
Content-Type: application/json
Authorization: Bearer {admin-token}

{
  "reportType": "monthly_report",
  "formats": ["pdf", "excel"],
  "startDate": "2024-01-01",
  "endDate": "2024-12-31",
  "includeCharts": true,
  "includeRawData": false
}
```

**Response:**
```json
{
  "id": "report_1726185600000",
  "type": "monthly_report",
  "period": "ููุงูุฑ 2024",
  "generatedAt": "2024-01-31T23:59:59Z",
  "data": {...},
  "insights": [
    "ุงูุฅูุฑุงุฏุงุช ุฒุงุฏุช ุจูุณุจุฉ 15% ููุงุฑูุฉ ุจุงูุดูุฑ ุงููุงุถู",
    "ูุนุฏู ุฑุถุง ุงูุนููุงุก ุจูุบ 4.6 ูู 5"
  ],
  "fileUrls": [
    "https://cdn.example.com/reports/monthly-report-2024-01.pdf",
    "https://cdn.example.com/reports/monthly-report-2024-01.xlsx"
  ]
}
```

#### ุฌุฏููุฉ ุงูุชูุงุฑูุฑ
```http
POST /analytics/reports/schedule
Content-Type: application/json
Authorization: Bearer {admin-token}

{
  "name": "ุชูุฑูุฑ ุงููุจูุนุงุช ุงูุฃุณุจูุนู",
  "description": "ุชูุฑูุฑ ุดุงูู ูููุจูุนุงุช ูุงูุฅูุฑุงุฏุงุช ุงูุฃุณุจูุนูุฉ",
  "reportType": "weekly_report",
  "frequency": "weekly",
  "formats": ["pdf"],
  "recipients": ["manager@example.com", "ceo@example.com"],
  "filters": {
    "includeCharts": true,
    "customMetrics": ["revenue", "orders", "conversion"]
  }
}
```

### ููุงุฑูุฉ ุงููุชุฑุงุช

```http
GET /analytics/comparison?currentStart=2024-02-01&currentEnd=2024-02-28&previousStart=2024-01-01&previousEnd=2024-01-31
```

**Response:**
```json
{
  "data": {
    "overview": {
      "totalUsers": {
        "current": 1350,
        "previous": 1200,
        "change": 12.5
      },
      "totalRevenue": {
        "current": 480000,
        "previous": 420000,
        "change": 14.3
      }
    },
    "currentPeriod": "2024-02-01 to 2024-02-28",
    "previousPeriod": "2024-01-01 to 2024-01-31"
  }
}
```

### ุงูุงุชุฌุงูุงุช ูุงูุชููุนุงุช

#### ุงุชุฌุงูุงุช ุงููุคุดุฑุงุช
```http
GET /analytics/trends/revenue?period=daily&days=30
```

**Response:**
```json
{
  "metric": "revenue",
  "period": "daily",
  "data": [
    {
      "date": "2024-01-01",
      "value": 12500,
      "change": 0
    },
    {
      "date": "2024-01-02",
      "value": 13200,
      "change": 5.6
    }
  ]
}
```

### ุงูุชุตุฏูุฑ

#### ุชุตุฏูุฑ ุงูุจูุงูุงุช
```http
GET /analytics/export/csv?type=users&period=monthly
```

**Response:**
```json
{
  "message": "Export generated successfully",
  "fileUrl": "https://cdn.example.com/exports/users_2024-01.csv",
  "format": "csv",
  "type": "users",
  "generatedAt": "2024-01-31T10:30:00Z"
}
```

### ูุฑุงูุจุฉ ุงูุฃุฏุงุก

#### ูุคุดุฑุงุช ุงูุฃุฏุงุก ุงูุชููู
```http
GET /analytics/performance
```

**Response:**
```json
{
  "apiResponseTime": 245,
  "errorRate": 0.02,
  "uptime": 99.9,
  "concurrentUsers": 1250,
  "memoryUsage": 75.5,
  "cpuUsage": 45.2,
  "diskUsage": 68.3,
  "activeConnections": 5,
  "slowestEndpoints": [
    {
      "endpoint": "/api/search",
      "method": "GET",
      "averageTime": 1200,
      "maxTime": 5000,
      "callCount": 5000
    }
  ],
  "databaseStats": {
    "totalCollections": 12,
    "totalDocuments": 50000,
    "databaseSize": 500000000,
    "indexSize": 50000000
  }
}
```

## ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ููุญุฉ ุชุญูู ุชูุงุนููุฉ

```javascript
// ุงูุญุตูู ุนูู ุจูุงูุงุช ููุญุฉ ุงูุชุญูู
async function loadDashboard() {
  try {
    const response = await fetch('/analytics/dashboard?period=monthly&compareWithPrevious=true', {
      headers: {
        'Authorization': `Bearer ${adminToken}`
      }
    });

    const data = await response.json();

    // ุนุฑุถ ุงููุคุดุฑุงุช ุงูุฑุฆูุณูุฉ
    displayKPIs(data.kpis);

    // ุฑุณู ูุฎุทุทุงุช ุงูุฅูุฑุงุฏุงุช
    drawRevenueCharts(data.revenueCharts);

    // ุฑุณู ูุฎุทุทุงุช ุงููุณุชุฎุฏููู
    drawUserCharts(data.userCharts);

  } catch (error) {
    console.error('Failed to load dashboard:', error);
  }
}
```

### ุฅูุดุงุก ุชูุฑูุฑ ุดูุฑู

```javascript
async function generateMonthlyReport() {
  const reportConfig = {
    reportType: 'monthly_report',
    formats: ['pdf', 'excel'],
    startDate: '2024-01-01',
    endDate: '2024-01-31',
    includeCharts: true,
    includeRawData: true
  };

  try {
    const response = await fetch('/analytics/reports/generate', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${adminToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(reportConfig)
    });

    const result = await response.json();
    console.log('Report generated:', result);

    // ุนุฑุถ ุฑูุงุจุท ุงูุชุญููู
    displayDownloadLinks(result.fileUrls);

  } catch (error) {
    console.error('Failed to generate report:', error);
  }
}
```

### ูุฑุงูุจุฉ ุงูุฃุฏุงุก ุงูุชููุงุฆูุฉ

```javascript
// ูุฑุงูุจุฉ ุงูุฃุฏุงุก ูู 5 ุฏูุงุฆู
setInterval(async () => {
  try {
    const response = await fetch('/analytics/performance', {
      headers: {
        'Authorization': `Bearer ${adminToken}`
      }
    });

    const metrics = await response.json();

    // ุงูุชุญูู ูู ุญุฏูุฏ ุงูุฃุฏุงุก
    checkPerformanceThresholds(metrics);

    // ุชุญุฏูุซ ูุคุดุฑุงุช ููุญุฉ ุงูุชุญูู
    updatePerformanceIndicators(metrics);

  } catch (error) {
    console.error('Performance monitoring failed:', error);
  }
}, 5 * 60 * 1000);
```

### ุชุญููู ุงูุงุชุฌุงูุงุช

```javascript
async function analyzeTrends() {
  const metrics = ['revenue', 'users', 'orders', 'support_tickets'];

  for (const metric of metrics) {
    try {
      const response = await fetch(`/analytics/trends/${metric}?days=90`, {
        headers: {
          'Authorization': `Bearer ${adminToken}`
        }
      });

      const trendData = await response.json();

      // ุชุญููู ุงูุงุชุฌุงูุงุช
      const analysis = analyzeTrend(trendData.data);

      // ุนุฑุถ ุงููุชุงุฆุฌ
      displayTrendAnalysis(metric, analysis);

    } catch (error) {
      console.error(`Failed to analyze ${metric} trend:`, error);
    }
  }
}
```

## ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ

ุงููุธุงู ูุฏุนู ุฌุฏููุฉ ุงูุชูุงุฑูุฑ ุงูุชููุงุฆูุฉ:

- **ููููุฉ**: ููุฎุต ูููู ููุฃูุดุทุฉ
- **ุฃุณุจูุนูุฉ**: ุชูุฑูุฑ ุดุงูู ููุฃุณุจูุน
- **ุดูุฑูุฉ**: ุชุญููู ุดุงูู ููุดูุฑ
- **ุฑุจุน ุณูููุฉ**: ุชูุงุฑูุฑ ุงุณุชุฑุงุชูุฌูุฉ

## ุงูุชูุจููุงุช ูุงูุฅุดุนุงุฑุงุช

- ุชูุจููุงุช ููุงูุญุฑุงูุงุช ูู ุงููุคุดุฑุงุช ุงูุฑุฆูุณูุฉ
- ุฅุดุนุงุฑุงุช ููุชูุงุฑูุฑ ุงูุฌุฏูุฏุฉ
- ุชูุจููุงุช ููุดุงูู ุงูุฃุฏุงุก ุงูุชููู
- ุฅุดุนุงุฑุงุช ูุชุบููุฑุงุช ูููุฉ ูู ุงูุจูุงูุงุช

## ุงูุฃูุงู ูุงูุตูุงุญูุงุช

- **ูุดุฑููู ููุท**: ุฌููุน endpoints ูุญููุฉ ุจู AdminGuard
- **ุชุฏููู ุดุงูู**: ุชุณุฌูู ุฌููุน ุนูููุงุช ุงููุตูู
- **ุชุดููุฑ ุงูุจูุงูุงุช**: ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ูุญููุฉ
- **ุญุฏูุฏ ุงููุตูู**: ูููุฏ ุนูู ุนุฏุฏ ุงูุงุณุชุนูุงูุงุช

## ููุงุญุธุงุช ูููุฉ

1. **ุงูุชุฎุฒูู ุงูุชููุงุฆู**: ุงูุจูุงูุงุช ุงูุชุญููููุฉ ุชูุญูุธ ุชููุงุฆูุงู ููููุงู
2. **ุงูุฃุฏุงุก**: ุงูุงุณุชุนูุงูุงุช ูุญุณููุฉ ุจู indexes ููุงุณุจุฉ
3. **ุงูุฐุงูุฑุฉ**: ุงูุจูุงูุงุช ูููุณูุฉ ุญุณุจ ุงููุชุฑุงุช ุงูุฒูููุฉ
4. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: ุงูุจูุงูุงุช ุงููููุฉ ุชููุณุฎ ุงุญุชูุงุทูุงู
5. **ุงูุชูุณุน**: ุงููุธุงู ูุตูู ููุชุนุงูู ูุน ูููุงุช ูุจูุฑุฉ ูู ุงูุจูุงูุงุช

## ุงูุชุทููุฑ ุงููุณุชูุจูู

- **ุฐูุงุก ุงุตุทูุงุนู**: ุชุญูููุงุช ุชูุจุคูุฉ ูุชูุฏูุฉ
- **ุชุฎุตูุต**: ููุญุงุช ุชุญูู ูุฎุตุตุฉ ููู ูุณุชุฎุฏู
- **ุชูุงูู**: ูุน ุฃุฏูุงุช BI ุฎุงุฑุฌูุฉ (Tableau, Power BI)
- **ุงูููุช ุงููุนูู**: ุชุญุฏูุซุงุช ููุฑูุฉ ูููุคุดุฑุงุช
- **ุงูุชูุจููุงุช ุงููุชูุฏูุฉ**: ููุงุนุฏ ุชูุจูู ูุฎุตุตุฉ
