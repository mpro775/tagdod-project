# تدفقات الطلبات (Order Flows)

## الملفات المتاحة
- `status-fsm.mmd` - آلة حالات الطلب (Finite State Machine)

## شرح التدفقات

### 1. دورة حياة الطلب
- **DRAFT:** مسودة (قبل الإرسال)
- **PENDING_PAYMENT:** في انتظار الدفع
- **CONFIRMED:** مؤكد (تم الدفع)
- **PROCESSING:** قيد المعالجة
- **READY_TO_SHIP:** جاهز للشحن
- **SHIPPED:** تم الشحن
- **OUT_FOR_DELIVERY:** في الطريق للتوصيل
- **DELIVERED:** تم التسليم
- **COMPLETED:** مكتمل

### 2. الحالات الخاصة
- **CANCELLED:** ملغي (في أي مرحلة قبل التسليم)
- **REFUNDED:** مسترد
- **RETURNED:** مرتجع
- **ON_HOLD:** معلق مؤقتاً

### 3. تتبع التغييرات
- **سجل الحالات:** حفظ تاريخ جميع التغييرات
- **المعلومات:** من غيّر، متى، السبب
- **الإشعارات:** إشعار العميل بكل تغيير مهم

### 4. إدارة الإرجاع
- **طلب الإرجاع:** من العميل عبر النظام
- **الموافقة:** مراجعة الإدارة والموافقة
- **المعالجة:** استلام المنتج والتحقق
- **الاسترداد:** إرجاع المبلغ أو استبدال المنتج

## نقاط مهمة
- آلة حالات صارمة مع قواعد التحول
- تتبع شامل لجميع التغييرات
- إشعارات تلقائية للحالات المهمة
- دعم الإلغاء في المراحل المبكرة
- تكامل مع نظام المخزون والشحن
