%% Service Management Flow
%% View at https://mermaid.live
flowchart TD
  A[إدارة الخدمات] --> B[إدارة الطلبات]
  A --> C[إدارة المهندسين]
  A --> D[الإحصائيات والتقارير]

  %% Request Management
  B --> B1[GET /admin/services/requests]
  B1 --> B2[فلاتر البحث]
  B2 --> B3[status, userId, engineerId, dateRange]
  B3 --> B4[ترتيب النتائج]
  B4 --> B5[عرض قائمة الطلبات]

  B5 --> B6[تفاصيل الطلب]
  B6 --> B7["GET /admin/services/requests/:id"]
  B7 --> B8[عرض معلومات كاملة]
  B8 --> B9[عرض العروض المقدمة]

  B9 --> B10[إجراءات الإدارة]
  B10 --> B11[تعيين مهندس]
  B11 --> B12["POST /admin/services/requests/:id/assign-engineer"]
  B12 --> B13[تحديث engineerId]
  B13 --> B14[تحديث status إلى ASSIGNED]

  B14 --> B15[إلغاء طلب إدارياً]
  B15 --> B16["POST /admin/services/requests/:id/cancel"]
  B16 --> B17[تحديث status إلى CANCELLED]
  B17 --> B18[إضافة سبب الإلغاء]

  %% Engineer Management
  C --> C1[GET /admin/services/engineers]
  C1 --> C2[عرض قائمة المهندسين]
  C2 --> C3[معلومات أساسية]
  C3 --> C4[إحصائيات سريعة]

  C4 --> C5[تفاصيل المهندس]
  C5 --> C6["GET /admin/services/engineers/:id/statistics"]
  C6 --> C7[عدد الطلبات المكتملة]
  C7 --> C8[متوسط التقييم]
  C8 --> C9[إجمالي الإيرادات]
  C9 --> C10[معدل الإنجاز]

  C10 --> C11[عروض المهندس]
  C11 --> C12["GET /admin/services/engineers/:id/offers"]
  C12 --> C13[قائمة العروض المقدمة]
  C13 --> C14[حالات العروض]

  %% Statistics & Reports
  D --> D1[إحصائيات عامة]
  D1 --> D2[GET /admin/services/statistics/overview]
  D2 --> D3[إجمالي الطلبات]
  D3 --> D4[الطلبات حسب الحالة]
  D4 --> D5[إجمالي المهندسين]
  D5 --> D6[إجمالي الإيرادات]

  D6 --> D7[إحصائيات الطلبات]
  D7 --> D8[GET /admin/services/statistics/requests]
  D8 --> D9[توزيع حسب الحالة]
  D9 --> D10[توزيع حسب التاريخ]
  D10 --> D11[متوسط وقت الإنجاز]

  D11 --> D12[إحصائيات المهندسين]
  D12 --> D13[GET /admin/services/statistics/engineers]
  D13 --> D14[أداء كل مهندس]
  D14 --> D15[ترتيب حسب الإيرادات]
  D15 --> D16[ترتيب حسب التقييمات]

  D16 --> D17[إحصائيات الأنواع]
  D17 --> D18[GET /admin/services/statistics/services-types]
  D18 --> D19[توزيع الخدمات حسب النوع]
  D19 --> D20[الشعبية حسب النوع]

  D20 --> D21[إحصائيات الإيرادات]
  D21 --> D22[GET /admin/services/statistics/revenue]
  D22 --> D23[إيرادات حسب الفترة]
  D23 --> D24[متوسط إيراد الطلب]
  D24 --> D25[نمو الإيرادات]

  %% End points
  B18 --> E[نهاية إدارة الطلبات]
  C14 --> E
  D25 --> E
