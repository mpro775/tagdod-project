%% Services Overview Flow
%% View at https://mermaid.live
flowchart TD
  A[نظام الخدمات] --> B[ثلاثة أدوار رئيسية]

  B --> C[العملاء - Customers]
  B --> D[المهندسين - Engineers]
  B --> E[الإداريين - Admins]

  %% Customer Flow
  C --> C1[إنشاء طلب خدمة]
  C1 --> C2[عرض طلباتي]
  C2 --> C3[عرض العروض المقدمة]
  C3 --> C4[قبول عرض]
  C4 --> C5[إلغاء طلب]
  C5 --> C6[تقييم الخدمة]

  %% Engineer Flow
  D --> D1[البحث عن الطلبات القريبة]
  D1 --> D2[تقديم عرض]
  D2 --> D3[عرض عروضي]
  D3 --> D4[بدء العمل]
  D4 --> D5[إكمال الطلب]

  %% Admin Flow
  E --> E1[عرض جميع الطلبات]
  E1 --> E2[عرض تفاصيل الطلب]
  E2 --> E3[عرض العروض]
  E3 --> E4[تعيين مهندس]
  E4 --> E5[إلغاء طلب إدارياً]
  E5 --> E6[عرض الإحصائيات]

  %% Core Entities
  F[الكيانات الأساسية] --> F1[Service Request]
  F --> F2[Engineer Offer]

  F1 --> F1A[userId, title, description]
  F1 --> F1B[images, addressId, location]
  F1 --> F1C[status, scheduledAt, engineerId]
  F1 --> F1D[acceptedOffer, rating, adminNotes]

  F2 --> F2A[requestId, engineerId, amount]
  F2 --> F2B[note, distanceKm, status]

  %% Status Flows
  G[تدفقات الحالات] --> G1[Service Request Status]
  G --> G2[Engineer Offer Status]

  G1 --> G1A[OPEN → OFFERS_COLLECTING]
  G1 --> G1B[OFFERS_COLLECTING → ASSIGNED]
  G1 --> G1C[ASSIGNED → IN_PROGRESS]
  G1 --> G1D[IN_PROGRESS → COMPLETED]
  G1 --> G1E[COMPLETED → RATED]
  G1 --> G1F[Any → CANCELLED]

  G2 --> G2A[OFFERED → ACCEPTED]
  G2 --> G2B[OFFERED → REJECTED]
  G2 --> G2C[Any → CANCELLED]

  %% End points
  C6 --> H[نهاية تدفق العملاء]
  D5 --> H
  E6 --> H
