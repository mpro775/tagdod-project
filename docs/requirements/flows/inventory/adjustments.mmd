%% Inventory Adjustments Flow
%% View at https://mermaid.live
flowchart TD
  A[تعديل المخزون] --> B{نوع التعديل?}
  B -->|تحديث مخزون يدوي| C[تحديث مخزون متغير]
  B -->|عرض تقارير| D[عرض تقارير المخزون]

  %% Manual Stock Update
  C --> C1[استلام معرف المتغير وكمية جديدة]
  C1 --> C2[التحقق من صحة البيانات]
  C2 --> C3{البيانات صحيحة?}
  C3 -->|لا| C4[إرجاع خطأ التحقق]
  C3 -->|نعم| C5[تحديث حقل stock في Variant]
  C5 --> C6[حفظ التغييرات]
  C6 --> C7[إرجاع نجاح التحديث]

  %% Inventory Reports
  D --> D1{نوع التقرير?}
  D1 -->|مخزون منخفض| D2[البحث عن المتغيرات ذات stock < minStock]
  D1 -->|مخزون منتهي| D3[البحث عن المتغيرات ذات stock = 0]
  D2 --> D4[إرجاع قائمة المتغيرات]
  D3 --> D4
