%% Exchange Rates System Overview
%% View at https://mermaid.live
flowchart TD
  A[Exchange Rates System Overview] --> B{System Component?}
  B -->|Exchange Rates Management| C[Exchange Rates Management System]
  B -->|Currency Conversion| D[Currency Conversion System]
  B -->|Exchange Rates History| E[Exchange Rates History System]
  B -->|Exchange Rates Analytics| F[Exchange Rates Analytics System]
  B -->|Exchange Rates Automation| G[Exchange Rates Automation System]
  B -->|Exchange Rates Administration| H[Exchange Rates Administration System]
  
  %% Exchange Rates Management System
  C --> C1[Create Exchange Rate]
  C1 --> C2[Update Exchange Rate]
  C2 --> C3[Delete Exchange Rate]
  C3 --> C4[View Exchange Rates]
  C4 --> C5[Manage Exchange Rate Status]
  C5 --> C6[Exchange Rates Management Complete]
  
  %% Create Exchange Rate
  C1 --> C1A[Validate Exchange Rate Data]
  C1A --> C1B[Check for Existing Rate]
  C1B --> C1C[Create New Exchange Rate]
  C1C --> C1D[Set Exchange Rate Properties]
  C1D --> C1E[Save Exchange Rate]
  C1E --> C1F[Log Exchange Rate Creation]
  C1F --> C1G[Exchange Rate Created]
  
  %% Validate Exchange Rate Data
  C1A --> C1A1[Validate from currency]
  C1A1 --> C1A2[Validate to currency]
  C1A2 --> C1A3[Validate rate value]
  C1A3 --> C1A4[Validate base rate]
  C1A4 --> C1A5[Validate effective date]
  C1A5 --> C1A6[Validate expiry date]
  C1A6 --> C1A7[Exchange rate data validated]
  
  %% Check for Existing Rate
  C1B --> C1B1[Search for existing rate]
  C1B1 --> C1B2[Check currency pair]
  C1B2 --> C1B3[Check active status]
  C1B3 --> C1B4[Check date overlap]
  C1B4 --> C1B5[Existing rate checked]
  
  %% Create New Exchange Rate
  C1C --> C1C1[Initialize exchange rate object]
  C1C1 --> C1C2[Set basic properties]
  C1C2 --> C1C3[Set rate properties]
  C1C3 --> C1C4[Set metadata]
  C1C4 --> C1C5[Exchange rate object created]
  
  %% Set Exchange Rate Properties
  C1D --> C1D1[Set from currency]
  C1D1 --> C1D2[Set to currency]
  C1D2 --> C1D3[Set rate value]
  C1D3 --> C1D4[Set base rate]
  C1D4 --> C1D5[Set buy rate]
  C1D5 --> C1D6[Set sell rate]
  C1D6 --> C1D7[Set spread]
  C1D7 --> C1D8[Set source]
  C1D8 --> C1D9[Set effective date]
  C1D9 --> C1D10[Set expiry date]
  C1D10 --> C1D11[Set notes]
  C1D11 --> C1D12[Exchange rate properties set]
  
  %% Update Exchange Rate
  C2 --> C2A[Find Exchange Rate]
  C2A --> C2B[Validate Update Data]
  C2B --> C2C[Update Exchange Rate Properties]
  C2C --> C2D[Create History Record]
  C2D --> C2E[Save Updated Exchange Rate]
  C2E --> C2F[Log Exchange Rate Update]
  C2F --> C2G[Exchange Rate Updated]
  
  %% Find Exchange Rate
  C2A --> C2A1[Search by currency pair]
  C2A1 --> C2A2[Check active status]
  C2A2 --> C2A3[Validate existence]
  C2A3 --> C2A4[Exchange rate found]
  
  %% Validate Update Data
  C2B --> C2B1[Validate rate value]
  C2B1 --> C2B2[Validate base rate]
  C2B2 --> C2B3[Validate buy rate]
  C2B3 --> C2B4[Validate sell rate]
  C2B4 --> C2B5[Validate effective date]
  C2B5 --> C2B6[Validate expiry date]
  C2B6 --> C2B7[Update data validated]
  
  %% Update Exchange Rate Properties
  C2C --> C2C1[Update rate value]
  C2C1 --> C2C2[Update base rate]
  C2C2 --> C2C3[Update buy rate]
  C2C3 --> C2C4[Update sell rate]
  C2C4 --> C2C5[Update spread]
  C2C5 --> C2C6[Update source]
  C2C6 --> C2C7[Update effective date]
  C2C7 --> C2C8[Update expiry date]
  C2C8 --> C2C9[Update notes]
  C2C9 --> C2C10[Update last updated by]
  C2C10 --> C2C11[Update last updated at]
  C2C11 --> C2C12[Exchange rate properties updated]
  
  %% Create History Record
  C2D --> C2D1[Create history entry]
  C2D1 --> C2D2[Set old rate value]
  C2D2 --> C2D3[Set new rate value]
  C2D3 --> C2D4[Set change reason]
  C2D4 --> C2D5[Set change timestamp]
  C2D5 --> C2D6[Save history record]
  C2D6 --> C2D7[History record created]
  
  %% Delete Exchange Rate
  C3 --> C3A[Find Exchange Rate]
  C3A --> C3B[Validate Deletion]
  C3B --> C3C[Create History Record]
  C3C --> C3D[Deactivate Exchange Rate]
  C3D --> C3E[Log Exchange Rate Deletion]
  C3E --> C3F[Exchange Rate Deleted]
  
  %% Find Exchange Rate
  C3A --> C3A1[Search by currency pair]
  C3A1 --> C3A2[Check active status]
  C3A2 --> C3A3[Validate existence]
  C3A3 --> C3A4[Exchange rate found]
  
  %% Validate Deletion
  C3B --> C3B1[Check if rate is in use]
  C3B1 --> C3B2[Check for dependencies]
  C3B2 --> C3B3[Validate deletion permissions]
  C3B3 --> C3B4[Deletion validated]
  
  %% Create History Record
  C3C --> C3C1[Create deletion history entry]
  C3C1 --> C3C2[Set deletion reason]
  C3C2 --> C3C3[Set deletion timestamp]
  C3C3 --> C3C4[Save deletion history]
  C3C4 --> C3C5[Deletion history created]
  
  %% Deactivate Exchange Rate
  C3D --> C3D1[Set isActive to false]
  C3D1 --> C3D2[Set deactivation timestamp]
  C3D2 --> C3D3[Save deactivated rate]
  C3D3 --> C3D4[Exchange rate deactivated]
  
  %% View Exchange Rates
  C4 --> C4A[Get Exchange Rates List]
  C4A --> C4B[Filter Exchange Rates]
  C4B --> C4C[Sort Exchange Rates]
  C4C --> C4D[Paginate Exchange Rates]
  C4D --> C4E[Format Exchange Rates]
  C4E --> C4F[Exchange Rates Viewed]
  
  %% Get Exchange Rates List
  C4A --> C4A1[Query active exchange rates]
  C4A1 --> C4A2[Include currency pairs]
  C4A2 --> C4A3[Include rate values]
  C4A3 --> C4A4[Include metadata]
  C4A4 --> C4A5[Exchange rates list retrieved]
  
  %% Filter Exchange Rates
  C4B --> C4B1[Filter by from currency]
  C4B1 --> C4B2[Filter by to currency]
  C4B2 --> C4B3[Filter by source]
  C4B3 --> C4B4[Filter by date range]
  C4B4 --> C4B5[Filter by active status]
  C4B5 --> C4B6[Exchange rates filtered]
  
  %% Sort Exchange Rates
  C4C --> C4C1[Sort by currency pair]
  C4C1 --> C4C2[Sort by rate value]
  C4C2 --> C4C3[Sort by effective date]
  C4C3 --> C4C4[Sort by last updated]
  C4C4 --> C4C5[Exchange rates sorted]
  
  %% Paginate Exchange Rates
  C4D --> C4D1[Set page size]
  C4D1 --> C4D2[Set page number]
  C4D2 --> C4D3[Calculate offset]
  C4D3 --> C4D4[Apply pagination]
  C4D4 --> C4D5[Exchange rates paginated]
  
  %% Format Exchange Rates
  C4E --> C4E1[Format currency pairs]
  C4E1 --> C4E2[Format rate values]
  C4E2 --> C4E3[Format dates]
  C4E3 --> C4E4[Format metadata]
  C4E4 --> C4E5[Exchange rates formatted]
  
  %% Manage Exchange Rate Status
  C5 --> C5A[Activate Exchange Rate]
  C5A --> C5B[Deactivate Exchange Rate]
  C5B --> C5C[Set Exchange Rate Priority]
  C5C --> C5D[Update Exchange Rate Metadata]
  C5D --> C5E[Exchange Rate Status Managed]
  
  %% Activate Exchange Rate
  C5A --> C5A1[Set isActive to true]
  C5A1 --> C5A2[Set activation timestamp]
  C5A2 --> C5A3[Update last updated by]
  C5A3 --> C5A4[Save activated rate]
  C5A4 --> C5A5[Exchange rate activated]
  
  %% Deactivate Exchange Rate
  C5B --> C5B1[Set isActive to false]
  C5B1 --> C5B2[Set deactivation timestamp]
  C5B2 --> C5B3[Update last updated by]
  C5B3 --> C5B4[Save deactivated rate]
  C5B4 --> C5B5[Exchange rate deactivated]
  
  %% Set Exchange Rate Priority
  C5C --> C5C1[Set priority level]
  C5C1 --> C5C2[Update priority timestamp]
  C5C2 --> C5C3[Save priority changes]
  C5C3 --> C5C4[Exchange rate priority set]
  
  %% Update Exchange Rate Metadata
  C5D --> C5D1[Update source information]
  C5D1 --> C5D2[Update API provider]
  C5D2 --> C5D3[Update notes]
  C5D3 --> C5D4[Update custom metadata]
  C5D4 --> C5D5[Exchange rate metadata updated]
  
  %% Currency Conversion System
  D --> D1[Simple Currency Conversion]
  D1 --> D2[Advanced Currency Conversion]
  D2 --> D3[Multi Currency Conversion]
  D3 --> D4[Bulk Currency Conversion]
  D4 --> D5[Currency Conversion Validation]
  D5 --> D6[Currency Conversion Complete]
  
  %% Simple Currency Conversion
  D1 --> D1A[Get Exchange Rate]
  D1A --> D1B[Calculate Conversion]
  D1B --> D1C[Apply Rounding]
  D1C --> D1D[Format Result]
  D1D --> D1E[Simple Conversion Complete]
  
  %% Get Exchange Rate
  D1A --> D1A1[Find exchange rate]
  D1A1 --> D1A2[Validate rate exists]
  D1A2 --> D1A3[Check rate validity]
  D1A3 --> D1A4[Get rate value]
  D1A4 --> D1A5[Exchange rate retrieved]
  
  %% Calculate Conversion
  D1B --> D1B1[Multiply amount by rate]
  D1B1 --> D1B2[Apply conversion formula]
  D1B2 --> D1B3[Calculate result]
  D1B3 --> D1B4[Conversion calculated]
  
  %% Apply Rounding
  D1C --> D1C1[Determine decimal places]
  D1C1 --> D1C2[Apply rounding rules]
  D1C2 --> D1C3[Round result]
  D1C3 --> D1C4[Result rounded]
  
  %% Format Result
  D1D --> D1D1[Format currency symbol]
  D1D1 --> D1D2[Format number]
  D1D2 --> D1D3[Format locale]
  D1D3 --> D1D4[Result formatted]
  
  %% Advanced Currency Conversion
  D2 --> D2A[Get Exchange Rate with Options]
  D2A --> D2B[Apply Rate Type]
  D2B --> D2C[Calculate Conversion with Fees]
  D2C --> D2D[Apply Advanced Rounding]
  D2D --> D2E[Format Advanced Result]
  D2E --> D2F[Advanced Conversion Complete]
  
  %% Get Exchange Rate with Options
  D2A --> D2A1[Get base exchange rate]
  D2A1 --> D2A2[Get buy rate if available]
  D2A2 --> D2A3[Get sell rate if available]
  D2A3 --> D2A4[Get spread if available]
  D2A4 --> D2A5[Exchange rate with options retrieved]
  
  %% Apply Rate Type
  D2B --> D2B1[Check rate type preference]
  D2B1 --> D2B2[Apply buy rate if requested]
  D2B2 --> D2B3[Apply sell rate if requested]
  D2B3 --> D2B4[Apply mid rate as default]
  D2B4 --> D2B5[Rate type applied]
  
  %% Calculate Conversion with Fees
  D2C --> D2C1[Calculate base conversion]
  D2C1 --> D2C2[Calculate fees if specified]
  D2C2 --> D2C3[Apply fee percentage if specified]
  D2C3 --> D2C4[Add fees to result]
  D2C4 --> D2C5[Conversion with fees calculated]
  
  %% Apply Advanced Rounding
  D2D --> D2D1[Check rounding options]
  D2D1 --> D2D2[Apply custom decimal places]
  D2D2 --> D2D3[Apply rounding rules]
  D2D3 --> D2D4[Round result and fees]
  D2D4 --> D2D5[Advanced rounding applied]
  
  %% Format Advanced Result
  D2E --> D2E1[Format currency symbols]
  D2E1 --> D2E2[Format numbers]
  D2E2 --> D2E3[Format fees]
  D2E3 --> D2E4[Format total amount]
  D2E4 --> D2E5[Advanced result formatted]
  
  %% Multi Currency Conversion
  D3 --> D3A[Get Base Currency Amount]
  D3A --> D3B[Get Multiple Exchange Rates]
  D3B --> D3C[Calculate Multiple Conversions]
  D3C --> D3D[Format Multiple Results]
  D3D --> D3E[Multi Currency Conversion Complete]
  
  %% Get Base Currency Amount
  D3A --> D3A1[Validate base currency]
  D3A1 --> D3A2[Validate base amount]
  D3A2 --> D3A3[Get base currency info]
  D3A3 --> D3A4[Base currency amount retrieved]
  
  %% Get Multiple Exchange Rates
  D3B --> D3B1[Get exchange rate for currency 1]
  D3B1 --> D3B2[Get exchange rate for currency 2]
  D3B2 --> D3B3[Get exchange rate for currency 3]
  D3B3 --> D3B4[Get exchange rate for currency N]
  D3B4 --> D3B5[Multiple exchange rates retrieved]
  
  %% Calculate Multiple Conversions
  D3C --> D3C1[Calculate conversion for currency 1]
  D3C1 --> D3C2[Calculate conversion for currency 2]
  D3C2 --> D3C3[Calculate conversion for currency 3]
  D3C3 --> D3C4[Calculate conversion for currency N]
  D3C4 --> D3C5[Multiple conversions calculated]
  
  %% Format Multiple Results
  D3D --> D3D1[Format result for currency 1]
  D3D1 --> D3D2[Format result for currency 2]
  D3D2 --> D3D3[Format result for currency 3]
  D3D3 --> D3D4[Format result for currency N]
  D3D4 --> D3D5[Multiple results formatted]
  
  %% Bulk Currency Conversion
  D4 --> D4A[Get Bulk Conversion Data]
  D4A --> D4B[Process Bulk Conversions]
  D4B --> D4C[Validate Bulk Results]
  D4C --> D4D[Format Bulk Results]
  D4D --> D4E[Bulk Currency Conversion Complete]
  
  %% Get Bulk Conversion Data
  D4A --> D4A1[Get bulk conversion requests]
  D4A1 --> D4A2[Validate bulk data]
  D4A2 --> D4A3[Group by currency pairs]
  D4A3 --> D4A4[Bulk conversion data retrieved]
  
  %% Process Bulk Conversions
  D4B --> D4B1[Process conversion batch 1]
  D4B1 --> D4B2[Process conversion batch 2]
  D4B2 --> D4B3[Process conversion batch 3]
  D4B3 --> D4B4[Process conversion batch N]
  D4B4 --> D4B5[Bulk conversions processed]
  
  %% Validate Bulk Results
  D4C --> D4C1[Validate result 1]
  D4C1 --> D4C2[Validate result 2]
  D4C2 --> D4C3[Validate result 3]
  D4C3 --> D4C4[Validate result N]
  D4C4 --> D4C5[Bulk results validated]
  
  %% Format Bulk Results
  D4D --> D4D1[Format bulk result 1]
  D4D1 --> D4D2[Format bulk result 2]
  D4D2 --> D4D3[Format bulk result 3]
  D4D3 --> D4D4[Format bulk result N]
  D4D4 --> D4D5[Bulk results formatted]
  
  %% Currency Conversion Validation
  D5 --> D5A[Validate Conversion Input]
  D5A --> D5B[Validate Exchange Rate]
  D5B --> D5C[Validate Conversion Result]
  D5C --> D5D[Validate Conversion Accuracy]
  D5D --> D5E[Currency Conversion Validated]
  
  %% Validate Conversion Input
  D5A --> D5A1[Validate from currency]
  D5A1 --> D5A2[Validate to currency]
  D5A2 --> D5A3[Validate amount]
  D5A3 --> D5A4[Validate options]
  D5A4 --> D5A5[Conversion input validated]
  
  %% Validate Exchange Rate
  D5B --> D5B1[Check rate exists]
  D5B1 --> D5B2[Check rate validity]
  D5B2 --> D5B3[Check rate accuracy]
  D5B3 --> D5B4[Exchange rate validated]
  
  %% Validate Conversion Result
  D5C --> D5C1[Check result accuracy]
  D5C1 --> D5C2[Check result format]
  D5C2 --> D5C3[Check result bounds]
  D5C3 --> D5C4[Conversion result validated]
  
  %% Validate Conversion Accuracy
  D5D --> D5D1[Check calculation accuracy]
  D5D1 --> D5D2[Check rounding accuracy]
  D5D2 --> D5D3[Check fee calculation]
  D5D3 --> D5D4[Conversion accuracy validated]
  
  %% Exchange Rates History System
  E --> E1[Track Exchange Rate Changes]
  E1 --> E2[Store Exchange Rate History]
  E2 --> E3[Query Exchange Rate History]
  E3 --> E4[Analyze Exchange Rate Trends]
  E4 --> E5[Generate Exchange Rate Reports]
  E5 --> E6[Exchange Rates History Complete]
  
  %% Track Exchange Rate Changes
  E1 --> E1A[Monitor Rate Changes]
  E1A --> E1B[Detect Rate Updates]
  E1B --> E1C[Capture Change Details]
  E1C --> E1D[Log Rate Changes]
  E1D --> E1E[Rate Changes Tracked]
  
  %% Monitor Rate Changes
  E1A --> E1A1[Monitor rate values]
  E1A1 --> E1A2[Monitor rate sources]
  E1A2 --> E1A3[Monitor rate metadata]
  E1A3 --> E1A4[Monitor rate status]
  E1A4 --> E1A5[Rate changes monitored]
  
  %% Detect Rate Updates
  E1B --> E1B1[Compare current vs previous]
  E1B1 --> E1B2[Detect value changes]
  E1B2 --> E1B3[Detect source changes]
  E1B3 --> E1B4[Detect metadata changes]
  E1B4 --> E1B5[Rate updates detected]
  
  %% Capture Change Details
  E1C --> E1C1[Capture old values]
  E1C1 --> E1C2[Capture new values]
  E1C2 --> E1C3[Capture change reason]
  E1C3 --> E1C4[Capture change timestamp]
  E1C4 --> E1C5[Change details captured]
  
  %% Log Rate Changes
  E1D --> E1D1[Create history entry]
  E1D1 --> E1D2[Set change details]
  E1D2 --> E1D3[Set change metadata]
  E1D3 --> E1D4[Save history entry]
  E1D4 --> E1D5[Rate changes logged]
  
  %% Store Exchange Rate History
  E2 --> E2A[Create History Record]
  E2A --> E2B[Store History Data]
  E2B --> E2C[Index History Data]
  E2C --> E2D[Validate History Data]
  E2D --> E2E[Exchange Rate History Stored]
  
  %% Create History Record
  E2A --> E2A1[Create history entry]
  E2A1 --> E2A2[Set currency pair]
  E2A2 --> E2A3[Set old rate value]
  E2A3 --> E2A4[Set new rate value]
  E2A4 --> E2A5[Set change timestamp]
  E2A5 --> E2A6[Set change reason]
  E2A6 --> E2A7[Set change metadata]
  E2A7 --> E2A8[History record created]
  
  %% Store History Data
  E2B --> E2B1[Save to history database]
  E2B1 --> E2B2[Set history timestamps]
  E2B2 --> E2B3[Set history metadata]
  E2B3 --> E2B4[History data stored]
  
  %% Index History Data
  E2C --> E2C1[Index by currency pair]
  E2C1 --> E2C2[Index by timestamp]
  E2C2 --> E2C3[Index by change type]
  E2C3 --> E2C4[Index by change reason]
  E2C4 --> E2C5[History data indexed]
  
  %% Validate History Data
  E2D --> E2D1[Validate history entry]
  E2D1 --> E2D2[Validate timestamps]
  E2D2 --> E2D3[Validate rate values]
  E2D3 --> E2D4[Validate metadata]
  E2D4 --> E2D5[History data validated]
  
  %% Query Exchange Rate History
  E3 --> E3A[Set History Query Parameters]
  E3A --> E3B[Execute History Query]
  E3B --> E3C[Filter History Results]
  E3C --> E3D[Sort History Results]
  E3D --> E3E[Paginate History Results]
  E3E --> E3F[Exchange Rate History Queried]
  
  %% Set History Query Parameters
  E3A --> E3A1[Set currency pair filter]
  E3A1 --> E3A2[Set date range filter]
  E3A2 --> E3A3[Set change type filter]
  E3A3 --> E3A4[Set change reason filter]
  E3A4 --> E3A5[Set sorting parameters]
  E3A5 --> E3A6[Set pagination parameters]
  E3A6 --> E3A7[History query parameters set]
  
  %% Execute History Query
  E3B --> E3B1[Query history database]
  E3B1 --> E3B2[Apply filters]
  E3B2 --> E3B3[Apply sorting]
  E3B3 --> E3B4[Apply pagination]
  E3B4 --> E3B5[History query executed]
  
  %% Filter History Results
  E3C --> E3C1[Filter by currency pair]
  E3C1 --> E3C2[Filter by date range]
  E3C2 --> E3C3[Filter by change type]
  E3C3 --> E3C4[Filter by change reason]
  E3C4 --> E3C5[History results filtered]
  
  %% Sort History Results
  E3D --> E3D1[Sort by timestamp]
  E3D1 --> E3D2[Sort by currency pair]
  E3D2 --> E3D3[Sort by change type]
  E3D3 --> E3D4[Sort by change reason]
  E3D4 --> E3D5[History results sorted]
  
  %% Paginate History Results
  E3E --> E3E1[Set page size]
  E3E1 --> E3E2[Set page number]
  E3E2 --> E3E3[Calculate offset]
  E3E3 --> E3E4[Apply pagination]
  E3E4 --> E3E5[History results paginated]
  
  %% Analyze Exchange Rate Trends
  E4 --> E4A[Calculate Rate Trends]
  E4A --> E4B[Identify Rate Patterns]
  E4B --> E4C[Detect Rate Anomalies]
  E4C --> E4D[Generate Rate Insights]
  E4D --> E4E[Exchange Rate Trends Analyzed]
  
  %% Calculate Rate Trends
  E4A --> E4A1[Calculate rate changes]
  E4A1 --> E4A2[Calculate rate volatility]
  E4A2 --> E4A3[Calculate rate averages]
  E4A3 --> E4A4[Calculate rate ranges]
  E4A4 --> E4A5[Rate trends calculated]
  
  %% Identify Rate Patterns
  E4B --> E4B1[Identify seasonal patterns]
  E4B1 --> E4B2[Identify cyclical patterns]
  E4B2 --> E4B3[Identify trend patterns]
  E4B3 --> E4B4[Identify correlation patterns]
  E4B4 --> E4B5[Rate patterns identified]
  
  %% Detect Rate Anomalies
  E4C --> E4C1[Detect unusual changes]
  E4C1 --> E4C2[Detect extreme values]
  E4C2 --> E4C3[Detect unexpected patterns]
  E4C3 --> E4C4[Detect data quality issues]
  E4C4 --> E4C5[Rate anomalies detected]
  
  %% Generate Rate Insights
  E4D --> E4D1[Generate trend insights]
  E4D1 --> E4D2[Generate pattern insights]
  E4D2 --> E4D3[Generate anomaly insights]
  E4D3 --> E4D4[Generate recommendation insights]
  E4D4 --> E4D5[Rate insights generated]
  
  %% Generate Exchange Rate Reports
  E5 --> E5A[Create Rate History Report]
  E5A --> E5B[Create Rate Trend Report]
  E5B --> E5C[Create Rate Analysis Report]
  E5C --> E5D[Create Rate Summary Report]
  E5D --> E5E[Exchange Rate Reports Generated]
  
  %% Create Rate History Report
  E5A --> E5A1[Compile history data]
  E5A1 --> E5A2[Format history table]
  E5A2 --> E5A3[Add history charts]
  E5A3 --> E5A4[Add history insights]
  E5A4 --> E5A5[Rate history report created]
  
  %% Create Rate Trend Report
  E5B --> E5B1[Compile trend data]
  E5B1 --> E5B2[Format trend charts]
  E5B2 --> E5B3[Add trend analysis]
  E5B3 --> E5B4[Add trend predictions]
  E5B4 --> E5B5[Rate trend report created]
  
  %% Create Rate Analysis Report
  E5C --> E5C1[Compile analysis data]
  E5C1 --> E5C2[Format analysis tables]
  E5C2 --> E5C3[Add analysis charts]
  E5C3 --> E5C4[Add analysis insights]
  E5C4 --> E5C5[Rate analysis report created]
  
  %% Create Rate Summary Report
  E5D --> E5D1[Compile summary data]
  E5D1 --> E5D2[Format summary tables]
  E5D2 --> E5D3[Add summary charts]
  E5D3 --> E5D4[Add summary insights]
  E5D4 --> E5D5[Rate summary report created]
  
  %% Exchange Rates Analytics System
  F --> F1[Collect Exchange Rate Data]
  F1 --> F2[Analyze Exchange Rate Performance]
  F2 --> F3[Generate Exchange Rate Insights]
  F3 --> F4[Create Exchange Rate Reports]
  F4 --> F5[Optimize Exchange Rate Strategy]
  F5 --> F6[Exchange Rates Analytics Complete]
  
  %% Collect Exchange Rate Data
  F1 --> F1A[Gather Current Rates]
  F1A --> F1B[Gather Historical Rates]
  F1B --> F1C[Gather Rate Sources]
  F1C --> F1D[Gather Rate Metadata]
  F1D --> F1E[Exchange Rate Data Collected]
  
  %% Gather Current Rates
  F1A --> F1A1[Get active exchange rates]
  F1A1 --> F1A2[Get rate values]
  F1A2 --> F1A3[Get rate sources]
  F1A3 --> F1A4[Get rate timestamps]
  F1A4 --> F1A5[Current rates gathered]
  
  %% Gather Historical Rates
  F1B --> F1B1[Get historical rate data]
  F1B1 --> F1B2[Get rate change history]
  F1B2 --> F1B3[Get rate trend data]
  F1B3 --> F1B4[Get rate pattern data]
  F1B4 --> F1B5[Historical rates gathered]
  
  %% Gather Rate Sources
  F1C --> F1C1[Get manual rate sources]
  F1C1 --> F1C2[Get automatic rate sources]
  F1C2 --> F1C3[Get API rate sources]
  F1C3 --> F1C4[Get rate source metadata]
  F1C4 --> F1C5[Rate sources gathered]
  
  %% Gather Rate Metadata
  F1D --> F1D1[Get rate accuracy data]
  F1D1 --> F1D2[Get rate reliability data]
  F1D2 --> F1D3[Get rate update frequency]
  F1D3 --> F1D4[Get rate validation data]
  F1D4 --> F1D5[Rate metadata gathered]
  
  %% Analyze Exchange Rate Performance
  F2 --> F2A[Analyze Rate Accuracy]
  F2A --> F2B[Analyze Rate Reliability]
  F2B --> F2C[Analyze Rate Volatility]
  F2C --> F2D[Analyze Rate Trends]
  F2D --> F2E[Exchange Rate Performance Analyzed]
  
  %% Analyze Rate Accuracy
  F2A --> F2A1[Compare with market rates]
  F2A1 --> F2A2[Calculate accuracy metrics]
  F2A2 --> F2A3[Identify accuracy issues]
  F2A3 --> F2A4[Rate accuracy analyzed]
  
  %% Analyze Rate Reliability
  F2B --> F2B1[Check rate consistency]
  F2B1 --> F2B2[Check rate availability]
  F2B2 --> F2B3[Check rate update frequency]
  F2B3 --> F2B4[Rate reliability analyzed]
  
  %% Analyze Rate Volatility
  F2C --> F2C1[Calculate rate changes]
  F2C1 --> F2C2[Calculate rate volatility]
  F2C2 --> F2C3[Identify volatile periods]
  F2C3 --> F2C4[Rate volatility analyzed]
  
  %% Analyze Rate Trends
  F2D --> F2D1[Identify trend direction]
  F2D1 --> F2D2[Calculate trend strength]
  F2D2 --> F2D3[Identify trend patterns]
  F2D3 --> F2D4[Rate trends analyzed]
  
  %% Generate Exchange Rate Insights
  F3 --> F3A[Generate Accuracy Insights]
  F3A --> F3B[Generate Reliability Insights]
  F3B --> F3C[Generate Volatility Insights]
  F3C --> F3D[Generate Trend Insights]
  F3D --> F3E[Exchange Rate Insights Generated]
  
  %% Generate Accuracy Insights
  F3A --> F3A1[Identify accuracy patterns]
  F3A1 --> F3A2[Identify accuracy issues]
  F3A2 --> F3A3[Generate accuracy recommendations]
  F3A3 --> F3A4[Accuracy insights generated]
  
  %% Generate Reliability Insights
  F3B --> F3B1[Identify reliability patterns]
  F3B1 --> F3B2[Identify reliability issues]
  F3B2 --> F3B3[Generate reliability recommendations]
  F3B3 --> F3B4[Reliability insights generated]
  
  %% Generate Volatility Insights
  F3C --> F3C1[Identify volatility patterns]
  F3C1 --> F3C2[Identify volatility causes]
  F3C2 --> F3C3[Generate volatility recommendations]
  F3C3 --> F3C4[Volatility insights generated]
  
  %% Generate Trend Insights
  F3D --> F3D1[Identify trend patterns]
  F3D1 --> F3D2[Identify trend causes]
  F3D2 --> F3D3[Generate trend predictions]
  F3D3 --> F3D4[Trend insights generated]
  
  %% Create Exchange Rate Reports
  F4 --> F4A[Create Performance Report]
  F4A --> F4B[Create Accuracy Report]
  F4B --> F4C[Create Reliability Report]
  F4C --> F4D[Create Trend Report]
  F4D --> F4E[Exchange Rate Reports Created]
  
  %% Create Performance Report
  F4A --> F4A1[Compile performance data]
  F4A1 --> F4A2[Format performance tables]
  F4A2 --> F4A3[Add performance charts]
  F4A3 --> F4A4[Add performance insights]
  F4A4 --> F4A5[Performance report created]
  
  %% Create Accuracy Report
  F4B --> F4B1[Compile accuracy data]
  F4B1 --> F4B2[Format accuracy tables]
  F4B2 --> F4B3[Add accuracy charts]
  F4B3 --> F4B4[Add accuracy insights]
  F4B4 --> F4B5[Accuracy report created]
  
  %% Create Reliability Report
  F4C --> F4C1[Compile reliability data]
  F4C1 --> F4C2[Format reliability tables]
  F4C2 --> F4C3[Add reliability charts]
  F4C3 --> F4C4[Add reliability insights]
  F4C4 --> F4C5[Reliability report created]
  
  %% Create Trend Report
  F4D --> F4D1[Compile trend data]
  F4D1 --> F4D2[Format trend tables]
  F4D2 --> F4D3[Add trend charts]
  F4D3 --> F4D4[Add trend insights]
  F4D4 --> F4D5[Trend report created]
  
  %% Optimize Exchange Rate Strategy
  F5 --> F5A[Identify Optimization Opportunities]
  F5A --> F5B[Implement Optimization Changes]
  F5B --> F5C[Monitor Optimization Impact]
  F5C --> F5D[Adjust Optimization Strategy]
  F5D --> F5E[Exchange Rate Strategy Optimized]
  
  %% Identify Optimization Opportunities
  F5A --> F5A1[Analyze current performance]
  F5A1 --> F5A2[Identify improvement areas]
  F5A2 --> F5A3[Prioritize optimization opportunities]
  F5A3 --> F5A4[Create optimization plan]
  F5A4 --> F5A5[Optimization opportunities identified]
  
  %% Implement Optimization Changes
  F5B --> F5B1[Implement rate source optimization]
  F5B1 --> F5B2[Implement rate update optimization]
  F5B2 --> F5B3[Implement rate validation optimization]
  F5B3 --> F5B4[Implement rate accuracy optimization]
  F5B4 --> F5B5[Optimization changes implemented]
  
  %% Monitor Optimization Impact
  F5C --> F5C1[Track optimization metrics]
  F5C1 --> F5C2[Analyze optimization results]
  F5C2 --> F5C3[Identify optimization issues]
  F5C3 --> F5C4[Generate optimization insights]
  F5C4 --> F5C5[Optimization impact monitored]
  
  %% Adjust Optimization Strategy
  F5D --> F5D1[Analyze optimization performance]
  F5D1 --> F5D2[Identify adjustment opportunities]
  F5D2 --> F5D3[Implement adjustment changes]
  F5D3 --> F5D4[Monitor adjustment impact]
  F5D4 --> F5D5[Optimization strategy adjusted]
  
  %% Exchange Rates Automation System
  G --> G1[Configure Automation Rules]
  G1 --> G2[Monitor External Sources]
  G2 --> G3[Update Exchange Rates Automatically]
  G3 --> G4[Validate Automated Updates]
  G4 --> G5[Notify Stakeholders]
  G5 --> G6[Exchange Rates Automation Complete]
  
  %% Configure Automation Rules
  G1 --> G1A[Set Automation Parameters]
  G1A --> G1B[Configure Update Frequency]
  G1B --> G1C[Set Validation Rules]
  G1C --> G1D[Configure Notification Settings]
  G1D --> G1E[Automation Rules Configured]
  
  %% Set Automation Parameters
  G1A --> G1A1[Set currency pairs to monitor]
  G1A1 --> G1A2[Set rate change thresholds]
  G1A2 --> G1A3[Set update triggers]
  G1A3 --> G1A4[Set validation criteria]
  G1A4 --> G1A5[Automation parameters set]
  
  %% Configure Update Frequency
  G1B --> G1B1[Set hourly updates]
  G1B1 --> G1B2[Set daily updates]
  G1B2 --> G1B3[Set weekly updates]
  G1B3 --> G1B4[Set custom update schedules]
  G1B4 --> G1B5[Update frequency configured]
  
  %% Set Validation Rules
  G1C --> G1C1[Set rate change limits]
  G1C1 --> G1C2[Set rate accuracy requirements]
  G1C2 --> G1C3[Set rate reliability requirements]
  G1C3 --> G1C4[Set rate source requirements]
  G1C4 --> G1C5[Validation rules set]
  
  %% Configure Notification Settings
  G1D --> G1D1[Set notification recipients]
  G1D1 --> G1D2[Set notification triggers]
  G1D2 --> G1D3[Set notification channels]
  G1D3 --> G1D4[Set notification frequency]
  G1D4 --> G1D5[Notification settings configured]
  
  %% Monitor External Sources
  G2 --> G2A[Connect to External APIs]
  G2A --> G2B[Monitor Rate Changes]
  G2B --> G2C[Detect Significant Changes]
  G2C --> G2D[Validate External Data]
  G2D --> G2E[External Sources Monitored]
  
  %% Connect to External APIs
  G2A --> G2A1[Connect to Fixer.io API]
  G2A1 --> G2A2[Connect to CurrencyLayer API]
  G2A2 --> G2A3[Connect to ExchangeRate-API]
  G2A3 --> G2A4[Connect to custom APIs]
  G2A4 --> G2A5[External APIs connected]
  
  %% Monitor Rate Changes
  G2B --> G2B1[Monitor USD to YER rate]
  G2B1 --> G2B2[Monitor USD to SAR rate]
  G2B2 --> G2B3[Monitor YER to SAR rate]
  G2B3 --> G2B4[Monitor other currency pairs]
  G2B4 --> G2B5[Rate changes monitored]
  
  %% Detect Significant Changes
  G2C --> G2C1[Compare with current rates]
  G2C1 --> G2C2[Calculate change percentage]
  G2C2 --> G2C3[Check against thresholds]
  G2C3 --> G2C4[Identify significant changes]
  G2C4 --> G2C5[Significant changes detected]
  
  %% Validate External Data
  G2D --> G2D1[Validate rate accuracy]
  G2D1 --> G2D2[Validate rate format]
  G2D2 --> G2D3[Validate rate timestamps]
  G2D3 --> G2D4[Validate rate sources]
  G2D4 --> G2D5[External data validated]
  
  %% Update Exchange Rates Automatically
  G3 --> G3A[Process Rate Updates]
  G3A --> G3B[Apply Update Rules]
  G3B --> G3C[Update Exchange Rate Records]
  G3C --> G3D[Create Update History]
  G3D --> G3E[Exchange Rates Updated Automatically]
  
  %% Process Rate Updates
  G3A --> G3A1[Process USD to YER update]
  G3A1 --> G3A2[Process USD to SAR update]
  G3A2 --> G3A3[Process YER to SAR update]
  G3A3 --> G3A4[Process other currency updates]
  G3A4 --> G3A5[Rate updates processed]
  
  %% Apply Update Rules
  G3B --> G3B1[Check update frequency rules]
  G3B1 --> G3B2[Check change threshold rules]
  G3B2 --> G3B3[Check validation rules]
  G3B3 --> G3B4[Check notification rules]
  G3B4 --> G3B5[Update rules applied]
  
  %% Update Exchange Rate Records
  G3C --> G3C1[Update rate values]
  G3C1 --> G3C2[Update rate sources]
  G3C2 --> G3C3[Update rate timestamps]
  G3C3 --> G3C4[Update rate metadata]
  G3C4 --> G3C5[Exchange rate records updated]
  
  %% Create Update History
  G3D --> G3D1[Create update history entry]
  G3D1 --> G3D2[Set update details]
  G3D2 --> G3D3[Set update source]
  G3D3 --> G3D4[Set update timestamp]
  G3D4 --> G3D5[Update history created]
  
  %% Validate Automated Updates
  G4 --> G4A[Validate Update Accuracy]
  G4A --> G4B[Validate Update Consistency]
  G4B --> G4C[Validate Update Completeness]
  G4C --> G4D[Validate Update Timeliness]
  G4D --> G4E[Automated Updates Validated]
  
  %% Validate Update Accuracy
  G4A --> G4A1[Check rate calculation accuracy]
  G4A1 --> G4A2[Check rate source accuracy]
  G4A2 --> G4A3[Check rate format accuracy]
  G4A3 --> G4A4[Update accuracy validated]
  
  %% Validate Update Consistency
  G4B --> G4B1[Check rate consistency across sources]
  G4B1 --> G4B2[Check rate consistency over time]
  G4B2 --> G4B3[Check rate consistency across currencies]
  G4B3 --> G4B4[Update consistency validated]
  
  %% Validate Update Completeness
  G4C --> G4C1[Check all required rates updated]
  G4C1 --> G4C2[Check all required metadata updated]
  G4C2 --> G4C3[Check all required history created]
  G4C3 --> G4C4[Update completeness validated]
  
  %% Validate Update Timeliness
  G4D --> G4D1[Check update frequency compliance]
  G4D1 --> G4D2[Check update delay limits]
  G4D2 --> G4D3[Check update schedule compliance]
  G4D3 --> G4D4[Update timeliness validated]
  
  %% Notify Stakeholders
  G5 --> G5A[Identify Notification Recipients]
  G5A --> G5B[Prepare Notification Content]
  G5B --> G5C[Send Notifications]
  G5C --> G5D[Track Notification Delivery]
  G5D --> G5E[Stakeholders Notified]
  
  %% Identify Notification Recipients
  G5A --> G5A1[Identify admin recipients]
  G5A1 --> G5A2[Identify finance recipients]
  G5A2 --> G5A3[Identify operations recipients]
  G5A3 --> G5A4[Identify custom recipients]
  G5A4 --> G5A5[Notification recipients identified]
  
  %% Prepare Notification Content
  G5B --> G5B1[Prepare rate change summary]
  G5B1 --> G5B2[Prepare rate change details]
  G5B2 --> G5B3[Prepare rate change impact]
  G5B3 --> G5B4[Prepare rate change recommendations]
  G5B4 --> G5B5[Notification content prepared]
  
  %% Send Notifications
  G5C --> G5C1[Send email notifications]
  G5C1 --> G5C2[Send SMS notifications]
  G5C2 --> G5C3[Send push notifications]
  G5C3 --> G5C4[Send dashboard notifications]
  G5C4 --> G5C5[Notifications sent]
  
  %% Track Notification Delivery
  G5D --> G5D1[Track email delivery]
  G5D1 --> G5D2[Track SMS delivery]
  G5D2 --> G5D3[Track push delivery]
  G5D3 --> G5D4[Track dashboard delivery]
  G5D4 --> G5D5[Notification delivery tracked]
  
  %% Exchange Rates Administration System
  H --> H1[Manage Exchange Rate Sources]
  H1 --> H2[Configure Exchange Rate Settings]
  H2 --> H3[Monitor Exchange Rate Performance]
  H3 --> H4[Generate Exchange Rate Reports]
  H4 --> H5[Manage Exchange Rate Users]
  H5 --> H6[Exchange Rates Administration Complete]
  
  %% Manage Exchange Rate Sources
  H1 --> H1A[Add Exchange Rate Sources]
  H1A --> H1B[Update Exchange Rate Sources]
  H1B --> H1C[Remove Exchange Rate Sources]
  H1C --> H1D[Configure Source Settings]
  H1D --> H1E[Exchange Rate Sources Managed]
  
  %% Add Exchange Rate Sources
  H1A --> H1A1[Add manual sources]
  H1A1 --> H1A2[Add automatic sources]
  H1A2 --> H1A3[Add API sources]
  H1A3 --> H1A4[Add custom sources]
  H1A4 --> H1A5[Exchange rate sources added]
  
  %% Update Exchange Rate Sources
  H1B --> H1B1[Update source configurations]
  H1B1 --> H1B2[Update source credentials]
  H1B2 --> H1B3[Update source settings]
  H1B3 --> H1B4[Update source metadata]
  H1B4 --> H1B5[Exchange rate sources updated]
  
  %% Remove Exchange Rate Sources
  H1C --> H1C1[Remove inactive sources]
  H1C1 --> H1C2[Remove unreliable sources]
  H1C2 --> H1C3[Remove outdated sources]
  H1C3 --> H1C4[Remove custom sources]
  H1C4 --> H1C5[Exchange rate sources removed]
  
  %% Configure Source Settings
  H1D --> H1D1[Configure source priorities]
  H1D1 --> H1D2[Configure source validation]
  H1D2 --> H1D3[Configure source monitoring]
  H1D3 --> H1D4[Configure source notifications]
  H1D4 --> H1D5[Source settings configured]
  
  %% Configure Exchange Rate Settings
  H2 --> H2A[Set Default Exchange Rates]
  H2A --> H2B[Configure Rate Update Rules]
  H2B --> H2C[Set Rate Validation Rules]
  H2C --> H2D[Configure Rate Notifications]
  H2D --> H2E[Exchange Rate Settings Configured]
  
  %% Set Default Exchange Rates
  H2A --> H2A1[Set default USD to YER rate]
  H2A1 --> H2A2[Set default USD to SAR rate]
  H2A2 --> H2A3[Set default YER to SAR rate]
  H2A3 --> H2A4[Set default other rates]
  H2A4 --> H2A5[Default exchange rates set]
  
  %% Configure Rate Update Rules
  H2B --> H2B1[Set update frequency rules]
  H2B1 --> H2B2[Set change threshold rules]
  H2B2 --> H2B3[Set validation rules]
  H2B3 --> H2B4[Set notification rules]
  H2B4 --> H2B5[Rate update rules configured]
  
  %% Set Rate Validation Rules
  H2C --> H2C1[Set rate accuracy rules]
  H2C1 --> H2C2[Set rate consistency rules]
  H2C2 --> H2C3[Set rate completeness rules]
  H2C3 --> H2C4[Set rate timeliness rules]
  H2C4 --> H2C5[Rate validation rules set]
  
  %% Configure Rate Notifications
  H2D --> H2D1[Set notification triggers]
  H2D1 --> H2D2[Set notification recipients]
  H2D2 --> H2D3[Set notification channels]
  H2D3 --> H2D4[Set notification frequency]
  H2D4 --> H2D5[Rate notifications configured]
  
  %% Monitor Exchange Rate Performance
  H3 --> H3A[Track Rate Accuracy]
  H3A --> H3B[Track Rate Reliability]
  H3B --> H3C[Track Rate Volatility]
  H3C --> H3D[Track Rate Trends]
  H3D --> H3E[Exchange Rate Performance Monitored]
  
  %% Track Rate Accuracy
  H3A --> H3A1[Monitor rate accuracy metrics]
  H3A1 --> H3A2[Track accuracy trends]
  H3A2 --> H3A3[Identify accuracy issues]
  H3A3 --> H3A4[Rate accuracy tracked]
  
  %% Track Rate Reliability
  H3B --> H3B1[Monitor rate availability]
  H3B1 --> H3B2[Track rate consistency]
  H3B2 --> H3B3[Identify reliability issues]
  H3B3 --> H3B4[Rate reliability tracked]
  
  %% Track Rate Volatility
  H3C --> H3C1[Monitor rate changes]
  H3C1 --> H3C2[Track rate volatility]
  H3C2 --> H3C3[Identify volatile periods]
  H3C3 --> H3C4[Rate volatility tracked]
  
  %% Track Rate Trends
  H3D --> H3D1[Monitor rate trends]
  H3D1 --> H3D2[Track trend direction]
  H3D2 --> H3D3[Identify trend patterns]
  H3D3 --> H3D4[Rate trends tracked]
  
  %% Generate Exchange Rate Reports
  H4 --> H4A[Create Performance Report]
  H4A --> H4B[Create Accuracy Report]
  H4B --> H4C[Create Reliability Report]
  H4C --> H4D[Create Trend Report]
  H4D --> H4E[Exchange Rate Reports Generated]
  
  %% Create Performance Report
  H4A --> H4A1[Compile performance data]
  H4A1 --> H4A2[Format performance tables]
  H4A2 --> H4A3[Add performance charts]
  H4A3 --> H4A4[Add performance insights]
  H4A4 --> H4A5[Performance report created]
  
  %% Create Accuracy Report
  H4B --> H4B1[Compile accuracy data]
  H4B1 --> H4B2[Format accuracy tables]
  H4B2 --> H4B3[Add accuracy charts]
  H4B3 --> H4B4[Add accuracy insights]
  H4B4 --> H4B5[Accuracy report created]
  
  %% Create Reliability Report
  H4C --> H4C1[Compile reliability data]
  H4C1 --> H4C2[Format reliability tables]
  H4C2 --> H4C3[Add reliability charts]
  H4C3 --> H4C4[Add reliability insights]
  H4C4 --> H4C5[Reliability report created]
  
  %% Create Trend Report
  H4D --> H4D1[Compile trend data]
  H4D1 --> H4D2[Format trend tables]
  H4D2 --> H4D3[Add trend charts]
  H4D3 --> H4D4[Add trend insights]
  H4D4 --> H4D5[Trend report created]
  
  %% Manage Exchange Rate Users
  H5 --> H5A[Manage User Permissions]
  H5A --> H5B[Manage User Access]
  H5B --> H5C[Manage User Notifications]
  H5C --> H5D[Manage User Preferences]
  H5D --> H5E[Exchange Rate Users Managed]
  
  %% Manage User Permissions
  H5A --> H5A1[Set admin permissions]
  H5A1 --> H5A2[Set finance permissions]
  H5A2 --> H5A3[Set operations permissions]
  H5A3 --> H5A4[Set custom permissions]
  H5A4 --> H5A5[User permissions managed]
  
  %% Manage User Access
  H5B --> H5B1[Grant access to users]
  H5B1 --> H5B2[Revoke access from users]
  H5B2 --> H5B3[Modify user access levels]
  H5B3 --> H5B4[Monitor user access]
  H5B4 --> H5B5[User access managed]
  
  %% Manage User Notifications
  H5C --> H5C1[Configure user notifications]
  H5C1 --> H5C2[Set notification preferences]
  H5C2 --> H5C3[Manage notification channels]
  H5C3 --> H5C4[Monitor notification delivery]
  H5C4 --> H5C5[User notifications managed]
  
  %% Manage User Preferences
  H5D --> H5D1[Set user currency preferences]
  H5D1 --> H5D2[Set user display preferences]
  H5D2 --> H5D3[Set user notification preferences]
  H5D3 --> H5D4[Set user access preferences]
  H5D4 --> H5D5[User preferences managed]
  
  %% End points
  C6 --> Z[Exchange Rates System Complete]
  D6 --> Z
  E6 --> Z
  F6 --> Z
  G6 --> Z
  H6 --> Z
