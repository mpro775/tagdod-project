%% Product Management Overview Flow
%% View at https://mermaid.live
flowchart TD
  A[إدارة المنتجات] --> B{نوع العملية?}
  B -->|إنشاء| C[إنشاء منتج جديد]
  B -->|عرض| D[عرض المنتجات]
  B -->|تعديل| E[تعديل منتج]
  B -->|حذف| F[حذف منتج]
  B -->|إدارة تنويعات| G[إدارة التنويعات]
  B -->|إدارة مخزون| H[إدارة المخزون]

  %% Create Product Flow
  C --> C1[إدخال البيانات الأساسية]
  C1 --> C2[اختيار التصنيف والعلامة التجارية]
  C2 --> C3[تحديد السمات المستخدمة]
  C3 --> C4[إضافة الوسائط]
  C4 --> C5[حفظ كمسودة]

  C5 --> C6{هل جاهز للنشر?}
  C6 -->|نعم| C7[تغيير الحالة إلى ACTIVE]
  C6 -->|لا| C8[البقاء كمسودة]

  %% Display Products Flow
  D --> D1[قائمة المنتجات مع فلترة]
  D1 --> D2[عرض تفاصيل المنتج]
  D2 --> D3[عرض التنويعات المتاحة]

  %% Edit Product Flow
  E --> E1[تحميل بيانات المنتج]
  E1 --> E2[إجراء التعديلات المطلوبة]
  E2 --> E3[حفظ التغييرات]

  %% Delete Product Flow
  F --> F1[حذف ناعم]
  F1 --> F2[تحديث deletedAt]
  F2 --> F3[إخفاء من الكتالوج]

  %% Variants Management
  G --> G1[إضافة تنويعة جديدة]
  G1 --> G2[تحديد تركيبة السمات]
  G2 --> G3[تحديد السعر والمخزون]
  G3 --> G4[حفظ التنويعة]

  %% Inventory Management
  H --> H1[تحديث كميات المخزون]
  H1 --> H2[تحديث إعدادات التتبع]
  H2 --> H3[فحص التنبيهات]

  %% Product States
  I[حالات المنتج] --> I1[DRAFT - مسودة]
  I1 --> I2[ACTIVE - نشط]
  I2 --> I3[ARCHIVED - مؤرشف]

  %% Integration Points
  J[التكامل مع الأنظمة الأخرى] --> J1[نظام الوسائط]
  J1 --> J2[نظام السمات]
  J2 --> J3[نظام التصنيفات]
  J3 --> J4[نظام العلامات التجارية]

  %% End points
  C7 --> K[نهاية - منتج نشط]
  C8 --> K
  D3 --> K
  E3 --> K
  F3 --> K
  G4 --> K
  H3 --> K
