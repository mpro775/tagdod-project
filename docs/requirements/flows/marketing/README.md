# تدفقات نظام التسويق (Marketing Flows)

## الملفات المتاحة

### المخططات الرئيسية
- `marketing-overview.mmd` - نظرة عامة على نظام التسويق
- `price-rules-management.mmd` - مخطط إدارة قواعد الأسعار
- `coupons-management.mmd` - مخطط إدارة الكوبونات
- `banners-management.mmd` - مخطط إدارة البانرات

## شرح التدفقات

### 1. إدارة قواعد الأسعار (Price Rules Management)
- **إنشاء القواعد:** إنشاء قواعد أسعار جديدة مع شروط محددة
- **الشروط المرنة:** قواعد قابلة للتطبيق حسب التصنيف، المنتج، التنويع، العلامة التجارية
- **التأثيرات المتعددة:** دعم خصومات النسبة المئوية، الخصومات الثابتة، الأسعار الخاصة
- **حدود الاستخدام:** التحكم في الحد الأقصى للاستخدام لكل قاعدة ولكل مستخدم
- **نظام الأولوية:** تطبيق القواعد حسب ترتيب الأولوية
- **الإحصائيات:** تتبع المشاهدات، التطبيقات، الإيرادات، والمدخرات

### 2. إدارة الكوبونات (Coupons Management)
- **أنواع الكوبونات:** نسبة مئوية، مبلغ ثابت، شحن مجاني، اشترِ X واحصل على Y
- **الاستهداف المرن:** تطبيق على جميع المنتجات أو منتجات محددة أو تصنيفات أو علامات تجارية
- **حدود الاستخدام:** حدود عالمية وحدود لكل مستخدم
- **قيود المستخدم:** تضمين أو استبعاد مستخدمين محددين
- **نظام التحقق:** التحقق من صحة الكوبونات في الوقت الفعلي
- **الإحصائيات:** تتبع الاسترداد، الخصومات المطبقة، والإيرادات

### 3. إدارة البانرات (Banners Management)
- **مواقع متعددة:** الصفحة الرئيسية، صفحات التصنيف، صفحات المنتج، الشريط الجانبي
- **أنواع الترويج:** خصم، شحن مجاني، وصول جديد، مبيعات، موسمي
- **الاستهداف:** استهداف التصنيف والمنتجات المحددة
- **الجدولة:** تواريخ البداية والنهاية
- **الإحصائيات:** تتبع المشاهدات والنقرات والتحويلات
- **الترتيب:** ترتيب مخصص لعرض البانرات

### 4. حساب الأسعار (Pricing Calculation)
- **حساب الأسعار الفعالة:** حساب الأسعار النهائية بعد تطبيق قواعد التسعير
- **معاينة الأسعار:** معاينة تأثير قواعد التسعير على الأسعار
- **التحقق من صحة الكوبونات:** التحقق من صحة وصلاحية الكوبونات

## المكونات الرئيسية

### 1. قواعد الأسعار (Price Rules)
- **الشروط:** التصنيف، المنتج، التنويع، العلامة التجارية، الكمية، نوع المستخدم
- **التأثيرات:** خصم النسبة المئوية، خصم المبلغ الثابت، السعر الخاص
- **حدود الاستخدام:** الحد الأقصى للاستخدام لكل قاعدة ولكل مستخدم
- **البيانات الوصفية:** العنوان، الوصف، الشروط والأحكام
- **نظام الأولوية:** ترتيب تطبيق القواعد
- **القواعد الزمنية:** تواريخ البداية والنهاية
- **الإحصائيات:** تتبع المشاهدات، التطبيقات، الإيرادات، والمدخرات

### 2. الكوبونات (Coupons)
- **أنواع الكوبونات:**
  - **النسبة المئوية:** خصم بنسبة مئوية محددة
  - **المبلغ الثابت:** خصم بمبلغ ثابت
  - **الشحن المجاني:** شحن مجاني للطلبات
  - **اشترِ X واحصل على Y:** عروض تركيبة
- **الاستهداف:**
  - **جميع المنتجات:** تطبيق على جميع المنتجات
  - **منتجات محددة:** تطبيق على منتجات معينة
  - **تصنيفات محددة:** تطبيق على تصنيفات معينة
  - **علامات تجارية محددة:** تطبيق على علامات تجارية معينة
- **حدود الاستخدام:**
  - **الحد الأقصى للاستخدام:** الحد الأقصى لعدد مرات الاستخدام
  - **الحد الأقصى لكل مستخدم:** الحد الأقصى لكل مستخدم
  - **تتبع الاستخدام:** تتبع عدد مرات الاستخدام الحالية
- **حالات الكوبون:**
  - ACTIVE: نشط ومتاح للاستخدام
  - INACTIVE: غير نشط
  - EXPIRED: منتهي الصلاحية
  - EXHAUSTED: استنفد الحد الأقصى

### 3. البانرات (Banners)
- **المواقع:**
  - **الصفحة الرئيسية:** أعلى، وسط، أسفل
  - **صفحات التصنيف:** أعلى الصفحة
  - **صفحات المنتج:** في صفحة المنتج
  - **صفحات السلة:** في صفحة السلة
  - **صفحات الدفع:** في صفحة الدفع
  - **الشريط الجانبي:** في الشريط الجانبي
  - **التذييل:** في التذييل
- **أنواع الترويج:**
  - **الخصم:** عروض الخصم
  - **الشحن المجاني:** عروض الشحن المجاني
  - **الوصول الجديد:** منتجات جديدة
  - **المبيعات:** عروض المبيعات
  - **الموسمية:** عروض موسمية
  - **ترويج العلامة التجارية:** ترويج العلامات التجارية
- **الاستهداف:** التصنيفات والمنتجات المحددة
- **الإحصائيات:** تتبع المشاهدات، النقرات، التحويلات

## التكامل مع الأنظمة الأخرى

### تكامل مع نظام المنتجات
- **كتالوج المنتجات:** ربط قواعد الأسعار بالمنتجات والتنويعات
- **تصنيفات المنتجات:** ربط القواعد بالتصنيفات
- **علامات المنتجات:** ربط القواعد بالعلامات التجارية

### تكامل مع نظام المستخدمين
- **ملفات المستخدمين:** ربط الكوبونات بالمستخدمين
- **أدوار المستخدمين:** تطبيق قواعد مختلفة حسب نوع المستخدم
- **قيود المستخدمين:** تضمين أو استبعاد مستخدمين محددين

### تكامل مع نظام الطلبات
- **حساب الأسعار:** حساب الأسعار النهائية للطلبات
- **تطبيق الخصومات:** تطبيق الخصومات على الطلبات
- **التحقق من الكوبونات:** التحقق من صحة الكوبونات في الطلبات

## نقاط مهمة
- **نظام شامل:** إدارة قواعد الأسعار، الكوبونات، والبانرات
- **مرونة عالية:** قواعد مرنة وقابلة للتخصيص
- **تتبع الإحصائيات:** تتبع الاستخدام والأداء
- **تكامل مع الأنظمة:** تكامل مع المنتجات والطلبات والمستخدمين
- **أمان البيانات:** حماية البيانات مع Soft Delete
- **أداء محسن:** فهرسة محسنة للبحث السريع
- **سهولة الإدارة:** واجهات إدارية شاملة
