%% Price Rules Management Flow
%% View at https://mermaid.live
flowchart TD
  A[إدارة قواعد الأسعار] --> B{نوع العملية?}
  B -->|إنشاء قاعدة| C[إنشاء قاعدة تسعير]
  B -->|تحديث قاعدة| D[تحديث قاعدة تسعير]
  B -->|حذف قاعدة| E[حذف قاعدة تسعير]
  B -->|عرض القواعد| F[عرض قواعد التسعير]

  %% Create Price Rule
  C --> C1[استلام بيانات القاعدة]
  C1 --> C2[التحقق من صحة البيانات]
  C2 --> C3[إنشاء كائن القاعدة]
  C3 --> C4[حفظ في قاعدة البيانات]
  C4 --> C5[إرجاع القاعدة المنشأة]

  %% Update Price Rule
  D --> D1[استلام معرف القاعدة وبيانات التحديث]
  D1 --> D2[البحث عن القاعدة]
  D2 --> D3{القاعدة موجودة?}
  D3 -->|لا| D4[إرجاع خطأ]
  D3 -->|نعم| D5[تحديث البيانات]
  D5 --> D6[حفظ التغييرات]
  D6 --> D7[إرجاع القاعدة المحدثة]
  D4 --> D8[نهاية - غير موجود]

  %% Delete Price Rule
  E --> E1[استلام معرف القاعدة]
  E1 --> E2[البحث عن القاعدة]
  E2 --> E3{القاعدة موجودة?}
  E3 -->|لا| E4[إرجاع خطأ]
  E3 -->|نعم| E5[Soft Delete للقاعدة]
  E5 --> E6[إرجاع نجاح الحذف]
  E4 --> E7[نهاية - غير موجود]

  %% List Price Rules
  F --> F1[استلام معايير البحث]
  F1 --> F2[البحث في قاعدة البيانات]
  F2 --> F3[ترتيب حسب الأولوية]
  F3 --> F4[إرجاع قائمة القواعد]
