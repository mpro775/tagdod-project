%% User Analytics Flow
%% View at https://mermaid.live
flowchart TD
  A[تحليلات المستخدمين] --> B[نظرة عامة]
  A --> C[حسب الدور]
  A --> D[حسب الحالة]
  A --> E[ترتيب العملاء]
  A --> F[إحصائيات مفصلة]

  %% Overview
  B --> B1[GET /admin/user-analytics/overview]
  B1 --> B2[إحصائيات عامة]
  B2 --> B3[عدد المستخدمين الإجمالي]
  B3 --> B4[المستخدمون النشطون]
  B4 --> B5[المستخدمون الجدد]

  %% By Role
  C --> C1[GET /admin/user-analytics/users-by-role]
  C1 --> C2[توزيع حسب الأدوار]
  C2 --> C3[USER, ENGINEER, MERCHANT, ADMIN, SUPER_ADMIN]
  C3 --> C4[عدد المستخدمين لكل دور]

  %% By Status
  D --> D1[GET /admin/user-analytics/users-by-status]
  D1 --> D2[توزيع حسب الحالة]
  D2 --> D3[ACTIVE, SUSPENDED, PENDING, DELETED]
  D3 --> D4[إحصائيات الحالة]

  %% Customer Rankings
  E --> E1[GET /admin/user-analytics/customer-rankings]
  E1 --> E2[ترتيب العملاء]
  E2 --> E3[حسب النقاط والأداء]
  E3 --> E4[قائمة مرتبة]

  %% Detailed Stats
  F --> F1[GET /admin/user-analytics/user-stats]
  F1 --> F2[فلاتر متقدمة]
  F2 --> F3[role, status, dateRange]
  F3 --> F4[إحصائيات مفصلة]
  F4 --> F5[تصفح وترتيب]

  F5 --> F6[إحصائيات فردية]
  F6 --> F7[GET /admin/user-analytics/user/:id]
  F7 --> F8[تفاصيل مستخدم محدد]
  F8 --> F9[نشاط وأداء]

  %% Scoring System
  G[نظام النقاط] --> G1[GET /admin/user-analytics/scoring-config]
  G1 --> G2[إعدادات النقاط]
  G2 --> G3[معاملات الحساب]

  G3 --> G4[PUT /admin/user-analytics/scoring-config]
  G4 --> G5[تحديث الإعدادات]
  G5 --> G6[تخصيص المعاملات]

  %% User Scoring
  H[حساب النقاط] --> H1[calculateUserScore]
  H1 --> H2[عوامل متعددة]
  H2 --> H3[orders, revenue, activity, support]
  H3 --> H4[نقاط مرجحة]

  %% End points
  F9 --> I[نهاية - تحليلات شاملة]
  H4 --> I
