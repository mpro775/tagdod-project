%% User Predictions Flow
%% View at https://mermaid.live
flowchart TD
  A[تنبؤات المستخدمين] --> B[تنبؤات أساسية]
  A --> C[تحليل المخاطر]
  A --> D[تنبؤات النشاط]

  %% Basic Predictions
  B --> B1[User Query Service]
  B1 --> B2[predictUserActivity]
  B2 --> B3[تحليل البيانات التاريخية]
  B3 --> B4[نمط النشاط]
  B4 --> B5[التنبؤ بالنشاط المستقبلي]

  %% Risk Analysis
  C --> C1[analyzeChurnRisk]
  C1 --> C2[عوامل المخاطر]
  C2 --> C3[daysSinceLastOrder]
  C3 --> C4[daysSinceLastActivity]
  C4 --> C5[supportTicketCount]

  C5 --> C6[مستويات المخاطر]
  C6 --> C7[Low: > 30 days]
  C7 --> C8[Medium: 15-30 days]
  C8 --> C9[High: < 15 days]

  %% Activity Predictions
  D --> D1[predictUserEngagement]
  D1 --> D2[تحليل التفاعل]
  D2 --> D3[تكرار الطلبات]
  D3 --> D4[تكرار الخدمات]
  D4 --> D5[تكرار الدعم]

  D5 --> D6[مستويات التفاعل]
  D6 --> D7[High: نشط جداً]
  D7 --> D8[Medium: نشط متوسط]
  D8 --> D9[Low: غير نشط]

  %% Data Sources
  E[مصادر البيانات] --> E1[User data]
  E --> E2[Order history]
  E --> E3[Service requests]
  E --> E4[Support tickets]
  E --> E5[Activity logs]

  %% Prediction Accuracy
  F[دقة التنبؤات] --> F1[Historical validation]
  F1 --> F2[Accuracy metrics]
  F2 --> F3[Model improvement]
  F3 --> F4[Continuous learning]

  %% End points
  C9 --> G[نهاية - تنبؤات شاملة]
  F4 --> G
