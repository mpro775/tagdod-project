# تدفقات إدارة الماركات (Brands Management Flows)

## الملفات المتاحة
- `brand-management.mmd` - مخطط إدارة الماركات الأساسي
- `brand-creation-workflow.mmd` - مخطط سير عمل إنشاء الماركات
- `brand-search-filtering.mmd` - مخطط البحث والفلترة للماركات
- `brand-status-management.mmd` - مخطط إدارة حالة الماركات
- `brand-metadata-system.mmd` - مخطط نظام البيانات الوصفية للماركات

## نظرة عامة على النظام

نظام إدارة ماركات متقدم ومتطور يتضمن:
- ✅ **نظام ماركات شامل** مع إدارة كاملة
- ✅ **دعم ثنائي اللغة** (عربي/إنجليزي)
- ✅ **نظام ترتيب متقدم** مع sortOrder
- ✅ **نظام فلترة وبحث متقدم** مع pagination
- ✅ **نظام إدارة الحالة** مع toggle status
- ✅ **نظام البيانات الوصفية** مع metadata
- ✅ **نظام Soft Delete** مع استعادة آمنة
- ✅ **تكامل مع Media Library** مع صور الماركات
- ✅ **نظام SEO** مع slugs ودودة
- ✅ **نظام إحصائيات** مع analytics

## أنواع الماركات المتاحة

### 1. الماركات النشطة (Active Brands)
- **الخصائص:** ماركات نشطة ومتاحة للاستخدام
- **الاستخدام:** عرض في الواجهة الأمامية
- **المثال:** Apple, Samsung, Nike
- **الحالة:** isActive = true

### 2. الماركات غير النشطة (Inactive Brands)
- **الخصائص:** ماركات معطلة مؤقتاً
- **الاستخدام:** إخفاء من الواجهة الأمامية
- **المثال:** ماركات تحت الصيانة
- **الحالة:** isActive = false

### 3. الماركات المميزة (Featured Brands)
- **الخصائص:** ماركات مميزة للعرض
- **الاستخدام:** إبراز في الواجهة الأمامية
- **المثال:** ماركات الشركاء
- **الترتيب:** sortOrder عالي

## هيكل البيانات

### حقول الماركة الأساسية (Basic Brand Fields)
- `name`: الاسم بالعربية (string) - مطلوب
- `nameEn`: الاسم بالإنجليزية (string) - مطلوب
- `slug`: الرابط الودود (string) - مطلوب، فريد
- `image`: رابط الصورة (string) - مطلوب
- `description`: الوصف بالعربية (string) - اختياري
- `descriptionEn`: الوصف بالإنجليزية (string) - اختياري

### حقول العرض (Display Fields)
- `isActive`: نشطة (boolean) - افتراضي true
- `sortOrder`: ترتيب العرض (number) - افتراضي 0

### حقول البيانات الوصفية (Metadata Fields)
- `metadata`: البيانات الوصفية (object) - اختياري
- `createdAt`: تاريخ الإنشاء (Date) - تلقائي
- `updatedAt`: تاريخ التحديث (Date) - تلقائي

## API Endpoints المتاحة

### للعملاء (3 endpoints)
- **GET /brands** - قائمة الماركات النشطة
- **GET /brands/:id** - تفاصيل ماركة واحدة بالمعرف
- **GET /brands/slug/:slug** - تفاصيل ماركة واحدة بالـ slug

### للأدمن (6 endpoints)
- **POST /admin/brands** - إنشاء ماركة جديدة
- **GET /admin/brands** - قائمة الماركات (مع فلاتر)
- **GET /admin/brands/:id** - تفاصيل ماركة واحدة
- **PATCH /admin/brands/:id** - تحديث ماركة
- **DELETE /admin/brands/:id** - حذف ماركة
- **PATCH /admin/brands/:id/toggle-status** - تبديل حالة الماركة

## DTOs المتاحة

### إنشاء الماركة
- `CreateBrandDto`: إنشاء ماركة جديدة
  - `name`: الاسم بالعربية (required, 2-100 حرف)
  - `nameEn`: الاسم بالإنجليزية (required, 2-100 حرف)
  - `image`: رابط الصورة (required)
  - `description`: الوصف بالعربية (optional, max 500 حرف)
  - `descriptionEn`: الوصف بالإنجليزية (optional, max 500 حرف)
  - `isActive`: نشطة (optional, default true)
  - `sortOrder`: ترتيب العرض (optional, default 0)
  - `metadata`: البيانات الوصفية (optional)

### تحديث الماركة
- `UpdateBrandDto`: تحديث ماركة موجودة
  - جميع الحقول اختيارية
  - نفس الحقول في CreateBrandDto

### قائمة الماركات
- `ListBrandsDto`: فلترة قائمة الماركات
  - `page`: رقم الصفحة (optional, default 1)
  - `limit`: عدد العناصر (optional, default 20)
  - `search`: البحث النصي (optional)
  - `isActive`: الماركات النشطة (optional)
  - `sortBy`: ترتيب حسب (optional: name, createdAt, sortOrder)
  - `sortOrder`: اتجاه الترتيب (optional: asc, desc)

## نظام البحث والفلترة المتقدم

### أنواع البحث
- **البحث النصي:** بحث في الاسم والوصف
- **البحث بالحالة:** فلترة حسب النشاط
- **البحث بالترتيب:** ترتيب حسب معايير مختلفة

### خصائص البحث
- **search:** البحث في الاسم والوصف
- **isActive:** فلترة الماركات النشطة
- **sortBy:** ترتيب حسب الاسم أو التاريخ أو الترتيب
- **sortOrder:** اتجاه الترتيب (تصاعدي/تنازلي)

### Pagination
- **page:** رقم الصفحة (بداية من 1)
- **limit:** عدد العناصر في الصفحة
- **النتيجة:** بيانات الماركات + معلومات الصفحات

## نظام إدارة الحالة

### تبديل الحالة
- **Toggle Status:** تبديل بين نشط/غير نشط
- **الاستخدام:** إخفاء/إظهار الماركات
- **النتيجة:** تحديث حالة الماركة

### إدارة الحالة
- **تفعيل الماركة:** isActive = true
- **إلغاء تفعيل الماركة:** isActive = false
- **تحديث تلقائي:** تحديث timestamp

## نظام البيانات الوصفية

### أنواع البيانات الوصفية
- **معلومات إضافية:** بيانات إضافية للماركة
- **إعدادات العرض:** إعدادات خاصة بالعرض
- **بيانات SEO:** معلومات تحسين محركات البحث
- **بيانات التكامل:** معلومات التكامل مع أنظمة أخرى

### استخدام البيانات الوصفية
- **تخزين مرن:** تخزين أي نوع من البيانات
- **استعلام متقدم:** البحث في البيانات الوصفية
- **تحديث ديناميكي:** تحديث البيانات الوصفية

## نظام الترتيب المتقدم

### أنواع الترتيب
- **ترتيب حسب الاسم:** ترتيب أبجدي
- **ترتيب حسب التاريخ:** ترتيب حسب تاريخ الإنشاء
- **ترتيب حسب الترتيب:** ترتيب حسب sortOrder

### إدارة الترتيب
- **sortOrder:** رقم الترتيب
- **تحديث الترتيب:** تغيير ترتيب الماركات
- **ترتيب تلقائي:** ترتيب تلقائي حسب المعايير

## نظام SEO

### URLs الودودة
- **Slug:** رابط ودود للماركة
- **Uniqueness:** فريد في النظام
- **SEO Friendly:** محسن لمحركات البحث

### تحسين SEO
- **Meta Tags:** علامات SEO
- **Structured Data:** بيانات منظمة
- **Search Optimization:** تحسين البحث

## نظام الصور

### إدارة الصور
- **image:** رابط الصورة الرئيسية
- **تكامل مع Media Library:** دعم كامل للصور
- **تحسين الصور:** تحسين أداء الصور

### أنواع الصور
- **شعار الماركة:** الشعار الرئيسي
- **صور إضافية:** صور إضافية للماركة
- **صور SEO:** صور محسنة للبحث

## نظام الإحصائيات

### إحصائيات الماركات
- **عدد الماركات:** إجمالي الماركات
- **الماركات النشطة:** عدد الماركات النشطة
- **الماركات غير النشطة:** عدد الماركات المعطلة
- **إحصائيات الاستخدام:** إحصائيات استخدام الماركات

### تحليلات الماركات
- **تحليل الأداء:** أداء الماركات
- **تحليل الاستخدام:** استخدام الماركات
- **تحليل الاتجاهات:** اتجاهات الماركات

## نظام Soft Delete

### الحذف الآمن
- **Soft Delete:** حذف مؤقت
- **الاستعادة:** إمكانية الاستعادة
- **التحقق:** فحص الاستخدام قبل الحذف

### إدارة الحذف
- **حذف مؤقت:** حذف مع إمكانية الاستعادة
- **حذف نهائي:** حذف نهائي من قاعدة البيانات
- **تنظيف البيانات:** تنظيف البيانات المحذوفة

## تكامل مع الأنظمة الأخرى

### تكامل مع المنتجات
- **ربط المنتجات:** ربط المنتجات بالماركات
- **فلترة المنتجات:** فلترة المنتجات حسب الماركة
- **إحصائيات المنتجات:** إحصائيات المنتجات حسب الماركة

### تكامل مع الفئات
- **ربط الفئات:** ربط الماركات بالفئات
- **فلترة الفئات:** فلترة الفئات حسب الماركة
- **تنظيم الماركات:** تنظيم الماركات حسب الفئات

## نقاط مهمة
- **نظام ماركات شامل:** إدارة كاملة للماركات مع دعم ثنائي اللغة
- **نظام بحث وفلترة متقدم:** بحث نصي وفلترة متقدمة مع pagination
- **نظام إدارة الحالة:** تبديل حالة الماركات مع تحديث تلقائي
- **نظام البيانات الوصفية:** تخزين مرن للبيانات الإضافية
- **نظام ترتيب متقدم:** ترتيب ذكي مع sortOrder
- **نظام SEO:** URLs ودودة مع تحسين محركات البحث
- **نظام الصور:** إدارة متقدمة للصور مع تكامل Media Library
- **نظام إحصائيات:** تحليلات شاملة للماركات
- **نظام Soft Delete:** حذف آمن مع إمكانية الاستعادة
- **تكامل شامل:** تكامل مع المنتجات والفئات والأنظمة الأخرى
