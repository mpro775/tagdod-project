# Admin API Documentation - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†

> ğŸ” **Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ù…Ø­Ù…ÙŠØ©** - ØªØªØ·Ù„Ø¨ JWT Token + ØµÙ„Ø§Ø­ÙŠØ§Øª Admin

---

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª](#Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª-ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª)
2. [Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø©](#Ø§Ù„Ø¨Ø­Ø«-ÙˆØ§Ù„ÙÙ„ØªØ±Ø©)
3. [Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†](#Ø¥Ø¯Ø§Ø±Ø©-Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†)
4. [Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ](#Ø§Ù„Ø¨Ø­Ø«-Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ)

---

## ğŸš€ Base URL

```
/admin/addresses
```

---

## ğŸ” Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### Headers Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
```http
Authorization: Bearer {admin_jwt_token}
```

### Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- `AdminPermission.ADDRESSES_READ`
- `AdminPermission.ADMIN_ACCESS`

### Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©:
- `ADMIN`
- `SUPER_ADMIN`

---

## ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª

### 1. Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´Ø§Ù…Ù„Ø©

```http
GET /admin/addresses/stats
```

**Ø§Ù„ÙˆØµÙ:** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†Ø¸Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ø¹Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…

**Response:**
```json
{
  "success": true,
  "data": {
    "totalAddresses": 1250,
    "totalActiveAddresses": 1180,
    "totalDeletedAddresses": 70,
    "totalUsers": 450,
    "averagePerUser": 2.8
  }
}
```

**Use Case:** Dashboard Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© - Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©

---

### 2. Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Ù‹

```http
GET /admin/addresses/top-cities?limit=10
```

**Query Parameters:**
| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| limit | number | 10 | Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ù…Ø±Ø§Ø¯ Ø¹Ø±Ø¶Ù‡Ø§ |

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "city": "ØµÙ†Ø¹Ø§Ø¡",
      "count": 450,
      "activeCount": 420,
      "defaultCount": 150,
      "totalUsage": 1250,
      "percentage": 36.5
    },
    {
      "city": "Ø¹Ø¯Ù†",
      "count": 320,
      "activeCount": 305,
      "defaultCount": 110,
      "totalUsage": 890,
      "percentage": 25.9
    }
  ]
}
```

**Use Case:**
- ØªØ®Ø·ÙŠØ· Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„
- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø°Ø§Øª Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¹Ø§Ù„ÙŠ
- Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ

---

### 3. Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Ù‹

```http
GET /admin/addresses/most-used?limit=10
```

**Query Parameters:**
| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| limit | number | 10 | Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† |

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "_id": "507f1f77bcf86cd799439011",
      "label": "Ø§Ù„Ù…Ù†Ø²Ù„",
      "line1": "Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ØªÙŠÙ†ØŒ Ø¨Ø¬ÙˆØ§Ø± Ù…Ø·Ø¹Ù… Ø§Ù„Ø³Ù„Ø·Ø§Ù†",
      "city": "ØµÙ†Ø¹Ø§Ø¡",
      "usageCount": 15,
      "lastUsedAt": "2024-01-20T10:30:00Z",
      "userId": {
        "_id": "507f1f77bcf86cd799439012",
        "name": "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
        "phone": "+967771234567"
      }
    }
  ]
}
```

**Use Case:**
- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø£ÙƒØ«Ø± Ù†Ø´Ø§Ø·Ø§Ù‹
- ØªØ­Ù„ÙŠÙ„ Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø·Ù„Ø¨Ø§Øª

---

### 4. Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ù…Ø¤Ø®Ø±Ø§Ù‹

```http
GET /admin/addresses/recently-used?limit=20
```

**Query Parameters:**
| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| limit | number | 20 | Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† |

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "_id": "...",
      "label": "Ø§Ù„Ù…ÙƒØªØ¨",
      "line1": "Ø´Ø§Ø±Ø¹ Ø§Ù„ØªØ­Ø±ÙŠØ±ØŒ Ù…Ø¨Ù†Ù‰ Ø§Ù„ØªØ¬Ø§Ø±Ø©",
      "city": "ØµÙ†Ø¹Ø§Ø¡",
      "usageCount": 8,
      "lastUsedAt": "2024-01-25T14:20:00Z",
      "userId": {
        "_id": "...",
        "name": "Ø³Ø§Ø±Ø© Ø¹Ù„ÙŠ",
        "phone": "+967777654321"
      }
    }
  ]
}
```

**Use Case:** Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£Ø®ÙŠØ±

---

### 5. Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„ØªÙŠ Ù„Ù… ØªØ³ØªØ®Ø¯Ù… Ø£Ø¨Ø¯Ø§Ù‹

```http
GET /admin/addresses/never-used?limit=20
```

**Query Parameters:**
| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| limit | number | 20 | Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† |

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "_id": "...",
      "label": "Ø¹Ù†Ø¯ Ø£Ù…ÙŠ",
      "line1": "Ø­ÙŠ Ø§Ù„Ø³Ø¨Ø¹ÙŠÙ†ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©",
      "city": "ØµÙ†Ø¹Ø§Ø¡",
      "createdAt": "2024-01-10T09:15:00Z",
      "userId": {
        "_id": "...",
        "name": "Ù…Ø­Ù…Ø¯ Ø­Ø³Ù†",
        "phone": "+967773456789"
      }
    }
  ]
}
```

**Use Case:** ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

---

### 6. ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

```http
GET /admin/addresses/usage-analytics?startDate=2024-01-01&endDate=2024-01-31
```

**Query Parameters:**
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| startDate | string | No | ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (YYYY-MM-DD) |
| endDate | string | No | ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© (YYYY-MM-DD) |

**Response:**
```json
{
  "success": true,
  "data": {
    "stats": {
      "totalUsage": 3500,
      "avgUsage": 2.8,
      "maxUsage": 25,
      "addressesUsed": 1050,
      "addressesNeverUsed": 130
    },
    "dailyTrend": [
      {
        "_id": "2024-01-15",
        "count": 45
      },
      {
        "_id": "2024-01-16",
        "count": 52
      }
    ]
  }
}
```

**Use Case:**
- ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª Ø§Ù„Ø²Ù…Ù†ÙŠØ©
- Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ
- ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡

---

### 7. Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ

```http
GET /admin/addresses/geographic-analytics
```

**Response:**
```json
{
  "success": true,
  "data": {
    "cityDistribution": [
      {
        "_id": "ØµÙ†Ø¹Ø§Ø¡",
        "count": 450,
        "coordinates": [
          { "lat": 15.3694, "lng": 44.191 },
          { "lat": 15.3700, "lng": 44.195 }
        ]
      }
    ],
    "coordinates": [
      {
        "lat": 15.3694,
        "lng": 44.191,
        "city": "ØµÙ†Ø¹Ø§Ø¡",
        "label": "Ø§Ù„Ù…Ù†Ø²Ù„"
      }
    ],
    "totalPoints": 1250
  }
}
```

**Use Case:**
- Ø®Ø±ÙŠØ·Ø© Ø­Ø±Ø§Ø±ÙŠØ© (Heatmap)
- ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ
- ØªØ®Ø·ÙŠØ· Ù…Ø±Ø§ÙƒØ² Ø§Ù„ØªÙˆØ²ÙŠØ¹

---

## ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø©

### 8. Ù‚Ø§Ø¦Ù…Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø¹ ÙÙ„ØªØ±Ø© Ù…ØªÙ‚Ø¯Ù…Ø©

```http
GET /admin/addresses/list
```

**Query Parameters:**
| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| userId | string | - | Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… |
| city | string | - | Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© |
| label | string | - | Ø§Ù„ØªØ³Ù…ÙŠØ© |
| isDefault | boolean | - | Ø§ÙØªØ±Ø§Ø¶ÙŠ ÙÙ‚Ø· |
| isActive | boolean | - | Ù†Ø´Ø· ÙÙ‚Ø· |
| includeDeleted | boolean | false | ØªØ¶Ù…ÙŠÙ† Ø§Ù„Ù…Ø­Ø°ÙˆÙØ© |
| search | string | - | Ø¨Ø­Ø« Ù†ØµÙŠ |
| limit | number | 20 | Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ |
| page | number | 1 | Ø±Ù‚Ù… Ø§Ù„ØµÙØ­Ø© |
| sortBy | string | createdAt | Ø§Ù„ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ |
| sortOrder | string | desc | Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØªØ±ØªÙŠØ¨ |

**sortBy Options:**
- `createdAt` - ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
- `usageCount` - Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Øª
- `lastUsedAt` - Ø¢Ø®Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…

**sortOrder Options:**
- `asc` - ØªØµØ§Ø¹Ø¯ÙŠ
- `desc` - ØªÙ†Ø§Ø²Ù„ÙŠ

**Ù…Ø«Ø§Ù„ 1: Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙÙŠ ØµÙ†Ø¹Ø§Ø¡**
```http
GET /admin/addresses/list?city=ØµÙ†Ø¹Ø§Ø¡&limit=50
```

**Ù…Ø«Ø§Ù„ 2: Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù†Øµ**
```http
GET /admin/addresses/list?search=Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ØªÙŠÙ†
```

**Ù…Ø«Ø§Ù„ 3: Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Ù‹**
```http
GET /admin/addresses/list?sortBy=usageCount&sortOrder=desc&limit=20
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "_id": "507f1f77bcf86cd799439011",
      "label": "Ø§Ù„Ù…Ù†Ø²Ù„",
      "line1": "Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ØªÙŠÙ†ØŒ Ø¨Ø¬ÙˆØ§Ø± Ù…Ø·Ø¹Ù… Ø§Ù„Ø³Ù„Ø·Ø§Ù†",
      "city": "ØµÙ†Ø¹Ø§Ø¡",
      "coords": {
        "lat": 15.3694,
        "lng": 44.191
      },
      "notes": "ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„",
      "isDefault": true,
      "isActive": true,
      "usageCount": 5,
      "lastUsedAt": "2024-01-15T10:30:00Z",
      "createdAt": "2023-12-01T08:00:00Z",
      "userId": {
        "_id": "507f1f77bcf86cd799439012",
        "name": "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
        "phone": "+967771234567",
        "email": "ahmed@example.com",
        "isActive": true,
        "createdAt": "2023-11-15T10:00:00Z"
      }
    }
  ],
  "pagination": {
    "total": 1250,
    "page": 1,
    "limit": 20,
    "pages": 63
  }
}
```

**Use Case:**
- ØµÙØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙÙŠ Dashboard
- Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
- ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

---

## ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†

### 9. Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¯Ø¯

```http
GET /admin/addresses/user/:userId?includeDeleted=false
```

**Path Parameters:**
| Parameter | Type | Description |
|-----------|------|-------------|
| userId | string | Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… |

**Query Parameters:**
| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| includeDeleted | boolean | false | ØªØ¶Ù…ÙŠÙ† Ø§Ù„Ù…Ø­Ø°ÙˆÙØ© |

**Ù…Ø«Ø§Ù„:**
```http
GET /admin/addresses/user/507f1f77bcf86cd799439012
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "_id": "...",
      "label": "Ø§Ù„Ù…Ù†Ø²Ù„",
      "line1": "Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ØªÙŠÙ†ØŒ Ø¨Ø¬ÙˆØ§Ø± Ù…Ø·Ø¹Ù… Ø§Ù„Ø³Ù„Ø·Ø§Ù†",
      "city": "ØµÙ†Ø¹Ø§Ø¡",
      "coords": { "lat": 15.3694, "lng": 44.191 },
      "isDefault": true,
      "isActive": true,
      "usageCount": 5,
      "lastUsedAt": "2024-01-15T10:30:00Z"
    },
    {
      "_id": "...",
      "label": "Ø§Ù„Ù…ÙƒØªØ¨",
      "line1": "Ø´Ø§Ø±Ø¹ Ø§Ù„ØªØ­Ø±ÙŠØ±ØŒ Ù…Ø¨Ù†Ù‰ Ø§Ù„ØªØ¬Ø§Ø±Ø©",
      "city": "ØµÙ†Ø¹Ø§Ø¡",
      "coords": { "lat": 15.3700, "lng": 44.195 },
      "isDefault": false,
      "isActive": true,
      "usageCount": 2
    }
  ],
  "count": 2
}
```

**Use Case:**
- ØµÙØ­Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- Ø¯Ø¹Ù… Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
- Ø­Ù„ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙˆØµÙŠÙ„

---

### 10. Ø¹Ø¯Ø¯ Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¯Ø¯

```http
GET /admin/addresses/user/:userId/count
```

**Path Parameters:**
| Parameter | Type | Description |
|-----------|------|-------------|
| userId | string | Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… |

**Response:**
```json
{
  "success": true,
  "data": {
    "userId": "507f1f77bcf86cd799439012",
    "count": 3
  }
}
```

**Use Case:** Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø³Ø±ÙŠØ¹Ø© Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

---

## ğŸ—ºï¸ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ

### 11. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù†Ø§ÙˆÙŠÙ† Ù‚Ø±ÙŠØ¨Ø©

```http
GET /admin/addresses/nearby?lat=15.3694&lng=44.191&radius=10&limit=20
```

**Query Parameters:**
| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| lat | number | âœ… Yes | - | Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ |
| lng | number | âœ… Yes | - | Ø®Ø· Ø§Ù„Ø·ÙˆÙ„ |
| radius | number | No | 10 | Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± (ÙƒÙ…) |
| limit | number | No | 20 | Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ |

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "_id": "...",
      "label": "Ø§Ù„Ù…Ù†Ø²Ù„",
      "line1": "Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ØªÙŠÙ†ØŒ Ø¨Ø¬ÙˆØ§Ø± Ù…Ø·Ø¹Ù… Ø§Ù„Ø³Ù„Ø·Ø§Ù†",
      "city": "ØµÙ†Ø¹Ø§Ø¡",
      "coords": {
        "lat": 15.3694,
        "lng": 44.191
      },
      "userId": {
        "_id": "...",
        "name": "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
        "phone": "+967771234567"
      }
    }
  ],
  "searchParams": {
    "lat": 15.3694,
    "lng": 44.191,
    "radiusKm": 10
  }
}
```

**Use Case:**
- ØªØ®Ø·ÙŠØ· Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„
- ØªØ­Ø¯ÙŠØ¯ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø®Ø¯Ù…Ø©
- ØªØ­Ù„ÙŠÙ„ ÙƒØ«Ø§ÙØ© Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†

---

## ğŸ“± Ø£Ù…Ø«Ù„Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…

### Dashboard Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

```typescript
// 1. Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
const stats = await fetch('/admin/addresses/stats');

// Widget Ø¹Ø±Ø¶ Ø³Ø±ÙŠØ¹
<Card>
  <h3>ğŸ“ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†</h3>
  <p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: {stats.totalAddresses}</p>
  <p>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†: {stats.totalUsers}</p>
  <p>Ø§Ù„Ù…ØªÙˆØ³Ø·: {stats.averagePerUser}</p>
</Card>
```

### ØµÙØ­Ø© ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¯Ù†

```typescript
// 1. Ø¬Ù„Ø¨ Ø£Ù‡Ù… Ø§Ù„Ù…Ø¯Ù†
const cities = await fetch('/admin/addresses/top-cities?limit=10');

// 2. Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ
<BarChart data={cities} xKey="city" yKey="count" />

// 3. Ø¬Ø¯ÙˆÙ„ ØªÙØµÙŠÙ„ÙŠ
<Table>
  {cities.map(city => (
    <tr>
      <td>{city.city}</td>
      <td>{city.count}</td>
      <td>{city.percentage}%</td>
      <td>{city.totalUsage}</td>
    </tr>
  ))}
</Table>
```

### ØµÙØ­Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©

```typescript
// 1. Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ©
const geoData = await fetch('/admin/addresses/geographic-analytics');

// 2. Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø®Ø±ÙŠØ·Ø©
<HeatMap 
  coordinates={geoData.coordinates}
  center={{ lat: 15.3694, lng: 44.191 }}
  zoom={12}
/>
```

### ØµÙØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†

```typescript
// 1. Ù‚Ø§Ø¦Ù…Ø© Ù…Ø¹ ÙÙ„ØªØ±Ø©
const [filters, setFilters] = useState({
  city: '',
  search: '',
  page: 1,
  limit: 20,
  sortBy: 'createdAt',
  sortOrder: 'desc'
});

const addresses = await fetch(
  `/admin/addresses/list?${new URLSearchParams(filters)}`
);

// 2. Ø¬Ø¯ÙˆÙ„ Ù…Ø¹ Pagination
<DataTable 
  data={addresses.data}
  pagination={addresses.pagination}
  onPageChange={(page) => setFilters({...filters, page})}
/>
```

### ØµÙØ­Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

```typescript
// ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
const userId = "507f1f77bcf86cd799439012";

// 1. Ø¬Ù„Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
const { count } = await fetch(`/admin/addresses/user/${userId}/count`);

// 2. Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
const addresses = await fetch(`/admin/addresses/user/${userId}`);

// 3. Ø¹Ø±Ø¶ ÙÙŠ Card
<Card>
  <h3>Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ({count})</h3>
  {addresses.data.map(addr => (
    <AddressCard 
      key={addr._id}
      address={addr}
      isDefault={addr.isDefault}
    />
  ))}
</Card>
```

---

## ğŸ¯ Use Cases Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©

### 1. ØªØ­Ø¯ÙŠØ¯ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø°Ø§Øª Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¹Ø§Ù„ÙŠ
```http
GET /admin/addresses/top-cities?limit=20
```

### 2. ØªØ®Ø·ÙŠØ· Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„
```http
GET /admin/addresses/nearby?lat=15.3694&lng=44.191&radius=5
```

### 3. ØªØ­Ù„ÙŠÙ„ Ø³Ù„ÙˆÙƒ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
```http
GET /admin/addresses/usage-analytics?startDate=2024-01-01&endDate=2024-01-31
```

### 4. Ø¯Ø¹Ù… Ø¹Ù…ÙŠÙ„ Ù…Ø­Ø¯Ø¯
```http
GET /admin/addresses/user/507f1f77bcf86cd799439012
```

### 5. ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ù„Ù„ØªÙ†Ø¸ÙŠÙ
```http
GET /admin/addresses/never-used?limit=100
```

### 6. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù†Ø§ÙˆÙŠÙ† ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ù…Ø­Ø¯Ø¯Ø©
```http
GET /admin/addresses/list?city=ØµÙ†Ø¹Ø§Ø¡&search=Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ØªÙŠÙ†
```

---

## ğŸ”’ Ø§Ù„Ø£Ù…Ø§Ù†

### Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©:

1. âœ… **JWT Authentication** - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ù…Ø­Ù…ÙŠØ©
2. âœ… **Role-Based Access** - Admin/Super Admin ÙÙ‚Ø·
3. âœ… **Permission Checks** - `ADDRESSES_READ` Ù…Ø·Ù„ÙˆØ¨
4. âœ… **Admin Guard** - ØªØ­Ù‚Ù‚ Ø¥Ø¶Ø§ÙÙŠ
5. âœ… **Logging** - ØªØ³Ø¬ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª

### Ù…Ø«Ø§Ù„ Header:
```http
GET /admin/addresses/stats
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## ğŸ“Š Ø§Ù„Ø£Ø¯Ø§Ø¡

### Optimizations Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©:

1. âœ… **Indexes** - Ø¹Ù„Ù‰ userId, city, coords (2dsphere)
2. âœ… **Lean Queries** - Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ø°Ø§ÙƒØ±Ø©
3. âœ… **Pagination** - ØªØ¬Ù†Ø¨ ØªØ­Ù…ÙŠÙ„ ÙƒÙ…ÙŠØ§Øª ÙƒØ¨ÙŠØ±Ø©
4. âœ… **Aggregation Pipeline** - Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
5. âœ… **Populate** - Ø¬Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©

---

## ğŸ¨ Ù…Ø«Ø§Ù„ ÙˆØ§Ø¬Ù‡Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“Š Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø©                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ â”‚ Ø§Ù„Ù†Ø´Ø·Ø©  â”‚ Ø§Ù„Ù…Ø­Ø°ÙˆÙØ© â”‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†â”‚            â”‚
â”‚  â”‚  1,250   â”‚  1,180   â”‚    70    â”‚    450   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                             â”‚
â”‚  ğŸ™ï¸ Ø£Ù‡Ù… Ø§Ù„Ù…Ø¯Ù†                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ 1. ØµÙ†Ø¹Ø§Ø¡    450 (36.5%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚                    â”‚
â”‚  â”‚ 2. Ø¹Ø¯Ù†      320 (25.9%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚                    â”‚
â”‚  â”‚ 3. ØªØ¹Ø²      280 (22.7%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ˆ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:      1,050     â”‚                    â”‚
â”‚  â”‚ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:    130     â”‚                    â”‚
â”‚  â”‚ Ù…ØªÙˆØ³Ø· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:           2.8     â”‚                    â”‚
â”‚  â”‚ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰:                25     â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                             â”‚
â”‚  ğŸ—ºï¸ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©                                       â”‚
â”‚  [Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ© ØªØ¹Ø±Ø¶ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†]                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Ø§Ù„Ù…Ù„Ø®Øµ

ØªÙ… Ø¥Ø¶Ø§ÙØ© **11 endpoint** Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø£Ø¯Ù…Ù†:

### Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (7):
1. âœ… `/stats` - Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø©
2. âœ… `/top-cities` - Ø£Ù‡Ù… Ø§Ù„Ù…Ø¯Ù†
3. âœ… `/most-used` - Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Ù‹
4. âœ… `/recently-used` - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ù…Ø¤Ø®Ø±Ø§Ù‹
5. âœ… `/never-used` - ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
6. âœ… `/usage-analytics` - ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
7. âœ… `/geographic-analytics` - Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ

### Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø© (4):
8. âœ… `/list` - Ù‚Ø§Ø¦Ù…Ø© Ù…Ø¹ ÙÙ„ØªØ±Ø© Ù…ØªÙ‚Ø¯Ù…Ø©
9. âœ… `/user/:userId` - Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø³ØªØ®Ø¯Ù…
10. âœ… `/user/:userId/count` - Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
11. âœ… `/nearby` - Ø¨Ø­Ø« Ø¬ØºØ±Ø§ÙÙŠ

---

**Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… **Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ù†ØªØ§Ø¬**

**Version:** 1.0.0

**Last Updated:** ÙŠÙ†Ø§ÙŠØ± 2024

