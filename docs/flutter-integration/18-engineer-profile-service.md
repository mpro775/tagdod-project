# ğŸ‘· Ø®Ø¯Ù…Ø© Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ (Engineer Profile Service)

> âœ… **ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚**: 100% Ù…ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ÙØ¹Ù„ÙŠ ÙÙŠ Backend  
> ğŸ“… **Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«**: Ù†ÙˆÙÙ…Ø¨Ø± 2025  
> ğŸ”„ **Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø©**: 
> - Ø¥Ø²Ø§Ù„Ø© Ø­Ù‚Ù„ `languages` (Ù„Ù… ÙŠØ¹Ø¯ Ù…ØªØ§Ø­Ø§Ù‹)
> - Ø¥Ø¶Ø§ÙØ© `jobTitle` ÙÙŠ endpoint Ø§Ù„ØªØ­Ø¯ÙŠØ«
> - Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª `user` (gender, status, engineer_status) ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
> - Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª `coupon` Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©

Ø®Ø¯Ù…Ø© Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ ØªÙˆÙØ± endpoints Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ØŒ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§ØªØŒ Ø§Ù„Ø±ØµÙŠØ¯ØŒ ÙˆØ§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª.

> â„¹ï¸ **Ù…ÙŠØ²Ø© Ø¬Ø¯ÙŠØ¯Ø©**: ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… Ù…Ù†ÙØµÙ„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ (`EngineerProfile`) Ù…Ù†ÙØµÙ„ ØªÙ…Ø§Ù…Ø§Ù‹ Ø¹Ù† `User` schema. Ù‡Ø°Ø§ ÙŠÙˆÙØ±:
> - ÙØµÙ„ ÙˆØ§Ø¶Ø­ Ø¨ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³
> - Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª (Ø§Ù„Ù†Ø¬ÙˆÙ… + Ø§Ù„Ù†Øµ)
> - Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ØµÙŠØ¯ ÙˆØ§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª
> - Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

---

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ø¬Ù„Ø¨ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ](#1-Ø¬Ù„Ø¨-Ø¨Ø±ÙˆÙØ§ÙŠÙ„-Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³-Ø§Ù„Ø­Ø§Ù„ÙŠ)
2. [ØªØ­Ø¯ÙŠØ« Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³](#2-ØªØ­Ø¯ÙŠØ«-Ø¨Ø±ÙˆÙØ§ÙŠÙ„-Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³)
3. [Ø¬Ù„Ø¨ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ø¯Ø¯](#3-Ø¬Ù„Ø¨-Ø¨Ø±ÙˆÙØ§ÙŠÙ„-Ù…Ù‡Ù†Ø¯Ø³-Ù…Ø­Ø¯Ø¯)
4. [Ø¬Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ø¯Ø¯](#4-Ø¬Ù„Ø¨-ØªÙ‚ÙŠÙŠÙ…Ø§Øª-Ù…Ù‡Ù†Ø¯Ø³-Ù…Ø­Ø¯Ø¯)
5. [Ø¬Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ](#5-Ø¬Ù„Ø¨-ØªÙ‚ÙŠÙŠÙ…Ø§Øª-Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³-Ø§Ù„Ø­Ø§Ù„ÙŠ)
6. [Models ÙÙŠ Flutter](#models-ÙÙŠ-flutter)

---

## 1. Ø¬Ù„Ø¨ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ

Ø¬Ù„Ø¨ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª.

### Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨

- **Method:** `GET`
- **Endpoint:** `/engineers/profile/me`
- **Auth Required:** âœ… Ù†Ø¹Ù… (Engineer ÙÙ‚Ø·)

### Headers

```dart
{
  'Content-Type': 'application/json',
  'Authorization': 'Bearer {access_token}',
}
```

### Response - Ù†Ø¬Ø§Ø­

```json
{
  "success": true,
  "data": {
    "_id": "64profile123",
    "userId": {
      "_id": "64user123",
      "firstName": "Ø£Ø­Ù…Ø¯",
      "lastName": "Ù…Ø­Ù…Ø¯",
      "phone": "777123456",
      "city": "ØµÙ†Ø¹Ø§Ø¡"
    },
    "bio": "Ù…Ù‡Ù†Ø¯Ø³ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ Ù…Ø­ØªØ±Ù Ù…Ø¹ Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª Ù…Ù† Ø§Ù„Ø®Ø¨Ø±Ø©",
    "avatarUrl": "https://cdn.example.com/avatars/engineer123.jpg",
    "whatsappNumber": "967711234567",
    "cvFileUrl": "https://cdn.example.com/cvs/engineer123.pdf",
    "jobTitle": "Ù…Ù‡Ù†Ø¯Ø³ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ",
    "specialties": ["Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ", "ÙƒÙ‡Ø±Ø¨Ø§Ø¡", "Ø³Ø¨Ø§ÙƒØ©"],
    "yearsOfExperience": 10,
    "certifications": ["Ø´Ù‡Ø§Ø¯Ø© Ù…Ø¹ØªÙ…Ø¯Ø© ÙÙŠ Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ"],
    "user": {
      "gender": "male",
      "status": "active",
      "engineer_status": "approved"
    },
    "coupon": {
      "code": "ENG2024",
      "name": "ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ 2024",
      "description": "Ø®ØµÙ… Ø®Ø§Øµ Ù„Ù„Ù…Ù‡Ù†Ø¯Ø³ÙŠÙ†",
      "discountValue": 10,
      "type": "percentage",
      "commissionRate": 5
    },
    "ratings": [
      {
        "score": 5,
        "comment": "Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø© ÙˆÙ…Ù‡Ù†Ø¯Ø³ Ù…Ø­ØªØ±Ù Ø¬Ø¯Ø§Ù‹",
        "customerId": "64customer123",
        "customerName": "Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯",
        "serviceRequestId": "64service123",
        "ratedAt": "2025-10-15T10:30:00.000Z"
      }
    ],
    "totalRatings": 25,
    "averageRating": 4.8,
    "ratingDistribution": [15, 5, 3, 1, 1],
    "totalCompletedServices": 50,
    "totalEarnings": 50000,
    "walletBalance": 2500,
    "commissionTransactions": [
      {
        "transactionId": "COMM-1697123456-abc123",
        "type": "commission",
        "amount": 100,
        "orderId": "64order123",
        "couponCode": "ENG2024",
        "description": "Ø¹Ù…ÙˆÙ„Ø© Ù…Ù† ÙƒÙˆØ¨ÙˆÙ† ENG2024",
        "createdAt": "2025-10-15T10:00:00.000Z"
      }
    ],
    "createdAt": "2025-01-01T00:00:00.000Z",
    "updatedAt": "2025-10-15T10:30:00.000Z"
  },
  "requestId": "req_123"
}
```

### Response - ÙØ´Ù„

```json
{
  "success": false,
  "error": {
    "code": "AUTH_001",
    "message": "ØºÙŠØ± Ù…ØµØ±Ø­ - ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ù‡Ù†Ø¯Ø³Ø§Ù‹",
    "details": null
  },
  "requestId": "req_123"
}
```

### ÙƒÙˆØ¯ Flutter

```dart
Future<EngineerProfile?> getMyProfile() async {
  try {
    final response = await _dio.get('/engineers/profile/me');
    
    if (response.data['success'] == true) {
      return EngineerProfile.fromJson(response.data['data']);
    }
    
    return null;
  } on DioException catch (e) {
    if (e.response?.statusCode == 401) {
      throw UnauthorizedException('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
    }
    throw Exception('ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„: ${e.message}');
  }
}
```

---

## 2. ØªØ­Ø¯ÙŠØ« Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³

ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„.

### Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨

- **Method:** `PUT`
- **Endpoint:** `/engineers/profile/me`
- **Auth Required:** âœ… Ù†Ø¹Ù… (Engineer ÙÙ‚Ø·)

### Request Body

```json
{
  "bio": "Ù…Ù‡Ù†Ø¯Ø³ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ Ù…Ø­ØªØ±Ù Ù…Ø¹ Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª Ù…Ù† Ø§Ù„Ø®Ø¨Ø±Ø©",
  "avatarUrl": "https://cdn.example.com/avatars/engineer123.jpg",
  "whatsappNumber": "967711234567",
  "jobTitle": "Ù…Ù‡Ù†Ø¯Ø³ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ",
  "specialties": ["Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ", "ÙƒÙ‡Ø±Ø¨Ø§Ø¡", "Ø³Ø¨Ø§ÙƒØ©"],
  "yearsOfExperience": 10,
  "certifications": ["Ø´Ù‡Ø§Ø¯Ø© Ù…Ø¹ØªÙ…Ø¯Ø© ÙÙŠ Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ"]
}
```

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ù…Ø·Ù„ÙˆØ¨ | Ø§Ù„ÙˆØµÙ |
|------|------|-------|-------|
| `bio` | `string` | âŒ | Ø§Ù„Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 1000 Ø­Ø±Ù) |
| `avatarUrl` | `string` (URL) | âŒ | Ø±Ø§Ø¨Ø· Ø§Ù„Ø£ÙØ§ØªØ§Ø± (Ù…Ù† Bunny.net) |
| `whatsappNumber` | `string` | âŒ | Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ |
| `jobTitle` | `string` | âŒ | Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 100 Ø­Ø±Ù) |
| `specialties` | `string[]` | âŒ | Ø§Ù„ØªØ®ØµØµØ§Øª (Ù…Ø«Ù„: ["Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ", "ÙƒÙ‡Ø±Ø¨Ø§Ø¡"]) |
| `yearsOfExperience` | `number` | âŒ | Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¨Ø±Ø© (0-50) |
| `certifications` | `string[]` | âŒ | Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª |

> âš ï¸ **Ù…Ù„Ø§Ø­Ø¸Ø©**: `cvFileUrl` ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ Ø¹Ø¨Ø± endpoint Ø§Ù„ØªÙˆØ«ÙŠÙ‚ (`/users/verification/submit`)

### Response - Ù†Ø¬Ø§Ø­

```json
{
  "success": true,
  "data": {
    "_id": "64profile123",
    "userId": "64user123",
    "bio": "Ù…Ù‡Ù†Ø¯Ø³ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ Ù…Ø­ØªØ±Ù Ù…Ø¹ Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª Ù…Ù† Ø§Ù„Ø®Ø¨Ø±Ø©",
    "avatarUrl": "https://cdn.example.com/avatars/engineer123.jpg",
    "whatsappNumber": "967711234567",
    "jobTitle": "Ù…Ù‡Ù†Ø¯Ø³ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ",
    "specialties": ["Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ", "ÙƒÙ‡Ø±Ø¨Ø§Ø¡", "Ø³Ø¨Ø§ÙƒØ©"],
    "yearsOfExperience": 10,
    "certifications": ["Ø´Ù‡Ø§Ø¯Ø© Ù…Ø¹ØªÙ…Ø¯Ø© ÙÙŠ Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ"],
    "updatedAt": "2025-10-15T11:00:00.000Z"
  },
  "requestId": "req_123"
}
```

### ÙƒÙˆØ¯ Flutter

```dart
Future<EngineerProfile> updateMyProfile({
  String? bio,
  String? avatarUrl,
  String? whatsappNumber,
  String? jobTitle,
  List<String>? specialties,
  int? yearsOfExperience,
  List<String>? certifications,
}) async {
  final data = <String, dynamic>{};
  
  if (bio != null) data['bio'] = bio;
  if (avatarUrl != null) data['avatarUrl'] = avatarUrl;
  if (whatsappNumber != null) data['whatsappNumber'] = whatsappNumber;
  if (jobTitle != null) data['jobTitle'] = jobTitle;
  if (specialties != null) data['specialties'] = specialties;
  if (yearsOfExperience != null) data['yearsOfExperience'] = yearsOfExperience;
  if (certifications != null) data['certifications'] = certifications;
  
  try {
    final response = await _dio.put('/engineers/profile/me', data: data);
    
    if (response.data['success'] == true) {
      return EngineerProfile.fromJson(response.data['data']);
    }
    
    throw Exception('ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„');
  } on DioException catch (e) {
    if (e.response?.statusCode == 401) {
      throw UnauthorizedException('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
    }
    throw Exception('ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„: ${e.message}');
  }
}
```

---

## 3. Ø¬Ù„Ø¨ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ø¯Ø¯

Ø¬Ù„Ø¨ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ø¯Ø¯ (Ø¹Ø§Ù… - Ù„Ø§ ÙŠØ­ØªØ§Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„).

### Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨

- **Method:** `GET`
- **Endpoint:** `/engineers/profile/:engineerId`
- **Auth Required:** âŒ Ù„Ø§

### Path Parameters

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ù…Ø·Ù„ÙˆØ¨ | Ø§Ù„ÙˆØµÙ |
|------|------|-------|-------|
| `engineerId` | `string` | âœ… | Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ |

### Response - Ù†Ø¬Ø§Ø­

```json
{
  "success": true,
  "data": {
    "_id": "64profile123",
    "userId": {
      "_id": "64user123",
      "firstName": "Ø£Ø­Ù…Ø¯",
      "lastName": "Ù…Ø­Ù…Ø¯",
      "phone": "777123456",
      "city": "ØµÙ†Ø¹Ø§Ø¡"
    },
    "bio": "Ù…Ù‡Ù†Ø¯Ø³ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ Ù…Ø­ØªØ±Ù",
    "avatarUrl": "https://cdn.example.com/avatars/engineer123.jpg",
    "whatsappNumber": "967711234567",
    "jobTitle": "Ù…Ù‡Ù†Ø¯Ø³ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ",
    "specialties": ["Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ", "ÙƒÙ‡Ø±Ø¨Ø§Ø¡"],
    "yearsOfExperience": 10,
    "totalRatings": 25,
    "averageRating": 4.8,
    "ratingDistribution": [15, 5, 3, 1, 1],
    "totalCompletedServices": 50
  },
  "requestId": "req_123"
}
```

> âš ï¸ **Ù…Ù„Ø§Ø­Ø¸Ø©**: Ù‡Ø°Ø§ Ø§Ù„Ù€ endpoint Ù„Ø§ ÙŠÙØ±Ø¬Ø¹ `walletBalance` Ùˆ `commissionTransactions` Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ù†ÙŠØ©

### Response - ÙØ´Ù„ (Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯)

```json
{
  "success": true,
  "data": {
    "message": "Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"
  },
  "requestId": "req_123"
}
```

### ÙƒÙˆØ¯ Flutter

```dart
Future<EngineerProfile?> getEngineerProfile(String engineerId) async {
  try {
    final response = await _dio.get('/engineers/profile/$engineerId');
    
    if (response.data['success'] == true) {
      final data = response.data['data'];
      
      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£
      if (data['message'] != null) {
        return null;
      }
      
      return EngineerProfile.fromJson(data);
    }
    
    return null;
  } on DioException catch (e) {
    throw Exception('ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„: ${e.message}');
  }
}
```

---

## 4. Ø¬Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ø¯Ø¯

Ø¬Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ø¯Ø¯ Ù…Ø¹ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµÙÙŠØ© ÙˆØ§Ù„ØªØ±ØªÙŠØ¨.

### Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨

- **Method:** `GET`
- **Endpoint:** `/engineers/profile/:engineerId/ratings`
- **Auth Required:** âŒ Ù„Ø§

### Query Parameters

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ù…Ø·Ù„ÙˆØ¨ | Ø§Ù„ÙˆØµÙ |
|------|------|-------|-------|
| `page` | `number` | âŒ | Ø±Ù‚Ù… Ø§Ù„ØµÙØ­Ø© (Ø§ÙØªØ±Ø§Ø¶ÙŠ: 1) |
| `limit` | `number` | âŒ | Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„ØµÙØ­Ø© (Ø§ÙØªØ±Ø§Ø¶ÙŠ: 10ØŒ Ø­Ø¯ Ø£Ù‚ØµÙ‰: 50) |
| `sortBy` | `string` | âŒ | Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ±ØªÙŠØ¨: `recent` (Ø§Ù„Ø£Ø­Ø¯Ø«), `top` (Ø§Ù„Ø£Ø¹Ù„Ù‰), `oldest` (Ø§Ù„Ø£Ù‚Ø¯Ù…) (Ø§ÙØªØ±Ø§Ø¶ÙŠ: `recent`) |
| `minScore` | `number` | âŒ | Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ù†Ø¬ÙˆÙ… (1-5) |

### Response - Ù†Ø¬Ø§Ø­

```json
{
  "success": true,
  "data": {
    "ratings": [
      {
        "score": 5,
        "comment": "Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø© ÙˆÙ…Ù‡Ù†Ø¯Ø³ Ù…Ø­ØªØ±Ù Ø¬Ø¯Ø§Ù‹. Ø£Ù†ØµØ­ Ø¨Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡.",
        "customerId": "64customer123",
        "customerName": "Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯",
        "serviceRequestId": "64service123",
        "ratedAt": "2025-10-15T10:30:00.000Z"
      },
      {
        "score": 4,
        "comment": "Ø¹Ù…Ù„ Ø¬ÙŠØ¯ ÙˆØ³Ø±ÙŠØ¹",
        "customerId": "64customer456",
        "customerName": "Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ",
        "serviceRequestId": "64service456",
        "ratedAt": "2025-10-14T15:20:00.000Z"
      }
    ],
    "total": 25,
    "page": 1,
    "limit": 10,
    "averageRating": 4.8,
    "totalRatings": 25
  },
  "requestId": "req_123"
}
```

### ÙƒÙˆØ¯ Flutter

```dart
Future<RatingsResponse> getEngineerRatings({
  required String engineerId,
  int page = 1,
  int limit = 10,
  String sortBy = 'recent',
  int? minScore,
}) async {
  final queryParams = <String, dynamic>{
    'page': page,
    'limit': limit,
    'sortBy': sortBy,
  };
  
  if (minScore != null) {
    queryParams['minScore'] = minScore;
  }
  
  try {
    final response = await _dio.get(
      '/engineers/profile/$engineerId/ratings',
      queryParameters: queryParams,
    );
    
    if (response.data['success'] == true) {
      return RatingsResponse.fromJson(response.data['data']);
    }
    
    throw Exception('ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª');
  } on DioException catch (e) {
    throw Exception('ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª: ${e.message}');
  }
}
```

---

## 5. Ø¬Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ

Ø¬Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ (Ù†ÙØ³ Ø§Ù„Ù€ endpoint Ø§Ù„Ø³Ø§Ø¨Ù‚ Ù„ÙƒÙ† Ù„Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ).

### Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨

- **Method:** `GET`
- **Endpoint:** `/engineers/profile/me/ratings`
- **Auth Required:** âœ… Ù†Ø¹Ù… (Engineer ÙÙ‚Ø·)

### Query Parameters

Ù†ÙØ³ Ø§Ù„Ù€ query parameters ÙÙŠ [Ø¬Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ø¯Ø¯](#4-Ø¬Ù„Ø¨-ØªÙ‚ÙŠÙŠÙ…Ø§Øª-Ù…Ù‡Ù†Ø¯Ø³-Ù…Ø­Ø¯Ø¯)

### Response - Ù†Ø¬Ø§Ø­

Ù†ÙØ³ Ø§Ù„Ù€ response ÙÙŠ [Ø¬Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ø¯Ø¯](#4-Ø¬Ù„Ø¨-ØªÙ‚ÙŠÙŠÙ…Ø§Øª-Ù…Ù‡Ù†Ø¯Ø³-Ù…Ø­Ø¯Ø¯)

### ÙƒÙˆØ¯ Flutter

```dart
Future<RatingsResponse> getMyRatings({
  int page = 1,
  int limit = 10,
  String sortBy = 'recent',
  int? minScore,
}) async {
  final queryParams = <String, dynamic>{
    'page': page,
    'limit': limit,
    'sortBy': sortBy,
  };
  
  if (minScore != null) {
    queryParams['minScore'] = minScore;
  }
  
  try {
    final response = await _dio.get(
      '/engineers/profile/me/ratings',
      queryParameters: queryParams,
    );
    
    if (response.data['success'] == true) {
      return RatingsResponse.fromJson(response.data['data']);
    }
    
    throw Exception('ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª');
  } on DioException catch (e) {
    if (e.response?.statusCode == 401) {
      throw UnauthorizedException('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
    }
    throw Exception('ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª: ${e.message}');
  }
}
```

---

## Models ÙÙŠ Flutter

### EngineerProfile Model

```dart
class EngineerProfile {
  final String id;
  final UserInfo? userId;
  final String? bio;
  final String? avatarUrl;
  final String? whatsappNumber;
  final String? cvFileUrl;
  final String? jobTitle;
  final List<String>? specialties;
  final int? yearsOfExperience;
  final List<String>? certifications;
  final UserProfileInfo? user; // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ù† User
  final CouponInfo? coupon; // Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„Ù…Ø±ØªØ¨Ø·
  final List<EngineerRating> ratings;
  final int totalRatings;
  final double averageRating;
  final List<int> ratingDistribution; // [5Ù†Ø¬ÙˆÙ…, 4Ù†Ø¬ÙˆÙ…, 3Ù†Ø¬ÙˆÙ…, 2Ù†Ø¬ÙˆÙ…, 1Ù†Ø¬Ù…Ø©]
  final int totalCompletedServices;
  final double totalEarnings;
  final double walletBalance; // ÙÙ‚Ø· ÙÙŠ /me
  final List<CommissionTransaction> commissionTransactions; // ÙÙ‚Ø· ÙÙŠ /me
  final DateTime createdAt;
  final DateTime updatedAt;

  EngineerProfile({
    required this.id,
    this.userId,
    this.bio,
    this.avatarUrl,
    this.whatsappNumber,
    this.cvFileUrl,
    this.jobTitle,
    this.specialties,
    this.yearsOfExperience,
    this.certifications,
    this.user,
    this.coupon,
    required this.ratings,
    required this.totalRatings,
    required this.averageRating,
    required this.ratingDistribution,
    required this.totalCompletedServices,
    required this.totalEarnings,
    this.walletBalance = 0,
    this.commissionTransactions = const [],
    required this.createdAt,
    required this.updatedAt,
  });

  factory EngineerProfile.fromJson(Map<String, dynamic> json) {
    return EngineerProfile(
      id: json['_id'] ?? json['id'] ?? '',
      userId: json['userId'] != null && json['userId'] is Map
          ? UserInfo.fromJson(json['userId'])
          : null,
      bio: json['bio'],
      avatarUrl: json['avatarUrl'],
      whatsappNumber: json['whatsappNumber'],
      cvFileUrl: json['cvFileUrl'],
      jobTitle: json['jobTitle'],
      specialties: json['specialties'] != null
          ? List<String>.from(json['specialties'])
          : null,
      yearsOfExperience: json['yearsOfExperience'],
      certifications: json['certifications'] != null
          ? List<String>.from(json['certifications'])
          : null,
      user: json['user'] != null
          ? UserProfileInfo.fromJson(json['user'])
          : null,
      coupon: json['coupon'] != null
          ? CouponInfo.fromJson(json['coupon'])
          : null,
      ratings: json['ratings'] != null
          ? (json['ratings'] as List)
              .map((r) => EngineerRating.fromJson(r))
              .toList()
          : [],
      totalRatings: json['totalRatings'] ?? 0,
      averageRating: (json['averageRating'] ?? 0).toDouble(),
      ratingDistribution: json['ratingDistribution'] != null
          ? List<int>.from(json['ratingDistribution'])
          : [0, 0, 0, 0, 0],
      totalCompletedServices: json['totalCompletedServices'] ?? 0,
      totalEarnings: (json['totalEarnings'] ?? 0).toDouble(),
      walletBalance: (json['walletBalance'] ?? 0).toDouble(),
      commissionTransactions: json['commissionTransactions'] != null
          ? (json['commissionTransactions'] as List)
              .map((t) => CommissionTransaction.fromJson(t))
              .toList()
          : [],
      createdAt: DateTime.parse(json['createdAt']),
      updatedAt: DateTime.parse(json['updatedAt']),
    );
  }

  Map<String, dynamic> toJson() {
    return {
      '_id': id,
      'userId': userId?.toJson(),
      'bio': bio,
      'avatarUrl': avatarUrl,
      'whatsappNumber': whatsappNumber,
      'cvFileUrl': cvFileUrl,
      'jobTitle': jobTitle,
      'specialties': specialties,
      'yearsOfExperience': yearsOfExperience,
      'certifications': certifications,
      'user': user?.toJson(),
      'coupon': coupon?.toJson(),
      'ratings': ratings.map((r) => r.toJson()).toList(),
      'totalRatings': totalRatings,
      'averageRating': averageRating,
      'ratingDistribution': ratingDistribution,
      'totalCompletedServices': totalCompletedServices,
      'totalEarnings': totalEarnings,
      'walletBalance': walletBalance,
      'commissionTransactions':
          commissionTransactions.map((t) => t.toJson()).toList(),
      'createdAt': createdAt.toIso8601String(),
      'updatedAt': updatedAt.toIso8601String(),
    };
  }
}

class UserInfo {
  final String id;
  final String? firstName;
  final String? lastName;
  final String? phone;
  final String? city;

  UserInfo({
    required this.id,
    this.firstName,
    this.lastName,
    this.phone,
    this.city,
  });

  factory UserInfo.fromJson(Map<String, dynamic> json) {
    return UserInfo(
      id: json['_id'] ?? json['id'] ?? '',
      firstName: json['firstName'],
      lastName: json['lastName'],
      phone: json['phone'],
      city: json['city'],
    );
  }

  Map<String, dynamic> toJson() {
    return {
      '_id': id,
      'firstName': firstName,
      'lastName': lastName,
      'phone': phone,
      'city': city,
    };
  }

  String get fullName {
    return '${firstName ?? ''} ${lastName ?? ''}'.trim();
  }
}

class UserProfileInfo {
  final String? gender;
  final String? status;
  final String? engineer_status;

  UserProfileInfo({
    this.gender,
    this.status,
    this.engineer_status,
  });

  factory UserProfileInfo.fromJson(Map<String, dynamic> json) {
    return UserProfileInfo(
      gender: json['gender'],
      status: json['status'],
      engineer_status: json['engineer_status'],
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'gender': gender,
      'status': status,
      'engineer_status': engineer_status,
    };
  }
}

class CouponInfo {
  final String code;
  final String name;
  final String? description;
  final double? discountValue;
  final String? type;
  final double? commissionRate;

  CouponInfo({
    required this.code,
    required this.name,
    this.description,
    this.discountValue,
    this.type,
    this.commissionRate,
  });

  factory CouponInfo.fromJson(Map<String, dynamic> json) {
    return CouponInfo(
      code: json['code'] ?? '',
      name: json['name'] ?? '',
      description: json['description'],
      discountValue: json['discountValue'] != null
          ? (json['discountValue'] as num).toDouble()
          : null,
      type: json['type'],
      commissionRate: json['commissionRate'] != null
          ? (json['commissionRate'] as num).toDouble()
          : null,
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'code': code,
      'name': name,
      'description': description,
      'discountValue': discountValue,
      'type': type,
      'commissionRate': commissionRate,
    };
  }
}
```

### EngineerRating Model

```dart
class EngineerRating {
  final int score; // 1-5
  final String comment;
  final String customerId;
  final String? customerName;
  final String? serviceRequestId;
  final String? orderId;
  final DateTime ratedAt;

  EngineerRating({
    required this.score,
    required this.comment,
    required this.customerId,
    this.customerName,
    this.serviceRequestId,
    this.orderId,
    required this.ratedAt,
  });

  factory EngineerRating.fromJson(Map<String, dynamic> json) {
    return EngineerRating(
      score: json['score'] ?? 0,
      comment: json['comment'] ?? '',
      customerId: json['customerId'] is String
          ? json['customerId']
          : json['customerId']?['_id'] ?? json['customerId']?.toString() ?? '',
      customerName: json['customerName'],
      serviceRequestId: json['serviceRequestId'] is String
          ? json['serviceRequestId']
          : json['serviceRequestId']?['_id'] ?? json['serviceRequestId']?.toString(),
      orderId: json['orderId'] is String
          ? json['orderId']
          : json['orderId']?['_id'] ?? json['orderId']?.toString(),
      ratedAt: DateTime.parse(json['ratedAt']),
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'score': score,
      'comment': comment,
      'customerId': customerId,
      'customerName': customerName,
      'serviceRequestId': serviceRequestId,
      'orderId': orderId,
      'ratedAt': ratedAt.toIso8601String(),
    };
  }
}
```

### CommissionTransaction Model

```dart
class CommissionTransaction {
  final String transactionId;
  final String type; // 'commission' | 'withdrawal' | 'refund'
  final double amount;
  final String? orderId;
  final String? couponCode;
  final String? description;
  final DateTime createdAt;

  CommissionTransaction({
    required this.transactionId,
    required this.type,
    required this.amount,
    this.orderId,
    this.couponCode,
    this.description,
    required this.createdAt,
  });

  factory CommissionTransaction.fromJson(Map<String, dynamic> json) {
    return CommissionTransaction(
      transactionId: json['transactionId'] ?? '',
      type: json['type'] ?? '',
      amount: (json['amount'] ?? 0).toDouble(),
      orderId: json['orderId'] is String
          ? json['orderId']
          : json['orderId']?['_id'] ?? json['orderId']?.toString(),
      couponCode: json['couponCode'],
      description: json['description'],
      createdAt: DateTime.parse(json['createdAt']),
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'transactionId': transactionId,
      'type': type,
      'amount': amount,
      'orderId': orderId,
      'couponCode': couponCode,
      'description': description,
      'createdAt': createdAt.toIso8601String(),
    };
  }
}
```

### RatingsResponse Model

```dart
class RatingsResponse {
  final List<EngineerRating> ratings;
  final int total;
  final int page;
  final int limit;
  final double averageRating;
  final int totalRatings;

  RatingsResponse({
    required this.ratings,
    required this.total,
    required this.page,
    required this.limit,
    required this.averageRating,
    required this.totalRatings,
  });

  factory RatingsResponse.fromJson(Map<String, dynamic> json) {
    return RatingsResponse(
      ratings: json['ratings'] != null
          ? (json['ratings'] as List)
              .map((r) => EngineerRating.fromJson(r))
              .toList()
          : [],
      total: json['total'] ?? 0,
      page: json['page'] ?? 1,
      limit: json['limit'] ?? 10,
      averageRating: (json['averageRating'] ?? 0).toDouble(),
      totalRatings: json['totalRatings'] ?? 0,
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'ratings': ratings.map((r) => r.toJson()).toList(),
      'total': total,
      'page': page,
      'limit': limit,
      'averageRating': averageRating,
      'totalRatings': totalRatings,
    };
  }
}
```

---

## ğŸ”— Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰

### 1. Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø®Ø¯Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ©

Ø¹Ù†Ø¯ ØªÙ‚ÙŠÙŠÙ… Ø®Ø¯Ù…Ø© (Ø¹Ø¨Ø± `/services/customer/:id/rate`):
- ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙÙŠ `ServiceRequest.rating`
- ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù„Ù‰ `EngineerProfile.ratings`
- ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ `averageRating` Ùˆ `ratingDistribution` ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

> ğŸ“– **Ù„Ù„Ù…Ø²ÙŠØ¯**: Ø±Ø§Ø¬Ø¹ [Ø®Ø¯Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ©](./14-services-service.md#8-ØªÙ‚ÙŠÙŠÙ…-Ø§Ù„Ø®Ø¯Ù…Ø©)

### 2. Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª

Ø¹Ù†Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙˆØ¨ÙˆÙ† Ù…Ù‡Ù†Ø¯Ø³:
- ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ø¥Ù„Ù‰ `walletBalance` ÙÙŠ `EngineerProfile`
- ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„ ÙÙŠ `commissionTransactions`

> ğŸ“– **Ù„Ù„Ù…Ø²ÙŠØ¯**: Ø±Ø§Ø¬Ø¹ [Ø®Ø¯Ù…Ø© Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª](./12-coupons-service.md)

### 3. Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØ«ÙŠÙ‚

Ø¹Ù†Ø¯ Ø±ÙØ¹ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© (Ø¹Ø¨Ø± `/users/verification/submit`):
- ÙŠØªÙ… Ø­ÙØ¸ `cvFileUrl` ÙÙŠ `EngineerProfile`

> ğŸ“– **Ù„Ù„Ù…Ø²ÙŠØ¯**: Ø±Ø§Ø¬Ø¹ [Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©](./02-auth-service.md)

> â„¹ï¸ **Ù…Ù„Ø§Ø­Ø¸Ø©**: ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ« `jobTitle` Ø¹Ø¨Ø± endpoint ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ (`/engineers/profile/me`)

---

## ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©

### âœ… Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª

1. **Ø§Ø³ØªØ®Ø¯Ù… `/me` endpoints** Ù„Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø£Ø³Ø±Ø¹ ÙˆØ£ÙƒØ«Ø± Ø£Ù…Ø§Ù†Ø§Ù‹)
2. **Ø§Ø­ÙØ¸ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ù…Ø­Ù„ÙŠØ§Ù‹** Ù„ØªÙ‚Ù„ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
3. **Ø§Ø³ØªØ®Ø¯Ù… Pagination** Ø¹Ù†Ø¯ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
4. **Ø§Ø³ØªØ®Ø¯Ù… Filters** (`minScore`, `sortBy`) Ù„ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
5. **Ø¹Ø±Ø¶ `ratingDistribution`** Ø¨ØµØ±ÙŠØ§Ù‹ (Ù…Ø«Ù„ Ø´Ø±ÙŠØ· ØªÙ‚Ø¯Ù…)

### âš ï¸ ØªØ­Ø°ÙŠØ±Ø§Øª

1. **`walletBalance` Ùˆ `commissionTransactions`** Ù…ØªØ§Ø­Ø© ÙÙ‚Ø· ÙÙŠ `/me` endpoint
2. **Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª ØªØªØ²Ø§Ù…Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹** - Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù…Ø²Ø§Ù…Ù†Ø© ÙŠØ¯ÙˆÙŠØ©
3. **Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ Ù…Ø·Ù„ÙˆØ¨** Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ… (Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ… Ø¨Ø¯ÙˆÙ† Ù†Øµ)
4. **Ø§Ù„Ù†Ø¬ÙˆÙ… Ù…Ù† 1-5** ÙÙ‚Ø·

---

## ğŸ“Š Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Ù…Ø«Ø§Ù„ 1: Ø¹Ø±Ø¶ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³

```dart
class EngineerProfileScreen extends StatefulWidget {
  final String engineerId;
  
  const EngineerProfileScreen({required this.engineerId});
  
  @override
  _EngineerProfileScreenState createState() => _EngineerProfileScreenState();
}

class _EngineerProfileScreenState extends State<EngineerProfileScreen> {
  EngineerProfile? _profile;
  bool _loading = true;

  @override
  void initState() {
    super.initState();
    _loadProfile();
  }

  Future<void> _loadProfile() async {
    try {
      final profile = await engineerProfileService.getEngineerProfile(
        widget.engineerId,
      );
      setState(() {
        _profile = profile;
        _loading = false;
      });
    } catch (e) {
      setState(() => _loading = false);
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„: $e')),
      );
    }
  }

  @override
  Widget build(BuildContext context) {
    if (_loading) {
      return Scaffold(
        body: Center(child: CircularProgressIndicator()),
      );
    }

    if (_profile == null) {
      return Scaffold(
        body: Center(child: Text('Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯')),
      );
    }

    return Scaffold(
      appBar: AppBar(title: Text('Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³')),
      body: SingleChildScrollView(
        child: Column(
          children: [
            // Ø§Ù„Ø£ÙØ§ØªØ§Ø± ÙˆØ§Ù„Ø§Ø³Ù…
            CircleAvatar(
              radius: 50,
              backgroundImage: _profile!.avatarUrl != null
                  ? NetworkImage(_profile!.avatarUrl!)
                  : null,
              child: _profile!.avatarUrl == null
                  ? Icon(Icons.person, size: 50)
                  : null,
            ),
            SizedBox(height: 16),
            Text(
              _profile!.userId?.fullName ?? 'Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…',
              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            if (_profile!.jobTitle != null)
              Text(
                _profile!.jobTitle!,
                style: TextStyle(fontSize: 16, color: Colors.grey),
              ),
            
            // Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
            Row(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                Icon(Icons.star, color: Colors.amber),
                SizedBox(width: 8),
                Text(
                  '${_profile!.averageRating.toStringAsFixed(1)}',
                  style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
                ),
                SizedBox(width: 8),
                Text(
                  '(${_profile!.totalRatings} ØªÙ‚ÙŠÙŠÙ…)',
                  style: TextStyle(fontSize: 16, color: Colors.grey),
                ),
              ],
            ),
            
            // Ø§Ù„Ù†Ø¨Ø°Ø©
            if (_profile!.bio != null)
              Padding(
                padding: EdgeInsets.all(16),
                child: Text(
                  _profile!.bio!,
                  style: TextStyle(fontSize: 16),
                ),
              ),
            
            // Ø§Ù„ØªØ®ØµØµØ§Øª
            if (_profile!.specialties != null && _profile!.specialties!.isNotEmpty)
              Wrap(
                spacing: 8,
                children: _profile!.specialties!
                    .map((s) => Chip(label: Text(s)))
                    .toList(),
              ),
            
            // Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
            Divider(),
            Text(
              'Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª',
              style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
            ),
            _buildRatingsList(),
          ],
        ),
      ),
    );
  }

  Widget _buildRatingsList() {
    // ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… RatingsResponse Ù‡Ù†Ø§
    return FutureBuilder<RatingsResponse>(
      future: engineerProfileService.getEngineerRatings(
        engineerId: widget.engineerId,
        limit: 10,
      ),
      builder: (context, snapshot) {
        if (snapshot.connectionState == ConnectionState.waiting) {
          return CircularProgressIndicator();
        }
        
        if (snapshot.hasError) {
          return Text('ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª');
        }
        
        final ratings = snapshot.data?.ratings ?? [];
        
        return ListView.builder(
          shrinkWrap: true,
          physics: NeverScrollableScrollPhysics(),
          itemCount: ratings.length,
          itemBuilder: (context, index) {
            final rating = ratings[index];
            return ListTile(
              leading: CircleAvatar(
                child: Text(rating.customerName?[0] ?? 'Ø¹'),
              ),
              title: Text(rating.customerName ?? 'Ø¹Ù…ÙŠÙ„'),
              subtitle: Text(rating.comment),
              trailing: Row(
                mainAxisSize: MainAxisSize.min,
                children: List.generate(
                  5,
                  (i) => Icon(
                    i < rating.score ? Icons.star : Icons.star_border,
                    color: Colors.amber,
                    size: 16,
                  ),
                ),
              ),
            );
          },
        );
      },
    );
  }
}
```

### Ù…Ø«Ø§Ù„ 2: ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„

```dart
Future<void> updateProfile() async {
  try {
    final updatedProfile = await engineerProfileService.updateMyProfile(
      bio: 'Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­ØªØ±Ù Ù…Ø¹ Ø®Ø¨Ø±Ø© ÙˆØ§Ø³Ø¹Ø©',
      whatsappNumber: '967711234567',
      jobTitle: 'Ù…Ù‡Ù†Ø¯Ø³ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ',
      specialties: ['Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ', 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡'],
      yearsOfExperience: 10,
    );
    
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­')),
    );
  } catch (e) {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text('ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„: $e')),
    );
  }
}
```

---

## ğŸ” Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©

| Ø§Ù„ÙƒÙˆØ¯ | Ø§Ù„Ø±Ø³Ø§Ù„Ø© | Ø§Ù„ÙˆØµÙ |
|------|--------|-------|
| `AUTH_001` | ØºÙŠØ± Ù…ØµØ±Ø­ | ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ù‡Ù†Ø¯Ø³ |
| `AUTH_002` | ØºÙŠØ± Ù…ØµØ±Ø­ - ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ù‡Ù†Ø¯Ø³Ø§Ù‹ | Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ÙŠØ³ Ù…Ù‡Ù†Ø¯Ø³Ø§Ù‹ |
| `GENERAL_004` | Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª | Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø© (validation error) |

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©

### Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„

- **Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª ØªØªØ²Ø§Ù…Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹**: Ø¹Ù†Ø¯ ØªÙ‚ÙŠÙŠÙ… Ø®Ø¯Ù…Ø©ØŒ ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù„Ù‰ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³
- **Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±**: Ø¥Ø°Ø§ ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…ØŒ ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙŠØ¯
- **Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ**: ÙŠØªÙ… Ø­Ø³Ø§Ø¨ `averageRating` Ùˆ `ratingDistribution` ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

### Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ØµÙŠØ¯ ÙˆØ§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª

- **Ø§Ù„Ø±ØµÙŠØ¯**: `walletBalance` ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ù…Ù‡Ù†Ø¯Ø³
- **Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª**: `commissionTransactions` ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø³Ø¬Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
- **Ø§Ù„Ù…ØµØ¯Ø±**: Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª ØªØ£ØªÙŠ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙˆØ¨ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³

### Ø§Ù„ÙØµÙ„ Ø¨ÙŠÙ† Schemas

- **`User` schema**: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
- **`EngineerProfile` schema**: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª ÙˆØ§Ù„Ø±ØµÙŠØ¯
- **Ù„Ø§ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„**: Ø§Ù„ÙØµÙ„ Ø§Ù„ÙƒØ§Ù…Ù„ ÙŠØ¶Ù…Ù† Ø¹Ø¯Ù… ØªØ£Ø«Ø± Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** Ù†ÙˆÙÙ…Ø¨Ø± 2025  
**Ø§Ù„Ù†Ø³Ø®Ø©:** 1.0.0

