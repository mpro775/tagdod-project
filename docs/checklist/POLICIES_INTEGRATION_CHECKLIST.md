# ✅ Policies Module Integration Checklist

> قائمة تحقق عملية لضمان تكامل واجهات سياسات الموقع (الأحكام والشروط، الخصوصية) داخل التطبيقات الخاصة بالمستخدمين والمهندسين والتجار، مع استثناء كامل لواجهات الإدارة.

## كيفية الاستخدام
- تتبع العناصر أدناه أثناء تجهيز أو اختبار التكامل في البيئات المختلفة.
- استخدم خانات الملاحظات لتوثيق النتائج أو المشاكل.
- عند الانتهاء من القسم، ضع علامة ✔️ على كل عنصر مستوفى.

---

## 1. التحضير العام
- [ ] التأكد من نشر `PoliciesModule` ضمن الـ backend في البيئة المستهدفة.
- [ ] تفعيل التوجيه في واجهة المستخدم للوصول إلى صفحات السياسات.
- [ ] تجهيز محتوى عربي وإنجليزي محدث في قاعدة البيانات (أو عبر لوحة التحكم قبل بدء الاختبارات).
- [ ] التأكد من أن خدمات الكاش (إن وُجدت) مهيأة لإعادة تحميل السياسات عند التحديث.

ملاحظات:

---

## 2. نظرة عامة على المسارات العامة

| المسار | الوصف | يتطلب JWT | ملاحظات |
|--------|-------|------------|---------|
| `GET /api/v1/policies/public/terms` | جلب سياسة الأحكام والشروط النشطة | لا | يعيد الحقول العربية والإنجليزية |
| `GET /api/v1/policies/public/privacy` | جلب سياسة الخصوصية النشطة | لا | يفلتر غير النشطة |
| `GET /api/v1/policies/public/:type` | جلب سياسة حسب النوع (`terms`, `privacy`) | لا | يعيد 404 إذا لم تكن نشطة |

> جميع المسارات العامة مفتوحة دون مصادقة، وتعود فقط بالسياسات المفعلة (`isActive=true`).

---

## 3. التحقق المشترك (جميع الأدوار)
- [ ] التأكد من أن كل مسار يعيد سياسة نشطة فقط، مع رسالة واضحة عند عدم وجود سياسة مفعلة.
- [ ] مراقبة الاستجابة للتأكد من وجود الحقول: `titleAr`, `titleEn`, `contentAr`, `contentEn`, `isActive`.
- [ ] اختبار تفعيل/تعطيل سياسة من جهة الإدارة (مرة واحدة) والتأكد من انعكاس النتيجة في المسار العام بعد إبطال الكاش (إن وُجد).
- [ ] التأكد من أن المحتوى HTML يُعرض بشكل صحيح على الواجهات، مع تعقيم أو تحويل آمن عند الحاجة.
- [ ] اختبار التبديل بين اللغتين في الواجهة والتأكد من تحميل النص المناسب.

ملاحظات:

---

## 4. المستخدمون النهائيون (Users)
- [ ] عرض صفحة الأحكام والشروط داخل التطبيق/الموقع والتحقق من تحميل المحتوى كاملاً بالعربية والإنجليزية.
- [ ] التأكد من أن الروابط الداخلية (إن وجدت داخل HTML) تعمل ولا تُعيد التوجيه لأماكن خاطئة.
- [ ] مراقبة تحليلات الاستخدام (إن وجدت) للتأكد من تسجيل زيارات صفحة السياسة.
- [ ] تجربة تحميل السياسة عندما تكون غير مفعلة (بعد التعطيل من لوحة التحكم) والتأكد من ظهور رسالة مناسبة للمستخدم.

ملاحظات:

---

## 5. المهندسون (Engineers)
- [ ] التأكد من أن المهندس يرى نفس سياسات المستخدم النهائي دون اختلاف في المسار أو المحتوى.
- [ ] اختبار عرض السياسات داخل تطبيق المهندس (إن وجدت صفحات مخصصة) والتحقق من الالتزام باللغة المختارة.
- [ ] التأكد من أن أي روابط داخلية تشير إلى مستندات أو صفحات أخرى تعمل في واجهة المهندس.

ملاحظات:

---

## 6. التجار (Merchants)
- [ ] اختبار عرض السياسات في لوحة التاجر أو تطبيقه والتأكد من استخدام نفس المسارات العامة.
- [ ] مراجعة أن التاجر يمكنه الوصول إلى النسخة الإنجليزية والعربية بنفس الطريقة.
- [ ] التأكد من ظهور التحديثات الجديدة للسياسات بشكل فوري بعد نشرها (أو بعد مدة الكاش المحددة).

ملاحظات:

---

## 7. التكامل مع الواجهة الأمامية
- [ ] التأكد من أن الواجهة الأمامية تستخدم نفس الـ API لجميع الأدوار دون الحاجة إلى صلاحيات خاصة.
- [ ] اختبار معالجة المحتوى HTML (rendering) بحيث لا يتم عرض علامات HTML خام.
- [ ] التحقق من أن مكوّنات الواجهة تدعم النصوص الطويلة، القوائم، والجداول المحتملة في السياسات.
- [ ] التأكد من أن صفحة السياسات تظهر ضمن قوائم التطبيق (footer، الإعدادات، التسجيل، إلخ).

ملاحظات:

---

## 8. الاستقرار والمراقبة
- [ ] مراقبة السجلات للتأكد من عدم وجود أخطاء عند جلب السياسات (مثلاً: Missing policy, DB errors).
- [ ] إعداد تنبيه في حال فشل المسارات أو استرجاع استجابة فارغة (قد يدل على تعطيل غير مقصود).
- [ ] مراقبة الأداء عند تحميل محتوى HTML طويل، والتأكد من استجابة سريعة.

ملاحظات:

---

## 9. متطلبات ما بعد التشغيل
- [ ] تحديث دليل فرق المحتوى/القانون للتأكد من عملية نشر السياسات والتأكد من ظهورها للمستخدمين.
- [ ] مشاركة نتائج الاختبارات مع فرق الدعم لتوجيه المستخدمين عند الاستفسار عن الشروط.
- [ ] جدولة مراجعة دورية (مثلاً ربع سنوية) لمحتوى السياسات والتأكد من مطابقتها للتغييرات القانونية.

ملاحظات:

---

**عند إتمام هذه العناصر يمكن اعتماد تكامل وحدة السياسات بثقة عبر جميع الواجهات.**

