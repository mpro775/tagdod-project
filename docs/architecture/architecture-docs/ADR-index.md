# ๐ ุณุฌู ุงููุฑุงุฑุงุช ุงููุนูุงุฑูุฉ (Architecture Decision Records)

## ูุง ูู ADRุ
**ADR (Architecture Decision Record)** ูู ูุซููุฉ ุชุณุฌู ูุฑุงุฑุงู ูุนูุงุฑูุงู ูููุงูุ ุชุชุถูู:
- ุงูุณูุงู (ููุงุฐุง ูุญุชุงุฌ ูุฐุง ุงููุฑุงุฑุ)
- ุงููุฑุงุฑ (ูุงุฐุง ูุฑุฑูุงุ)
- ุงูุจุฏุงุฆู ุงููุฏุฑูุณุฉ
- ุงูุนูุงูุจ (ุงูุฅูุฌุงุจูุฉ ูุงูุณูุจูุฉ)

---

## ๐ ูุงุฆูุฉ ุงููุฑุงุฑุงุช ุงููุนูุงุฑูุฉ

### [ADR-001] ุงุณุชุฎุฏุงู NestJS ูุฅุทุงุฑ ุนูู ููู Backend
**ุงูุญุงูุฉ:** โ ููุจูู  
**ุงูุชุงุฑูุฎ:** 2025-10-01

#### ุงูุณูุงู
ูุญุชุงุฌ ุฅูู ุงุฎุชูุงุฑ ุฅุทุงุฑ ุนูู ูุจูุงุก REST API ููููุตุฉ.

#### ุงููุฑุงุฑ
ุงุณุชุฎุฏุงู **NestJS** ูุน TypeScript.

#### ุงูุจุฏุงุฆู ุงููุฏุฑูุณุฉ
1. **Express.js** - ุจุณูุท ููู ูุญุชุงุฌ ูุจูุงุก ุงููุซูุฑ ูู ุงูุฃุดูุงุก ูู ุงูุตูุฑ
2. **Fastify** - ุณุฑูุน ููู ูุธุงูู ุงูุจูุฆู ุฃุตุบุฑ
3. **NestJS** - ูููุธูุ enterprise-readyุ dependency injection
4. **AdonisJS** - ุฌูุฏ ููู ูุฌุชูุนู ุฃุตุบุฑ

#### ุงูุฃุณุจุงุจ
- โ **Architecture**: Modular architecture ูุฏูุฌุฉ
- โ **TypeScript**: ุฏุนู ูุงูู ูู TypeScript
- โ **DI Container**: Dependency Injection ูุฏูุฌ
- โ **Decorators**: Clean code with decorators
- โ **Testing**: ุฃุฏูุงุช ุงุฎุชุจุงุฑ ูุฏูุฌุฉ
- โ **Documentation**: Swagger integration ุณูู
- โ **Scalability**: ุณูู ุงูุชุญููู ุฅูู Microservices
- โ **Community**: ูุฌุชูุน ูุจูุฑ ููุดุท

#### ุงูุนูุงูุจ
- โ **ุฅูุฌุงุจู**: ููุฏ ููุธู ููุงุจู ููุตูุงูุฉ
- โ **ุฅูุฌุงุจู**: ุณูู ููุทูุฑู Angular (ููุงููู ูุดุงุจูุฉ)
- โ๏ธ **ุณูุจู**: Learning curve ุฃุนูู ูู Express
- โ๏ธ **ุณูุจู**: Overhead ุฃูุจุฑ ููููุงู

---

### [ADR-002] ุงุณุชุฎุฏุงู MongoDB ููุงุนุฏุฉ ุจูุงูุงุช ุฑุฆูุณูุฉ
**ุงูุญุงูุฉ:** โ ููุจูู  
**ุงูุชุงุฑูุฎ:** 2025-10-01

#### ุงูุณูุงู
ูุญุชุงุฌ ูุงุฎุชูุงุฑ ูุงุนุฏุฉ ุจูุงูุงุช ููููุตุฉ.

#### ุงููุฑุงุฑ
ุงุณุชุฎุฏุงู **MongoDB** (NoSQL).

#### ุงูุจุฏุงุฆู ุงููุฏุฑูุณุฉ
1. **PostgreSQL** - Relational, ูููุฉ ููู ุฃูู ูุฑููุฉ
2. **MySQL** - Relational, ุดุงุฆุนุฉ
3. **MongoDB** - NoSQL, ูุฑูุฉุ scalable
4. **DynamoDB** - AWS-specific, vendor lock-in

#### ุงูุฃุณุจุงุจ
- โ **Flexibility**: Schema ูุฑู (good ููุชุทููุฑ ุงูุณุฑูุน)
- โ **Scalability**: Sharding ูุฏูุฌ
- โ **JSON**: ูุนูู ุจุดูู ุทุจูุนู ูุน Node.js
- โ **Aggregation**: Pipeline ููู ููุชุญูููุงุช
- โ **Indexing**: Indexes ูุชููุนุฉ (text, geo, compound)
- โ **Atlas**: MongoDB Atlas ุณูู ุงููุดุฑ

#### ุงูุนูุงูุจ
- โ **ุฅูุฌุงุจู**: ุชุทููุฑ ุฃุณุฑุน
- โ **ุฅูุฌุงุจู**: ุณูู ุงูุชูุณุน horizontally
- โ๏ธ **ุณูุจู**: ูุง ููุฌุฏ joins ุญููููุฉ (ูุญุชุงุฌ denormalization)
- โ๏ธ **ุณูุจู**: Transactions ูุญุฏูุฏุฉ (ููู ููุฌูุฏุฉ)

---

### [ADR-003] ุงุณุชุฎุฏุงู JWT ูููุตุงุฏูุฉ
**ุงูุญุงูุฉ:** โ ููุจูู  
**ุงูุชุงุฑูุฎ:** 2025-10-01

#### ุงูุณูุงู
ูุญุชุงุฌ ูุขููุฉ ูุตุงุฏูุฉ ููู API (Web + Mobile).

#### ุงููุฑุงุฑ
ุงุณุชุฎุฏุงู **JWT (JSON Web Tokens)** ูุน **Refresh Tokens**.

#### ุงูุจุฏุงุฆู ุงููุฏุฑูุณุฉ
1. **Session-based** - Server-side sessions
2. **OAuth 2.0** - ูุนูุฏ ููู use case ุงูุจุณูุท
3. **JWT** - Stateless, scalable

#### ุงูุฃุณุจุงุจ
- โ **Stateless**: ูุง ูุญุชุงุฌ ูุชุฎุฒูู sessions ูู server
- โ **Scalability**: ูุนูู ูุน multiple servers
- โ **Mobile-friendly**: ููุงุณุจ ูุชุทุจููุงุช ุงููุงุชู
- โ **Standard**: ูุนูุงุฑ ุตูุงุนู
- โ **Payload**: ูููู ุชุถููู ุจูุงูุงุช ุฅุถุงููุฉ

#### ุงูุชุตููู
```
- Access Token: 15 ุฏูููุฉ (ูู ุงูู memory)
- Refresh Token: 7 ุฃูุงู (ูู Redis)
- ุชุฏููุฑ Refresh Tokens ุนูุฏ ุงูุงุณุชุฎุฏุงู
```

#### ุงูุนูุงูุจ
- โ **ุฅูุฌุงุจู**: Scalable ูุณุฑูุน
- โ **ุฅูุฌุงุจู**: ูุนูู ูุน Load Balancers
- โ๏ธ **ุณูุจู**: ูุง ูููู ุฅูุบุงุก Token ูุจู ุงูุชูุงุฆู (ูุณุชุฎุฏู Refresh Token ููุชุญูู)
- โ๏ธ **ุณูุจู**: ุญุฌู ุงูู header ุฃูุจุฑ

---

### [ADR-004] ุงุณุชุฎุฏุงู Redis ููู Caching ู Rate Limiting
**ุงูุญุงูุฉ:** โ ููุจูู  
**ุงูุชุงุฑูุฎ:** 2025-10-01

#### ุงูุณูุงู
ูุญุชุงุฌ ูู caching layer ู rate limiting.

#### ุงููุฑุงุฑ
ุงุณุชุฎุฏุงู **Redis**.

#### ุงูุจุฏุงุฆู ุงููุฏุฑูุณุฉ
1. **In-Memory Cache** - ุณุฑูุน ููู ูุง ููุดุงุฑู ุจูู instances
2. **Memcached** - ุฌูุฏ ููู ููุฒุงุช ุฃูู
3. **Redis** - Full-featured, ูุฏุนู data structures ูุชููุนุฉ

#### ุงูุฃุณุจุงุจ
- โ **Performance**: ุณุฑูุน ุฌุฏุงู (in-memory)
- โ **Data Structures**: Strings, Lists, Sets, Sorted Sets, Hashes
- โ **TTL**: Expiration ูุฏูุฌ
- โ **Pub/Sub**: ูููู ุงุณุชุฎุฏุงูู ููู real-time
- โ **Atomic Operations**: INCR, DECR ููู rate limiting
- โ **Persistence**: ูููู ุญูุธ ุงูุจูุงูุงุช ุนูู disk

#### ุงูุงุณุชุฎุฏุงูุงุช
- Caching (Products, Categories, User profiles)
- Sessions (Refresh Tokens)
- Rate Limiting (Counters)
- Queue (Background jobs - ูุณุชูุจูุงู)

#### ุงูุนูุงูุจ
- โ **ุฅูุฌุงุจู**: ุชุญุณูู ูุจูุฑ ูู ุงูุฃุฏุงุก
- โ **ุฅูุฌุงุจู**: ุชูููู ุงูุญูู ุนูู MongoDB
- โ๏ธ **ุณูุจู**: ุชูููุฉ ุฅุถุงููุฉ (Redis instance)
- โ๏ธ **ุณูุจู**: ููุทุฉ ูุดู ุฅุถุงููุฉ (ูุญุชุงุฌ monitoring)

---

### [ADR-005] ุงุณุชุฎุฏุงู OTP ุนุจุฑ SMS ูุชุณุฌูู ุงูุฏุฎูู
**ุงูุญุงูุฉ:** โ ููุจูู  
**ุงูุชุงุฑูุฎ:** 2025-10-01

#### ุงูุณูุงู
ูุญุชุงุฌ ูุขููุฉ ุชุณุฌูู ุฏุฎูู ุขููุฉ ูุณููุฉ ููุนููุงุก.

#### ุงููุฑุงุฑ
ุงุณุชุฎุฏุงู **OTP (One-Time Password)** ุนุจุฑ SMS.

#### ุงูุจุฏุงุฆู ุงููุฏุฑูุณุฉ
1. **Username/Password** - ุชูููุฏู ููู ุงููุณุชุฎุฏููู ููุณูู
2. **Social Login** - ุฌูุฏ ููู privacy concerns
3. **Email OTP** - ุจุนุถ ุงููุณุชุฎุฏููู ูุง ูุณุชุฎุฏููู Email
4. **SMS OTP** - ุดุงุฆุน ูู ุงูุณุนูุฏูุฉ

#### ุงูุฃุณุจุงุจ
- โ **User-friendly**: ูุง ุญุงุฌุฉ ูุชุฐูุฑ password
- โ **Security**: OTP ููุณุชุฎุฏู ูุฑุฉ ูุงุญุฏุฉ ููุท
- โ **Phone Verification**: ูุชุญูู ูู ุฑูู ุงููุงุชู ูุจุงุดุฑุฉ
- โ **Local Preference**: ุดุงุฆุน ูู ุงูููุทูุฉ

#### ุงูุชุตููู
```
- OTP: 6 ุฃุฑูุงู
- ูุฏุฉ ุงูุตูุงุญูุฉ: 5 ุฏูุงุฆู
- ูุญุงููุงุช ูุญุฏูุฏุฉ: 3 ูุญุงููุงุช ุฎุงุทุฆุฉ
- Rate Limiting: 3 ุทูุจุงุช ูู 5 ุฏูุงุฆู
```

#### ุงูุนูุงูุจ
- โ **ุฅูุฌุงุจู**: ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู
- โ **ุฅูุฌุงุจู**: ุฃูุงู ุฌูุฏ
- โ๏ธ **ุณูุจู**: ุชูููุฉ SMS
- โ๏ธ **ุณูุจู**: ูุนุชูุฏ ุนูู ุฎุฏูุฉ SMS ุฎุงุฑุฌูุฉ

---

### [ADR-006] ุงุณุชุฎุฏุงู React ูุน TypeScript ููู Admin Panel
**ุงูุญุงูุฉ:** โ ููุจูู  
**ุงูุชุงุฑูุฎ:** 2025-10-01

#### ุงูุณูุงู
ูุญุชุงุฌ ูุจูุงุก Admin Panel.

#### ุงููุฑุงุฑ
ุงุณุชุฎุฏุงู **React** ูุน **TypeScript** ู **Material-UI**.

#### ุงูุจุฏุงุฆู ุงููุฏุฑูุณุฉ
1. **Vue.js** - ุฌูุฏ ููู ูุธุงู TypeScript ุฃูู ูุถุฌุงู
2. **Angular** - Enterprise-ready ููู ุฃุซูู
3. **Svelte** - ุณุฑูุน ููู ูุธุงูู ุงูุจูุฆู ุตุบูุฑ
4. **React** - ุงูุฃูุซุฑ ุดุนุจูุฉุ ูุธุงู ุจูุฆู ุถุฎู

#### ุงูุฃุณุจุงุจ
- โ **Ecosystem**: ุฃูุจุฑ ูุธุงู ุจูุฆู
- โ **TypeScript**: ุฏุนู ููุชุงุฒ
- โ **Material-UI**: ููููุงุช ุฌุงูุฒุฉ ูุฌูููุฉ
- โ **Community**: ูุฌุชูุน ุถุฎู
- โ **Talent Pool**: ุณูู ุฅูุฌุงุฏ ูุทูุฑูู
- โ **State Management**: ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ (Zustand, Redux)

#### ุงูุนูุงูุจ
- โ **ุฅูุฌุงุจู**: ุชุทููุฑ ุณุฑูุน
- โ **ุฅูุฌุงุจู**: ููููุงุช ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- โ๏ธ **ุณูุจู**: Bundle size ุฃูุจุฑ ููููุงู

---

### [ADR-007] ุงุณุชุฎุฏุงู Modular Monolith ุจุฏูุงู ูู Microservices
**ุงูุญุงูุฉ:** โ ููุจูู  
**ุงูุชุงุฑูุฎ:** 2025-10-01

#### ุงูุณูุงู
ูุญุชุงุฌ ูุชุญุฏูุฏ ูุนูุงุฑูุฉ ุงููุธุงู.

#### ุงููุฑุงุฑ
ุงูุจุฏุก ุจู **Modular Monolith** ูุงุจู ููุชุญููู ุฅูู Microservices.

#### ุงูุจุฏุงุฆู ุงููุฏุฑูุณุฉ
1. **Monolith** - ุจุณูุท ููู ุตุนุจ ุงูุชูุณุน
2. **Microservices** - scalable ููู ูุนูุฏ ุฌุฏุงู ููุจุฏุงูุฉ
3. **Modular Monolith** - ุชูุงุฒู ุจูู ุงูุจุณุงุทุฉ ูุงููุงุจููุฉ ููุชูุณุน

#### ุงูุฃุณุจุงุจ
- โ **Simplicity**: ูุดุฑ ุฃุณูู (single deployment)
- โ **Development Speed**: ุชุทููุฑ ุฃุณุฑุน ูู ุงูุจุฏุงูุฉ
- โ **Modularity**: ูุตู ูุงุถุญ ุจูู ุงููุญุฏุงุช
- โ **Future-proof**: ูููู ุงูุชุญููู ุฅูู Microservices ูุงุญูุงู
- โ **Lower Complexity**: ูุง ูุญุชุงุฌ ูู service mesh, API gateway, ุฅูุฎ
- โ **Cost**: ุชูููุฉ infrastructure ุฃูู

#### ุงููุจุงุฏุฆ
```
1. ูู module ูุณุชูู (controllers, services, schemas)
2. ูุง ููุฌุฏ dependencies ุฏุงุฆุฑูุฉ ุจูู modules
3. Communication ุนุจุฑ well-defined interfaces
4. Shared layer ูููุดุชุฑูุงุช ููุท
```

#### ูุชู ูุญูู ุฅูู Microservicesุ
- ุนูุฏูุง ูุตู ุงููุณุชุฎุฏููู ูู 100,000+
- ุนูุฏูุง ุชุญุชุงุฌ ูุญุฏุงุช ูุนููุฉ ูู scaling ูุฎุชูู
- ุนูุฏูุง ููุจุฑ ุงููุฑูู (10+ ูุทูุฑูู)

#### ุงูุนูุงูุจ
- โ **ุฅูุฌุงุจู**: ุจุฏุงูุฉ ุณุฑูุนุฉ
- โ **ุฅูุฌุงุจู**: ูุดุฑ ุฃุณูู
- โ **ุฅูุฌุงุจู**: debugging ุฃุณูู
- โ๏ธ **ุณูุจู**: ุตุนูุจุฉ scale ูุญุฏุงุช ูุนููุฉ ููุท
- โ๏ธ **ุณูุจู**: ูุดุฑ ูุงุญุฏ ูููู (ููู ูุน CI/CD ูุตูุฑ ุณุฑูุน)

---

### [ADR-008] ุงุณุชุฎุฏุงู S3/Cloudinary ูุชุฎุฒูู ุงูุตูุฑ
**ุงูุญุงูุฉ:** โ ููุจูู  
**ุงูุชุงุฑูุฎ:** 2025-10-01

#### ุงูุณูุงู
ูุญุชุงุฌ ูุชุฎุฒูู ุตูุฑ ุงูููุชุฌุงุช ูุงููุณุชุฎุฏููู.

#### ุงููุฑุงุฑ
ุงุณุชุฎุฏุงู **S3** ุฃู **Cloudinary** (ูุงุจู ููุชุจุฏูู).

#### ุงูุจุฏุงุฆู ุงููุฏุฑูุณุฉ
1. **Local Storage** - ูุดุงูู ูุน scaling
2. **Database** - ุจุทูุก ููููู
3. **S3** - scalable, reliable, ุฑุฎูุต
4. **Cloudinary** - S3 + ูุนุงูุฌุฉ ุงูุตูุฑ

#### ุงูุฃุณุจุงุจ
- โ **Scalability**: ูุชุนุงูู ูุน ููุงููู ุงูุตูุฑ
- โ **CDN**: ุชูุตูู ุณุฑูุน ุนุงูููุงู
- โ **Cost-effective**: ุชูููุฉ ููุฎูุถุฉ
- โ **Reliability**: SLA ุนุงููุฉ
- โ **Image Processing**: (Cloudinary) resize, compress, format

#### ุงูุชุตููู
```
- ุงุณุชุฎุฏุงู Ports & Adapters pattern
- ูููู ุงูุชุจุฏูู ุจูู S3 ู Cloudinary ุจุณูููุฉ
- Signed URLs ููุฃูุงู
```

#### ุงูุนูุงูุจ
- โ **ุฅูุฌุงุจู**: ูุง ุญูู ุนูู servers
- โ **ุฅูุฌุงุจู**: ุณุฑูุน ููุชููุฑ ุนุงูููุงู
- โ๏ธ **ุณูุจู**: ุชูููุฉ ุดูุฑูุฉ (ููู ููุฎูุถุฉ)
- โ๏ธ **ุณูุจู**: vendor dependency

---

### [ADR-009] ุงุณุชุฎุฏุงู Rate Limiting ููุญูุงูุฉ ูู DDoS
**ุงูุญุงูุฉ:** โ ููุจูู  
**ุงูุชุงุฑูุฎ:** 2025-10-01

#### ุงูุณูุงู
ูุญุชุงุฌ ูุญูุงูุฉ API ูู abuse ู DDoS attacks.

#### ุงููุฑุงุฑ
ุชุทุจูู **Rate Limiting** ุจุงุณุชุฎุฏุงู Redis.

#### ุงูุงุณุชุฑุงุชูุฌูุฉ
```typescript
// ููุงุนุฏ ูุฎุชููุฉ ุญุณุจ ุงูู endpoint
{
  '/api': 100 requests/minute,
  '/auth/send-otp': 3 requests/5 minutes,
  '/auth/verify-otp': 5 requests/5 minutes,
  '/auth/login': 5 requests/15 minutes,
}
```

#### ุงูุฃุณุจุงุจ
- โ **Security**: ูููุน brute force attacks
- โ **Availability**: ูููุน ุงุณุชููุงู ุงูููุงุฑุฏ
- โ **Fair Use**: ูุถูู ุชุฌุฑุจุฉ ุฌูุฏุฉ ููุฌููุน

#### ุงูุชุทุจูู
- ุงุณุชุฎุฏุงู `rate-limiter-flexible` library
- ุชุฎุฒูู counters ูู Redis
- Headers ููุนููู: `X-RateLimit-Limit`, `X-RateLimit-Remaining`

---

### [ADR-010] ุงุณุชุฎุฏุงู i18n ูุฏุนู ุงููุบุงุช ุงููุชุนุฏุฏุฉ
**ุงูุญุงูุฉ:** โ ููุจูู  
**ุงูุชุงุฑูุฎ:** 2025-10-01

#### ุงูุณูุงู
ูุญุชุงุฌ ูุฏุนู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ.

#### ุงููุฑุงุฑ
ุชุฎุฒูู ุงููุญุชูู ูุชุนุฏุฏ ุงููุบุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

#### ุงูุชุตููู
```typescript
// ูู Database
{
  name: { ar: "ููุญ ุดูุณู", en: "Solar Panel" },
  description: { ar: "...", en: "..." }
}

// ูู Frontend
i18next ููุชุฑุฌูุงุช
RTL Support ูู CSS
```

#### ุงูุฃุณุจุงุจ
- โ **Flexibility**: ุณูู ุฅุถุงูุฉ ูุบุงุช ุฌุฏูุฏุฉ
- โ **SEO**: ูุญุชูู ุจูุบุงุช ูุชุนุฏุฏุฉ
- โ **User Experience**: ุชุฌุฑุจุฉ ุฃูุถู

#### ุงูุนูุงูุจ
- โ **ุฅูุฌุงุจู**: ุฏุนู ูุงูู ููุบุงุช
- โ๏ธ **ุณูุจู**: ุญุฌู ุงูุจูุงูุงุช ุฃูุจุฑ ููููุงู

---

## ๐ ููููุฉ ุฅุถุงูุฉ ADR ุฌุฏูุฏ

### Template

```markdown
### [ADR-XXX] ุนููุงู ุงููุฑุงุฑ
**ุงูุญุงูุฉ:** ๐ ููุชุฑุญ / โ ููุจูู / โ ูุฑููุถ / โ๏ธ ูุญู ููุงุด  
**ุงูุชุงุฑูุฎ:** YYYY-MM-DD

#### ุงูุณูุงู
ููุงุฐุง ูุญุชุงุฌ ูุฐุง ุงููุฑุงุฑุ ูุง ูู ุงููุดููุฉุ

#### ุงููุฑุงุฑ
ูุงุฐุง ูุฑุฑูุงุ

#### ุงูุจุฏุงุฆู ุงููุฏุฑูุณุฉ
1. ุฎูุงุฑ 1 - ...
2. ุฎูุงุฑ 2 - ...
3. ุฎูุงุฑ 3 - ...

#### ุงูุฃุณุจุงุจ
- โ ุณุจุจ 1
- โ ุณุจุจ 2
- โ ุณุจุจ 3

#### ุงูุนูุงูุจ
- โ **ุฅูุฌุงุจู**: ...
- โ **ุฅูุฌุงุจู**: ...
- โ๏ธ **ุณูุจู**: ...
- โ๏ธ **ุณูุจู**: ...
```

---

## ๐ ุฅุญุตุงุฆูุงุช ุงููุฑุงุฑุงุช

- **ุงููุฌููุน:** 10 ูุฑุงุฑุงุช
- **ููุจูู:** 10
- **ููุชุฑุญ:** 0
- **ูุฑููุถ:** 0
- **ูุญู ููุงุด:** 0

---

**ุขุฎุฑ ุชุญุฏูุซ:** 14 ุฃูุชูุจุฑ 2025

